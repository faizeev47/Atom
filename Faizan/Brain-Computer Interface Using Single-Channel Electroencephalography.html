<!DOCTYPE html>
<!-- saved from url=(0091)https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/# -->
<html lang="en"><script type="text/javascript" charset="utf-8" id="zm-extension" src="chrome-extension://fdcgdnkidjaadafnichfpabhfomcebme/scripts/webrtc-patch.js" async=""></script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>Brain-Computer Interface Using Single-Channel Electroencephalography</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Charles Moyes and Mengxiang Jiang">

    <!-- styles -->
    <link href="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
    <link href="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/bootstrap-responsive.css" rel="stylesheet">
    <link href="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/prettify.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- fav and touch icons -->
    <link rel="shortcut icon" href="https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/img/favicon.ico">
  <style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Hover_Arrow {position: absolute; width: 15px; height: 11px; cursor: pointer}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuTitle {background-color: #CCCCCC; margin: -1px -1px 1px -1px; text-align: center; font-style: italic; font-size: 80%; color: #444444; padding: 2px 0; overflow: hidden}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; border: 0; padding: 0; margin: 0}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0 !important; padding: 0 !important; margin: 0 !important; vertical-align: 0 !important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap ! important}
.MathJax img {display: inline ! important; float: none ! important}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block; overflow: hidden; width: 1px; height: 60ex}
.MathJax .MathJax_EmBox {display: block; overflow: hidden; width: 1px; height: 60em}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff') format('woff'), url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf') format('opentype')}
@font-face {font-family: MathJax_Main; src: url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff') format('woff'), url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf') format('opentype'); font-weight: bold}
@font-face {font-family: MathJax_Main; src: url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff') format('woff'), url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf') format('opentype'); font-style: italic}
@font-face {font-family: MathJax_Math; src: url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff') format('woff'), url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf') format('opentype'); font-style: italic}
@font-face {font-family: MathJax_Caligraphic; src: url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff') format('woff'), url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff') format('woff'), url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff') format('woff'), url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff') format('woff'), url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff') format('woff'), url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf') format('opentype')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">@font-face {font-family: MathJax_AMS; src: url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/woff/MathJax_AMS-Regular.woff') format('woff'), url('https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/mathjax/fonts/HTML-CSS/TeX/otf/MathJax_AMS-Regular.otf') format('opentype')}
</style></head>

  <body onload="prettyPrint();"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/#">BCI using EEG</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/#intro">Introduction</a></li>
              <li><a href="https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/#design">High-Level Design</a></li>
              <li><a href="https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/#hardware">Hardware Design</a></li>
              <li><a href="https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/#software">Software Design</a></li>
              <li><a href="https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/#results">Results</a></li>
              <li><a href="https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/#conclusions">Conclusions</a></li>
              <li><a href="https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/#appendix">Appendix</a></li>
              <li><a href="https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/#references">References</a></li>
              <li><a href="https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/#contact">Contact Us</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

      <!-- Main hero unit -->
      <div class="hero-unit">
        <h1>Brain-Computer Interface</h1><br>
        <h4>Charles Moyes (cwm55) and Mengxiang Jiang (mj294)</h4><br>
        <p>We built a robust Brain-Computer Interface (BCI) using single-channel electroencephalography (EEG) with an AVR microcontroller, and we were able to play Pong using our brain waves (and monitor/record our sleep).</p><br>
        <p><a class="btn btn-primary btn-large" onclick="window.open(&#39;http://www.youtube.com/watch?v=uYQfdA2tXbc&#39;)">Watch a demo video »</a></p>
      </div>

      <!-- Columns -->
      <a name="intro"></a>
      <div class="row">
        <div class="span12">
          <h2>Introduction</h2>
           <p>Our goal was to build a brain-computer interface using an AVR microcontroller. We decided that the least invasive way of measuring brain waves would be using electroencephalography (EEG) to record microvolt-range potential differences across locations on the user's scalp. In order to accomplish this, we constructed a two-stage amplification and filtering circuit. Moreover, we used the built-in ADC functionality of the microcontroller to digitize the signal. Passive silver-plated electrodes soaked in a saline solution are placed on the user's head and connected to the amplifier board. The opto-isolated UART sends the ADC digital values over USB to a PC connected to the microcontroller. The PC runs software written in MATLAB and C to perform FFT and run machine learning algorithms (SVM) on the resultant signal. From there, we were able to control our own OpenGL implementation of the classic PC game Pong using our mind's brain waves. We also wrote software to record our sleep and store the EEG signal inside a data file.</p>
           <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/eeg.jpg"><br><br><strong>Figure: Recording a User's Brain Waves Using EEG</strong><br><strong>Source:</strong> <a href="http://www.enotes.com/electroencephalogram-reference/eeg-machine">http://www.enotes.com/electroencephalogram-reference/eeg-machine</a></p>
        </div>
      </div>
      <br>
      
      <a name="design"></a>
      <div class="row">
        <div class="span12">
          <h2>High-Level Design</h2>
           <h3>Rational and Inspiration for Project Idea</h3>
           <p>Our project idea was inspired by Charles's severe obstructive sleep apnea (OSA) disorder. In order to diagnose sleep apnea, a clinical sleep study is performed where the patient is attached to EEG electrodes, along with SpO<sub>2</sub>, EMG, and respiration sensors. The patient's sleeping patterns are recorded overnight, and apneas (periods of sleep without breathing) can be identified within the collected data. This process is costly and requires an overnight stay at a hospital or sleep lab. Moreover, the patient often is denied access to their own data since a licensed sleep specialist interprets it for them. Our goal was to build a low-cost alternative that would allow users to take their health in their own hands by diagnosing and attempting to treat their own sleep disorders. Moreover, our project has diverse applications in the areas of neurofeedback (aiding meditation and treatment of ADHD disorder), along with brain-computer interfaces (allowing the disabled to control wheelchairs and spell words on a computer screen using their thoughts).</p>
           <br>

           <h3>Background Math</h3><br>
           <h4>Support Vector Machines</h4>
           <p>The machine learning algorithm we used was a support vector machine (SVM), which is a classifier that operates in a higher dimensional space and attempts to label the given vectors using a dividing hyperplane. The supervised learning method takes a set of training data and constructs a model that is able to label unknown test data. A brief explanation of the mathematics behind SVMs follows. During training, the SVM is given a set of instance-label pairs of the form <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-1-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-1"><span style="display: inline-block; position: relative; width: 9.231em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.738em, 1000em, 3.173em, -0.512em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mo" id="MathJax-Span-3" style="font-family: MathJax_Main;">{</span><span class="mo" id="MathJax-Span-4" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-5"><span class="mrow" id="MathJax-Span-6"><span class="munderover" id="MathJax-Span-7"><span style="display: inline-block; position: relative; width: 0.908em; height: 0px;"><span style="position: absolute; clip: rect(3.366em, 1000em, 4.35em, -0.542em); top: -4em; left: 0em;"><span class="msubsup" id="MathJax-Span-8"><span style="display: inline-block; position: relative; width: 0.908em; height: 0px;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.678em, -0.542em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-9" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.068em; left: 0.577em;"><span class="mi" id="MathJax-Span-10" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span><span style="position: absolute; top: -4.086em; left: 0.233em;"><span style="height: 0em; vertical-align: 0em; width: 0.471em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-11" style="font-family: MathJax_Main;">⃗&nbsp;<span style="height: 0em; vertical-align: 0em; margin-left: -0.256em;"></span></span><span style="display: inline-block; overflow: hidden; height: 1px; width: 0em;"></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-12" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-13" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 0.838em; height: 0px;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.872em, -0.556em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-14" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -1.978em; left: 0.507em;"><span class="mi" id="MathJax-Span-15" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span><span class="mo" id="MathJax-Span-16" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-17" style="font-family: MathJax_Main; padding-left: 0.278em;">:</span><span class="mi" id="MathJax-Span-18" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">i</span><span class="mo" id="MathJax-Span-19" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mn" id="MathJax-Span-20" style="font-family: MathJax_Main; padding-left: 0.278em;">1</span><span class="mo" id="MathJax-Span-21" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-22" style="font-family: MathJax_Main; padding-left: 0.167em;">…</span><span class="mo" id="MathJax-Span-23" style="font-family: MathJax_Main; padding-left: 0.167em;">,</span><span class="mi" id="MathJax-Span-24" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">l</span><span class="mo" id="MathJax-Span-25" style="font-family: MathJax_Main;">}</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.414em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-1">\{(\vec{x_i}, y_i) : i=1, \ldots, l\}</script> where the instances are <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-2-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-26"><span style="display: inline-block; position: relative; width: 0.577em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.678em, -0.556em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-27"><span class="mi" id="MathJax-Span-28" style="font-family: MathJax_Math; font-style: italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.697em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-2">n</script>-dimensional vectors such that <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-3-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-29"><span style="display: inline-block; position: relative; width: 3.333em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.738em, 1000em, 3.081em, -0.815em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-30"><span class="texatom" id="MathJax-Span-31"><span class="mrow" id="MathJax-Span-32"><span class="munderover" id="MathJax-Span-33"><span style="display: inline-block; position: relative; width: 0.908em; height: 0px;"><span style="position: absolute; clip: rect(3.366em, 1000em, 4.35em, -0.542em); top: -4em; left: 0em;"><span class="msubsup" id="MathJax-Span-34"><span style="display: inline-block; position: relative; width: 0.908em; height: 0px;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.678em, -0.542em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-35" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.068em; left: 0.577em;"><span class="mi" id="MathJax-Span-36" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span><span style="position: absolute; top: -4.086em; left: 0.233em;"><span style="height: 0em; vertical-align: 0em; width: 0.471em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-37" style="font-family: MathJax_Main;">⃗&nbsp;<span style="height: 0em; vertical-align: 0em; margin-left: -0.256em;"></span></span><span style="display: inline-block; overflow: hidden; height: 1px; width: 0em;"></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-38" style="font-family: MathJax_Main; padding-left: 0.278em;">∈</span><span class="msubsup" id="MathJax-Span-39" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.229em; height: 0px;"><span style="position: absolute; clip: rect(2.176em, 1000em, 3.245em, -0.561em); top: -3.051em; left: 0em;"><span class="texatom" id="MathJax-Span-40"><span class="mrow" id="MathJax-Span-41"><span class="mi" id="MathJax-Span-42" style="font-family: MathJax_AMS;">R</span></span></span><span style="display: inline-block; width: 0px; height: 3.051em;"></span></span><span style="position: absolute; top: -2.628em; left: 0.705em;"><span class="mi" id="MathJax-Span-43" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.303em; vertical-align: -0.266em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-3">\vec{x_i} \in \mathbb{R}^n</script>. The <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-4-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-44"><span style="display: inline-block; position: relative; width: 0.577em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.678em, -0.556em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-45"><span class="mi" id="MathJax-Span-46" style="font-family: MathJax_Math; font-style: italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.697em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-4">n</script> dimensions represent <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-5-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-47"><span style="display: inline-block; position: relative; width: 0.577em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.678em, -0.556em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-48"><span class="mi" id="MathJax-Span-49" style="font-family: MathJax_Math; font-style: italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.697em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-5">n</script> separate "features." In addition, the labels are in the form <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-6-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-50"><span style="display: inline-block; position: relative; width: 4.872em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.556em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-51"><span class="mi" id="MathJax-Span-52" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-53" style="font-family: MathJax_Main; padding-left: 0.278em;">∈</span><span class="mo" id="MathJax-Span-54" style="font-family: MathJax_Main; padding-left: 0.278em;">{</span><span class="mn" id="MathJax-Span-55" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-56" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-57" style="font-family: MathJax_Main; padding-left: 0.167em;">−</span><span class="mn" id="MathJax-Span-58" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-59" style="font-family: MathJax_Main;">}</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-6">y \in \{1, -1\}</script>, where 1 and -1 designate target and non-target instances respectively. To "train" the support vector machine to recognize unknown input vectors, the following minimization problem is solved:</p>
           <p align="center"><span class="MathJax_Preview"></span><div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-7-Frame" style=""><nobr><span class="math" id="MathJax-Span-60"><span style="display: inline-block; position: relative; width: 9.359em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(0.862em, 1000em, 4.183em, -0.552em); top: -2.795em; left: 0em;"><span class="mrow" id="MathJax-Span-61"><span class="munderover" id="MathJax-Span-62"><span style="display: inline-block; position: relative; width: 1.667em; height: 0px;"><span style="position: absolute; clip: rect(1.869em, 1000em, 2.923em, -0.552em); top: -2.731em; left: 0em;"><span class="mo" id="MathJax-Span-63" style="font-family: MathJax_Main;">min</span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span><span style="position: absolute; clip: rect(1.592em, 1000em, 2.719em, -0.559em); top: -1.618em; left: 0.032em;"><span class="texatom" id="MathJax-Span-64"><span class="mrow" id="MathJax-Span-65"><span class="texatom" id="MathJax-Span-66"><span class="mrow" id="MathJax-Span-67"><span class="mi" id="MathJax-Span-68" style="font-size: 70.7%; font-family: MathJax_Main; font-weight: bold;">w</span></span></span><span class="mo" id="MathJax-Span-69" style="font-size: 70.7%; font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-70" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">b</span><span class="mo" id="MathJax-Span-71" style="font-size: 70.7%; font-family: MathJax_Main;">,</span><span class="texatom" id="MathJax-Span-72"><span class="mrow" id="MathJax-Span-73"><span class="mi" id="MathJax-Span-74" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">ξ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.004em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span><span class="mfrac" id="MathJax-Span-75" style="padding-left: 0.287em; padding-right: 0.12em;"><span style="display: inline-block; position: relative; width: 0.633em; height: 0px;"><span style="position: absolute; clip: rect(1.872em, 1000em, 2.923em, -0.494em); top: -3.407em; left: 50%; margin-left: -0.256em;"><span class="mn" id="MathJax-Span-76" style="font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span><span style="position: absolute; clip: rect(1.872em, 1000em, 2.923em, -0.527em); top: -2.045em; left: 50%; margin-left: -0.256em;"><span class="mn" id="MathJax-Span-77" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span><span style="position: absolute; clip: rect(0.808em, 1000em, 1.272em, -0.577em); top: -1.3em; left: 0em;"><span style="border-left: 0.633em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0em;"></span><span style="display: inline-block; width: 0px; height: 1.08em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-78" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.357em; height: 0px;"><span style="position: absolute; clip: rect(2.159em, 1000em, 2.991em, -0.552em); top: -2.795em; left: 0em;"><span class="texatom" id="MathJax-Span-79"><span class="mrow" id="MathJax-Span-80"><span class="mi" id="MathJax-Span-81" style="font-family: MathJax_Main; font-weight: bold;">w</span></span></span><span style="display: inline-block; width: 0px; height: 2.795em;"></span></span><span style="position: absolute; top: -2.631em; left: 0.833em;"><span class="mi" id="MathJax-Span-82" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span><span class="texatom" id="MathJax-Span-83"><span class="mrow" id="MathJax-Span-84"><span class="mi" id="MathJax-Span-85" style="font-family: MathJax_Main; font-weight: bold;">w</span></span></span><span class="mo" id="MathJax-Span-86" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-87" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="munderover" id="MathJax-Span-88" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.474em; height: 0px;"><span style="position: absolute; clip: rect(2.614em, 1000em, 4.399em, -0.522em); top: -3.756em; left: 0em;"><span class="mo" id="MathJax-Span-89" style="font-family: MathJax_Size2; vertical-align: 0em;">∑</span><span style="display: inline-block; width: 0px; height: 3.756em;"></span></span><span style="position: absolute; clip: rect(1.619em, 1000em, 2.582em, -0.562em); top: -1.194em; left: 0.16em;"><span class="texatom" id="MathJax-Span-90"><span class="mrow" id="MathJax-Span-91"><span class="mi" id="MathJax-Span-92" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span class="mo" id="MathJax-Span-93" style="font-size: 70.7%; font-family: MathJax_Main;">=</span><span class="mn" id="MathJax-Span-94" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span><span style="position: absolute; clip: rect(1.435em, 1000em, 2.418em, -0.55em); top: -3.368em; left: 0.641em;"><span class="texatom" id="MathJax-Span-95"><span class="mrow" id="MathJax-Span-96"><span class="mi" id="MathJax-Span-97" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">l</span></span></span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-98" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 0.775em; height: 0px;"><span style="position: absolute; clip: rect(1.578em, 1000em, 2.872em, -0.556em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-99" style="font-family: MathJax_Math; font-style: italic;">ξ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.005em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -1.978em; left: 0.444em;"><span class="mi" id="MathJax-Span-100" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.795em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 3.677em; vertical-align: -1.511em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-7">\min_{\mathbf{w},b,\mathbf{\xi}} \frac{1}{2}\mathbf{w}^T\mathbf{w}+C\sum_{i=1}^{l}\xi_i</script>subject to:<span class="MathJax_Preview"></span><div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-8-Frame" style=""><nobr><span class="math" id="MathJax-Span-101"><span style="display: inline-block; position: relative; width: 10.577em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.647em, 1000em, 3.173em, -0.556em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-102"><span class="msubsup" id="MathJax-Span-103"><span style="display: inline-block; position: relative; width: 0.838em; height: 0px;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.872em, -0.556em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-104" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -1.978em; left: 0.507em;"><span class="mi" id="MathJax-Span-105" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span><span class="mo" id="MathJax-Span-106" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-107"><span style="display: inline-block; position: relative; width: 1.357em; height: 0px;"><span style="position: absolute; clip: rect(2.159em, 1000em, 2.991em, -0.552em); top: -2.795em; left: 0em;"><span class="texatom" id="MathJax-Span-108"><span class="mrow" id="MathJax-Span-109"><span class="mi" id="MathJax-Span-110" style="font-family: MathJax_Main; font-weight: bold;">w</span></span></span><span style="display: inline-block; width: 0px; height: 2.795em;"></span></span><span style="position: absolute; top: -2.631em; left: 0.833em;"><span class="mi" id="MathJax-Span-111" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span><span class="mi" id="MathJax-Span-112" style="font-family: MathJax_Math; font-style: italic;">ϕ</span><span class="mo" id="MathJax-Span-113" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-114"><span style="display: inline-block; position: relative; width: 0.908em; height: 0px;"><span style="position: absolute; clip: rect(2.159em, 1000em, 2.987em, -0.556em); top: -2.795em; left: 0em;"><span class="texatom" id="MathJax-Span-115"><span class="mrow" id="MathJax-Span-116"><span class="mi" id="MathJax-Span-117" style="font-family: MathJax_Main; font-weight: bold;">x</span></span></span><span style="display: inline-block; width: 0px; height: 2.795em;"></span></span><span style="position: absolute; top: -2.068em; left: 0.577em;"><span class="mi" id="MathJax-Span-118" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span><span class="mo" id="MathJax-Span-119" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-120" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-121" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">b</span><span class="mo" id="MathJax-Span-122" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-123" style="font-family: MathJax_Main; padding-left: 0.278em;">≥</span><span class="mn" id="MathJax-Span-124" style="font-family: MathJax_Main; padding-left: 0.278em;">1</span><span class="mo" id="MathJax-Span-125" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="msubsup" id="MathJax-Span-126" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 0.775em; height: 0px;"><span style="position: absolute; clip: rect(1.578em, 1000em, 2.872em, -0.556em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-127" style="font-family: MathJax_Math; font-style: italic;">ξ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.005em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -1.978em; left: 0.444em;"><span class="mi" id="MathJax-Span-128" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.524em; vertical-align: -0.377em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-8">y_i(\mathbf{w}^T\phi(\mathbf{x}_i)+b)\geq 1 - \xi_i</script> <span class="MathJax_Preview"></span><div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-9-Frame" style=""><nobr><span class="math" id="MathJax-Span-129"><span style="display: inline-block; position: relative; width: 2.564em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.834em, 1000em, 3.171em, -0.556em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-130"><span class="msubsup" id="MathJax-Span-131"><span style="display: inline-block; position: relative; width: 0.775em; height: 0px;"><span style="position: absolute; clip: rect(1.578em, 1000em, 2.872em, -0.556em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-132" style="font-family: MathJax_Math; font-style: italic;">ξ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.005em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -1.978em; left: 0.444em;"><span class="mi" id="MathJax-Span-133" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span><span class="mo" id="MathJax-Span-134" style="font-family: MathJax_Main; padding-left: 0.278em;">≥</span><span class="mn" id="MathJax-Span-135" style="font-family: MathJax_Main; padding-left: 0.278em;">0</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.296em; vertical-align: -0.375em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-9">\xi_i \geq 0</script><strong>Source:</strong> <a href="http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf">http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf</a></p><br>
           <p>Note that <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-10-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-136"><span style="display: inline-block; position: relative; width: 0.577em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.588em, 1000em, 2.872em, -0.534em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-137"><span class="mi" id="MathJax-Span-138" style="font-family: MathJax_Math; font-style: italic;">ϕ</span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.233em; vertical-align: -0.323em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-10">\phi</script> is a function that maps the training vectors <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-11-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-139"><span style="display: inline-block; position: relative; width: 0.908em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.007em, 1000em, 4.35em, -0.953em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-140"><span class="msubsup" id="MathJax-Span-141"><span style="display: inline-block; position: relative; width: 0.908em; height: 0px;"><span style="position: absolute; clip: rect(3.007em, 1000em, 4.203em, -0.953em); top: -4em; left: 0em;"><span class="texatom" id="MathJax-Span-142"><span class="mrow" id="MathJax-Span-143"><span class="munderover" id="MathJax-Span-144"><span style="display: inline-block; position: relative; width: 0.577em; height: 0px;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.678em, -0.542em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-145" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -4.086em; left: 0.095em;"><span style="height: 0em; vertical-align: 0em; width: 0.471em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-146" style="font-family: MathJax_Main;">⃗&nbsp;<span style="height: 0em; vertical-align: 0em; margin-left: -0.256em;"></span></span><span style="display: inline-block; overflow: hidden; height: 1px; width: 0em;"></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span><span style="position: absolute; top: -2.068em; left: 0.577em;"><span class="mi" id="MathJax-Span-147" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.303em; vertical-align: -0.266em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-11">\vec{x}_i</script> into a higher-dimensional space, while <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-12-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-148"><span style="display: inline-block; position: relative; width: 2.564em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.833em, 1000em, 2.963em, -0.527em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-149"><span class="mi" id="MathJax-Span-150" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-151" style="font-family: MathJax_Main; padding-left: 0.278em;">&gt;</span><span class="mn" id="MathJax-Span-152" style="font-family: MathJax_Main; padding-left: 0.278em;">0</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.048em; vertical-align: -0.125em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-12">C>0</script> and <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-13-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-153"><span style="display: inline-block; position: relative; width: 0.775em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.104em, 1000em, 4.44em, -0.556em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-154"><span class="msubsup" id="MathJax-Span-155"><span style="display: inline-block; position: relative; width: 0.775em; height: 0px;"><span style="position: absolute; clip: rect(1.578em, 1000em, 2.872em, -0.556em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-156" style="font-family: MathJax_Math; font-style: italic;">ξ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.005em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -1.978em; left: 0.444em;"><span class="mi" id="MathJax-Span-157" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.296em; vertical-align: -0.375em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-13">\xi_i</script> act as error terms (so-called "slack variables"). Moreover, <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-14-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-158"><span style="display: inline-block; position: relative; width: 0.897em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.599em, 1000em, 2.667em, -0.546em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-159"><span class="mi" id="MathJax-Span-160" style="font-family: MathJax_Math; font-style: italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.973em; vertical-align: -0.077em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-14">K</script> is the kernel function which is defined as <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-15-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-161"><span style="display: inline-block; position: relative; width: 6.731em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.583em, 1000em, 3.214em, -0.546em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-162"><span class="mi" id="MathJax-Span-163" style="font-family: MathJax_Math; font-style: italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span><span class="mo" id="MathJax-Span-164" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-165" style="font-family: MathJax_Math; font-style: italic;">ϕ</span><span class="mo" id="MathJax-Span-166" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-167"><span class="mrow" id="MathJax-Span-168"><span class="msubsup" id="MathJax-Span-169"><span style="display: inline-block; position: relative; width: 0.908em; height: 0px;"><span style="position: absolute; clip: rect(2.159em, 1000em, 2.987em, -0.556em); top: -2.795em; left: 0em;"><span class="mi" id="MathJax-Span-170" style="font-family: MathJax_Main; font-weight: bold;">x</span><span style="display: inline-block; width: 0px; height: 2.795em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.577em;"><span class="mi" id="MathJax-Span-171" style="font-size: 70.7%; font-family: MathJax_Main; font-weight: bold;">i</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span></span></span><span class="msubsup" id="MathJax-Span-172"><span style="display: inline-block; position: relative; width: 0.908em; height: 0px;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.522em); top: -2.731em; left: 0em;"><span class="mo" id="MathJax-Span-173" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span><span style="position: absolute; top: -2.695em; left: 0.385em;"><span class="mi" id="MathJax-Span-174" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span><span class="mi" id="MathJax-Span-175" style="font-family: MathJax_Math; font-style: italic;">ϕ</span><span class="mo" id="MathJax-Span-176" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-177"><span class="mrow" id="MathJax-Span-178"><span class="msubsup" id="MathJax-Span-179"><span style="display: inline-block; position: relative; width: 0.908em; height: 0px;"><span style="position: absolute; clip: rect(2.159em, 1000em, 2.987em, -0.556em); top: -2.795em; left: 0em;"><span class="mi" id="MathJax-Span-180" style="font-family: MathJax_Main; font-weight: bold;">x</span><span style="display: inline-block; width: 0px; height: 2.795em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.577em;"><span class="mi" id="MathJax-Span-181" style="font-size: 70.7%; font-family: MathJax_Main; font-weight: bold;">j</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-182" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-183" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.65em; vertical-align: -0.427em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-15">K(\phi(\mathbf{x_i})^T\phi(\mathbf{x_j}))</script>. For our purposes, we used a radial basis function (RBF) kernel which has a <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-16-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-184"><span style="display: inline-block; position: relative; width: 0.897em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.599em, 1000em, 2.667em, -0.546em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-185"><span class="mi" id="MathJax-Span-186" style="font-family: MathJax_Math; font-style: italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.973em; vertical-align: -0.077em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-16">K</script> function of <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-17-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-187"><span style="display: inline-block; position: relative; width: 13.333em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.591em, 1000em, 3.214em, -0.546em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-188"><span class="mi" id="MathJax-Span-189" style="font-family: MathJax_Math; font-style: italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span><span class="mo" id="MathJax-Span-190" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-191"><span class="mrow" id="MathJax-Span-192"><span class="msubsup" id="MathJax-Span-193"><span style="display: inline-block; position: relative; width: 0.908em; height: 0px;"><span style="position: absolute; clip: rect(2.159em, 1000em, 2.987em, -0.556em); top: -2.795em; left: 0em;"><span class="mi" id="MathJax-Span-194" style="font-family: MathJax_Main; font-weight: bold;">x</span><span style="display: inline-block; width: 0px; height: 2.795em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.577em;"><span class="mi" id="MathJax-Span-195" style="font-size: 70.7%; font-family: MathJax_Main; font-weight: bold;">i</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-196" style="font-family: MathJax_Main;">,</span><span class="texatom" id="MathJax-Span-197" style="padding-left: 0.167em;"><span class="mrow" id="MathJax-Span-198"><span class="msubsup" id="MathJax-Span-199"><span style="display: inline-block; position: relative; width: 0.908em; height: 0px;"><span style="position: absolute; clip: rect(2.159em, 1000em, 2.987em, -0.556em); top: -2.795em; left: 0em;"><span class="mi" id="MathJax-Span-200" style="font-family: MathJax_Main; font-weight: bold;">x</span><span style="display: inline-block; width: 0px; height: 2.795em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.577em;"><span class="mi" id="MathJax-Span-201" style="font-size: 70.7%; font-family: MathJax_Main; font-weight: bold;">j</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-202" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-203" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-204" style="font-family: MathJax_Main; padding-left: 0.278em;">exp</span><span class="mo" id="MathJax-Span-205"></span><span class="mo" id="MathJax-Span-206" style="font-family: MathJax_Main;">(</span><span class="mo" id="MathJax-Span-207" style="font-family: MathJax_Main;">−</span><span class="mi" id="MathJax-Span-208" style="font-family: MathJax_Math; font-style: italic;">γ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.025em;"></span></span><span class="texatom" id="MathJax-Span-209"><span class="mrow" id="MathJax-Span-210"><span class="mo" id="MathJax-Span-211" style="font-family: MathJax_Main;">|</span></span></span><span class="texatom" id="MathJax-Span-212"><span class="mrow" id="MathJax-Span-213"><span class="mo" id="MathJax-Span-214" style="font-family: MathJax_Main;">|</span></span></span><span class="texatom" id="MathJax-Span-215"><span class="mrow" id="MathJax-Span-216"><span class="msubsup" id="MathJax-Span-217"><span style="display: inline-block; position: relative; width: 0.908em; height: 0px;"><span style="position: absolute; clip: rect(2.159em, 1000em, 2.987em, -0.556em); top: -2.795em; left: 0em;"><span class="mi" id="MathJax-Span-218" style="font-family: MathJax_Main; font-weight: bold;">x</span><span style="display: inline-block; width: 0px; height: 2.795em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.577em;"><span class="mi" id="MathJax-Span-219" style="font-size: 70.7%; font-family: MathJax_Main; font-weight: bold;">i</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-220" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="texatom" id="MathJax-Span-221" style="padding-left: 0.222em;"><span class="mrow" id="MathJax-Span-222"><span class="msubsup" id="MathJax-Span-223"><span style="display: inline-block; position: relative; width: 0.908em; height: 0px;"><span style="position: absolute; clip: rect(2.159em, 1000em, 2.987em, -0.556em); top: -2.795em; left: 0em;"><span class="mi" id="MathJax-Span-224" style="font-family: MathJax_Main; font-weight: bold;">x</span><span style="display: inline-block; width: 0px; height: 2.795em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.577em;"><span class="mi" id="MathJax-Span-225" style="font-size: 70.7%; font-family: MathJax_Main; font-weight: bold;">j</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span></span></span><span class="texatom" id="MathJax-Span-226"><span class="mrow" id="MathJax-Span-227"><span class="mo" id="MathJax-Span-228" style="font-family: MathJax_Main;">|</span></span></span><span class="msubsup" id="MathJax-Span-229"><span style="display: inline-block; position: relative; width: 0.716em; height: 0px;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.172em, -0.458em); top: -2.731em; left: 0em;"><span class="texatom" id="MathJax-Span-230"><span class="mrow" id="MathJax-Span-231"><span class="mo" id="MathJax-Span-232" style="font-family: MathJax_Main;">|</span></span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span><span style="position: absolute; top: -2.759em; left: 0.256em;"><span class="mn" id="MathJax-Span-233" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span><span class="mo" id="MathJax-Span-234" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.641em; vertical-align: -0.427em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-17">K(\mathbf{x_i}, \mathbf{x_j})=\exp(-\gamma||\mathbf{x_i}-\mathbf{x_j}||^2)</script> where <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-18-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-235"><span style="display: inline-block; position: relative; width: 2.308em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.872em, 1000em, 3.139em, -0.566em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-236"><span class="mi" id="MathJax-Span-237" style="font-family: MathJax_Math; font-style: italic;">γ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.025em;"></span></span><span class="mo" id="MathJax-Span-238" style="font-family: MathJax_Main; padding-left: 0.278em;">&gt;</span><span class="mn" id="MathJax-Span-239" style="font-family: MathJax_Main; padding-left: 0.278em;">0</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.212em; vertical-align: -0.336em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-18">\gamma > 0</script> represents a user-tunable parameter.</p><br>
           <h4>DFT</h4>
           <p>The discrete Fourier transform (DFT) transforms a sequence of <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-19-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-240"><span style="display: inline-block; position: relative; width: 0.897em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.599em, 1000em, 2.667em, -0.546em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-241"><span class="mi" id="MathJax-Span-242" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.973em; vertical-align: -0.077em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-19">N</script> complex numbers (an <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-20-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-243"><span style="display: inline-block; position: relative; width: 0.897em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.599em, 1000em, 2.667em, -0.546em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-244"><span class="mi" id="MathJax-Span-245" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.973em; vertical-align: -0.077em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-20">N</script>-point signal) in the time-domain into another <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-21-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-246"><span style="display: inline-block; position: relative; width: 0.897em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.599em, 1000em, 2.667em, -0.546em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-247"><span class="mi" id="MathJax-Span-248" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.973em; vertical-align: -0.077em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-21">N</script>-sequence in frequency domain via the following formula:</p>
           <p align="center"><span class="MathJax_Preview"></span><div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-22-Frame" style=""><nobr><span class="math" id="MathJax-Span-249"><span style="display: inline-block; position: relative; width: 8.974em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(0.806em, 1000em, 4.126em, -0.551em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-250"><span class="msubsup" id="MathJax-Span-251"><span style="display: inline-block; position: relative; width: 1.269em; height: 0px;"><span style="position: absolute; clip: rect(1.599em, 1000em, 2.667em, -0.551em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-252" style="font-family: MathJax_Math; font-style: italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.024em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.068em; left: 0.809em;"><span class="mi" id="MathJax-Span-253" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span><span class="mo" id="MathJax-Span-254" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="munderover" id="MathJax-Span-255" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.538em; height: 0px;"><span style="position: absolute; clip: rect(2.614em, 1000em, 4.399em, -0.522em); top: -3.756em; left: 0.032em;"><span class="mo" id="MathJax-Span-256" style="font-family: MathJax_Size2; vertical-align: 0em;">∑</span><span style="display: inline-block; width: 0px; height: 3.756em;"></span></span><span style="position: absolute; clip: rect(1.619em, 1000em, 2.59em, -0.562em); top: -1.194em; left: 0.096em;"><span class="texatom" id="MathJax-Span-257"><span class="mrow" id="MathJax-Span-258"><span class="mi" id="MathJax-Span-259" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-260" style="font-size: 70.7%; font-family: MathJax_Main;">=</span><span class="mn" id="MathJax-Span-261" style="font-size: 70.7%; font-family: MathJax_Main;">0</span></span></span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span><span style="position: absolute; clip: rect(1.507em, 1000em, 2.474em, -0.555em); top: -3.432em; left: 0em;"><span class="texatom" id="MathJax-Span-262"><span class="mrow" id="MathJax-Span-263"><span class="mi" id="MathJax-Span-264" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span class="mo" id="MathJax-Span-265" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span class="mn" id="MathJax-Span-266" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-267" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.101em; height: 0px;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.678em, -0.542em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-268" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.068em; left: 0.577em;"><span class="mi" id="MathJax-Span-269" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span><span class="mo" id="MathJax-Span-270" style="font-family: MathJax_Main; padding-left: 0.222em;">⋅</span><span class="msubsup" id="MathJax-Span-271" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 2.96em; height: 0px;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.678em, -0.538em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-272" style="font-family: MathJax_Math; font-style: italic;">e</span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.743em; left: 0.449em;"><span class="texatom" id="MathJax-Span-273"><span class="mrow" id="MathJax-Span-274"><span class="mo" id="MathJax-Span-275" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span class="mn" id="MathJax-Span-276" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span class="mi" id="MathJax-Span-277" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">π<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mfrac" id="MathJax-Span-278" style="padding-left: 0.12em; padding-right: 0.12em;"><span style="display: inline-block; position: relative; width: 0.569em; height: 0px;"><span style="position: absolute; clip: rect(1.606em, 1000em, 2.352em, -0.552em); top: -2.516em; left: 50%; margin-left: -0.128em;"><span class="mi" id="MathJax-Span-279" style="font-size: 51.3%; font-family: MathJax_Math; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; clip: rect(1.611em, 1000em, 2.346em, -0.561em); top: -1.8em; left: 50%; margin-left: -0.224em;"><span class="mi" id="MathJax-Span-280" style="font-size: 51.3%; font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span><span style="position: absolute; clip: rect(0.808em, 1000em, 1.272em, -0.577em); top: -1.227em; left: 0em;"><span style="border-left: 0.569em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0em;"></span><span style="display: inline-block; width: 0px; height: 1.08em;"></span></span></span></span><span class="mi" id="MathJax-Span-281" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 3.677em; vertical-align: -1.521em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-22">X_k=\sum_{n=0}^{N-1}x_n \cdot e^{-2\pi\frac{k}{N}n}</script></p>
           <p>The Fourier transform is denoted by <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-23-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-282"><span style="display: inline-block; position: relative; width: 0.833em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.663em, 1000em, 2.763em, -0.559em); top: -2.538em; left: 0em;"><span class="mrow" id="MathJax-Span-283"><span class="texatom" id="MathJax-Span-284"><span class="mrow" id="MathJax-Span-285"><span class="mi" id="MathJax-Span-286" style="font-family: MathJax_Caligraphic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.11em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.538em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.012em; vertical-align: -0.115em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-23">\mathcal{F}</script>, where <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-24-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-287"><span style="display: inline-block; position: relative; width: 4.359em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.853em, 1000em, 3.237em, -0.544em); top: -2.795em; left: 0em;"><span class="mrow" id="MathJax-Span-288"><span class="texatom" id="MathJax-Span-289"><span class="mrow" id="MathJax-Span-290"><span class="mi" id="MathJax-Span-291" style="font-family: MathJax_Main; font-weight: bold;">X</span></span></span><span class="mo" id="MathJax-Span-292" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="texatom" id="MathJax-Span-293" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-294"><span class="mi" id="MathJax-Span-295" style="font-family: MathJax_Caligraphic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.11em;"></span></span></span></span><span class="mo" id="MathJax-Span-296" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-297"><span class="mrow" id="MathJax-Span-298"><span class="mi" id="MathJax-Span-299" style="font-family: MathJax_Main; font-weight: bold;">x</span></span></span><span class="mo" id="MathJax-Span-300" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.795em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-24">\mathbf{X}=\mathcal{F}(\mathbf{x})</script>. <strong>Source:</strong> <a href="http://en.wikipedia.org/wiki/Discrete_Fourier_transform">http://en.wikipedia.org/wiki/Discrete_Fourier_transform</a></p>
           <p>An algorithm, the Fast Fourier Transform (FFT) by Cooley and Tukey, exists to perform DFT in <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-25-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-301"><span style="display: inline-block; position: relative; width: 4.295em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.527em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-302"><span class="mi" id="MathJax-Span-303" style="font-family: MathJax_Math; font-style: italic;">O</span><span class="mo" id="MathJax-Span-304" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-305" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-306" style="font-family: MathJax_Main; padding-left: 0.167em;">log</span><span class="mo" id="MathJax-Span-307"></span><span class="mi" id="MathJax-Span-308" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">n</span><span class="mo" id="MathJax-Span-309" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-25">O(n\log n)</script> computational complexity as opposed to <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-26-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-310"><span style="display: inline-block; position: relative; width: 2.564em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.705em, 1000em, 3.173em, -0.527em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-311"><span class="mi" id="MathJax-Span-312" style="font-family: MathJax_Math; font-style: italic;">O</span><span class="mo" id="MathJax-Span-313" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-314"><span style="display: inline-block; position: relative; width: 1.037em; height: 0px;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.678em, -0.556em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-315" style="font-family: MathJax_Math; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.645em; left: 0.577em;"><span class="mn" id="MathJax-Span-316" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span><span class="mo" id="MathJax-Span-317" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.454em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-26">O(n^2)</script>. We take advantage of this speed-up to perform DFTs in real-time on the input signals.</p><br>
           <h4>Filters</h4>
           <p>In order to filter the brain wave data in MATLAB, we use a finite impulse response (FIR) filter which operates on the last <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-27-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-318"><span style="display: inline-block; position: relative; width: 2.564em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.855em, 1000em, 3.005em, -0.546em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-319"><span class="mi" id="MathJax-Span-320" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span class="mo" id="MathJax-Span-321" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mn" id="MathJax-Span-322" style="font-family: MathJax_Main; padding-left: 0.222em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.072em; vertical-align: -0.175em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-27">N+1</script> samples received from the ADC. In signal processing, the output <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-28-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-323"><span style="display: inline-block; position: relative; width: 0.513em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.872em, -0.556em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-324"><span class="mi" id="MathJax-Span-325" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.93em; vertical-align: -0.323em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-28">y</script> of a linear time-invariant (LTI) system is obtained through convolution of the input signal <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-29-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-326"><span style="display: inline-block; position: relative; width: 0.577em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.678em, -0.542em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-327"><span class="mi" id="MathJax-Span-328" style="font-family: MathJax_Math; font-style: italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.697em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-29">x</script> with its impulse response <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-30-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-329"><span style="display: inline-block; position: relative; width: 0.577em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.588em, 1000em, 2.678em, -0.529em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-330"><span class="mi" id="MathJax-Span-331" style="font-family: MathJax_Math; font-style: italic;">h</span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-30">h</script>. This <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-31-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-332"><span style="display: inline-block; position: relative; width: 0.577em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.588em, 1000em, 2.678em, -0.529em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-333"><span class="mi" id="MathJax-Span-334" style="font-family: MathJax_Math; font-style: italic;">h</span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-31">h</script> function "characterizes" the LTI system. The filter equation in terms of the output sequence <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-32-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-335"><span style="display: inline-block; position: relative; width: 1.667em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.556em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-336"><span class="mi" id="MathJax-Span-337" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-338" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-339" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-340" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-32">y[n]</script> and the input sequence <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-33-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-341"><span style="display: inline-block; position: relative; width: 1.731em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.542em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-342"><span class="mi" id="MathJax-Span-343" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-344" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-345" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-346" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-33">x[n]</script> is:</p>
           <p align="center"><span class="MathJax_Preview"></span><div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-34-Frame" style=""><nobr><span class="math" id="MathJax-Span-347"><span style="display: inline-block; position: relative; width: 19.872em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.556em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-348"><span class="mi" id="MathJax-Span-349" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-350" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-351" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-352" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-353" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="msubsup" id="MathJax-Span-354" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.037em; height: 0px;"><span style="position: absolute; clip: rect(1.588em, 1000em, 2.678em, -0.529em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-355" style="font-family: MathJax_Math; font-style: italic;">h</span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.577em;"><span class="mn" id="MathJax-Span-356" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span><span class="mi" id="MathJax-Span-357" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-358" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-359" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-360" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-361" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="msubsup" id="MathJax-Span-362" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.037em; height: 0px;"><span style="position: absolute; clip: rect(1.588em, 1000em, 2.678em, -0.529em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-363" style="font-family: MathJax_Math; font-style: italic;">h</span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.577em;"><span class="mn" id="MathJax-Span-364" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span><span class="mi" id="MathJax-Span-365" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-366" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-367" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-368" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mn" id="MathJax-Span-369" style="font-family: MathJax_Main; padding-left: 0.222em;">1</span><span class="mo" id="MathJax-Span-370" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-371" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mo" id="MathJax-Span-372" style="font-family: MathJax_Main; padding-left: 0.222em;">…</span><span class="mo" id="MathJax-Span-373" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="msubsup" id="MathJax-Span-374" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.293em; height: 0px;"><span style="position: absolute; clip: rect(1.588em, 1000em, 2.678em, -0.529em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-375" style="font-family: MathJax_Math; font-style: italic;">h</span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.068em; left: 0.577em;"><span class="mi" id="MathJax-Span-376" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span><span class="mi" id="MathJax-Span-377" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-378" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-379" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-380" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-381" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span class="mo" id="MathJax-Span-382" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-34">y[n]=h_0x[n]+h_1x[n-1]+\ldots+h_Nx[n-N]</script></p>
           <p>Note that only <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-35-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-383"><span style="display: inline-block; position: relative; width: 0.897em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.599em, 1000em, 2.667em, -0.546em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-384"><span class="mi" id="MathJax-Span-385" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.973em; vertical-align: -0.077em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-35">N</script> coefficients are used for this filter (hence, "finite" impulse response). If we let <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-36-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-386"><span style="display: inline-block; position: relative; width: 3.397em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.855em, 1000em, 2.934em, -0.546em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-387"><span class="mi" id="MathJax-Span-388" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span class="mo" id="MathJax-Span-389" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-390" style="font-family: MathJax_Main; padding-left: 0.278em;">∞</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.987em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-36">N \rightarrow \infty</script>, then the filter becomes an infinite impulse response (IIR) filter. <strong>Source:</strong> <a href="http://en.wikipedia.org/wiki/FIR_filter">http://en.wikipedia.org/wiki/FIR_filter</a></p><br>
           <h4>EEG Signal Analysis</h4>
           <p>The EEG signal itself has several components separated by frequency. Delta waves are characteristic of deep sleep and are high amplitude waves in the frequency range <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-37-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-391"><span style="display: inline-block; position: relative; width: 4.103em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.833em, 1000em, 3.128em, -0.538em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-392"><span class="mn" id="MathJax-Span-393" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-394" style="font-family: MathJax_Main; padding-left: 0.278em;">≤</span><span class="mi" id="MathJax-Span-395" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span class="mo" id="MathJax-Span-396" style="font-family: MathJax_Main; padding-left: 0.278em;">≤</span><span class="mn" id="MathJax-Span-397" style="font-family: MathJax_Main; padding-left: 0.278em;">4</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.246em; vertical-align: -0.323em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-37">0 \leq f \leq 4</script> Hz. Theta waves occur within the 4-8 Hz frequency band during meditation, idling, or drowsiness. Alpha waves have frequency range 8-14 Hz and take place while relaxing or reflecting. Another way to boost alpha waves is to close the eyes. Beta waves reside in the 13-30 Hz frequency band and are characteristic of the user being alert or active. They become present while the user is concentrating. Gamma waves in the 30-100 Hz range occur during sensory processing of sound and sight. Lastly, mu waves occur in the 8-13 Hz frequency range while motor neurons are at rest. Mu <em>suppression</em> takes place when the user imagines moving or actually moves parts of their body. An example diagram of the EEG signal types follows:</p>
           <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/eegwaves.png"><br><br><strong>Figure: EEG Wave Frequency Ranges</strong><br><strong>Source:</strong> <a href="http://neurodevelopmentcenter.com/">http://neurodevelopmentcenter.com/</a></p>
           
           <p>EEG signals also contain event-related potentials (ERPs). An example is the P300 signal, which occurs when the user recognizes an item in a sequence of randomly presented events occurring with a Bernoulli distribution. It is emitted with a latency of around 300-600 ms and shows up as a deflection in the EEG signal:</p>
           
           <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/p300.png"><br><br><strong>Figure: P300 Event-Related Potential (ERP)</strong><br><strong>Source:</strong> <a href="http://en.wikipedia.org/wiki/Event-related_potential">http://en.wikipedia.org/wiki/Event-related_potential</a></p>
           <p>Other artifacts present themselves in the EEG signal as well such as eye blinking and eye movement. An illustration of an example signal corrupted by eye blinking follows:</p>
           <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/eyeblinks.png"><br><br><strong>Figure: Eye Blinking within an EEG Signal</strong><br><strong>Source:</strong> <a href="http://psy.hull.ac.uk/Staff/m.large/Infonew/">http://psy.hull.ac.uk/Staff/m.large/Infonew/</a></p>
           <br>
           
           <h3>Logical Structure</h3>
           <p>The overall structure of the project consists of an amplifier pipeline consisting of a differential instrumentation amplifier (where common-mode noise is measured using a right-leg driver attached to the patient's mastoid or ear lobe), along with an operational amplifier and some filters (to remove DC offsets, 60 Hz power-line noise, and other artifacts). From there, the signal passes to the microcontroller, where it is digitized via an ADC. Next, it is send over an isolated USB UART connection to a PC via an FTDI chip. The PC then performs signal processing and is able to output the results to the user, creating a neurofeedback loop which allows the user to control the PC using their brain waves. A functional block diagram of the overall structure follows:</p><br>
           <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/block_diagram.png"><br><br><strong>Figure: High-Level Block Diagram of Project</strong></p>
           
           <h3>Hardware/Software Trade-offs</h3>
           <p>Performing FFT in hardware using a floating-point unit (FPU) or a field programmable gate array (FPGA) would have allowed us to realize a considerable speed-up; however, our budget was only limited to $75, so this was not an option. Another trade-off we encountered was the use of MATLAB versus C. MATLAB is an interpretted language whose strength lies in performing vectorized matrix and linear algebra operations. It is very fast when performing these operations, but it is an interpreted language that does not run as native code. This speed penalty affected us when we attempted to collect data in real-time from the serial port at 57600 baud. To combat this speed penalty, I wrote a much faster OpenGL serial plotting application in C that runs at 200-400 frames per second on my machine (well above the ADC sample rate of 200 Hz) and is able to perform FFTs in real-time as the data comes in. Furthermore, yet another trade-off was the decision to use the PC to output the EEG waveforms rather than a built-in graphical LCD in hardware. Once again, budget constraints limited us, along with power usage since for safety reasons, our device uses four AA batteries instead of a mains AC power supply.</p>
           <br>
           
           <h3>Relationship of Your Design to Available Standards</h3>
           <p>There exists a Modular EEG serial packet data format that is typically used to transmit EEG data over serial; however, we used ASCII terminal output (16-bit integer values in ASCII separated by line breaks) for simplicity, ease of debugging, and compatibility with MATLAB. Moreover, serial communications followed the RS232/USB standards. Another consideration was the IEC601 standard. IEC601 is a medical safety standard for medical devices that ensures that they are safe for patient use. Unfortunately, testing for IEC601 compliance was very much out-of-budget. Nevertheless, we discuss the many safety considerations that we absolutely adhered by in the <b>Safety</b> subsection (under <a href="https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/#results">Results</a>) of this report.</p>
        </div>
      </div>
      <br>
      
      <a name="hardware"></a>
      <div class="row">
        <div class="span12">
          <h2>Hardware Design</h2>
            <h3>Amplifier Board Design</h3>
            
            <p>We built an analog amplification circuit with a total gain of 1,500 based on the design by Chip Epstein at <a href="https://sites.google.com/site/chipstein/home-page/eeg-with-an-arduino">https://sites.google.com/site/chipstein/home-page/eeg-with-an-arduino</a> with modified gain and filter stages. The first stage uses an AD620 instrumentation amplifier for differential common mode signal rejection to reduce noise. The gain of the AD620 is approximately 23. A voltage divider and a 3140 opamp buffer provide a 2.5 V virtual ground for the instrumentation amplifier. After passing through the instrumentation amplifier, the signal is filtered using an RC high pass filter with <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-38-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-398"><span style="display: inline-block; position: relative; width: 3.974em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.833em, 1000em, 3.171em, -0.522em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-399"><span class="msubsup" id="MathJax-Span-400"><span style="display: inline-block; position: relative; width: 0.912em; height: 0px;"><span style="position: absolute; clip: rect(1.577em, 1000em, 2.872em, -0.522em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-401" style="font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -1.978em; left: 0.517em;"><span class="mi" id="MathJax-Span-402" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">c</span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span><span class="mo" id="MathJax-Span-403" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mn" id="MathJax-Span-404" style="font-family: MathJax_Main; padding-left: 0.278em;">0.13</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.298em; vertical-align: -0.375em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-38">f_c = 0.13</script> Hz (we modified the original design to allow the P300 ERP to reside within the pass-band of the filter).</p>
            <p>Next, the signal undergoes a second-stage amplification. The gain of a 3140 opamp is set to approximately 65. The output signal is then filtered using an RC low-pass filter with a cut-off frequency of approximately 48 Hz. This frequency was chosen to preserve the low-frequency content of the EEG signal, while removing 50-60 Hz power line noise from the signal. We ordered parts from Digi-Key and samples from Analog Devices, Texas Instruments, and Maxim Semiconductor. We also sampled silver-plated passive EEG electrodes. From there, we were able to amplify a 125 <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-39-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-405"><span style="display: inline-block; position: relative; width: 3.269em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.855em, 1000em, 3.21em, -0.554em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-406"><span class="mi" id="MathJax-Span-407" style="font-family: MathJax_Math; font-style: italic;">μ</span><span class="texatom" id="MathJax-Span-408"><span class="mrow" id="MathJax-Span-409"><span class="mi" id="MathJax-Span-410" style="font-family: MathJax_Main;">V</span></span></span><span class="mspace" id="MathJax-Span-411" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="msubsup" id="MathJax-Span-412"><span style="display: inline-block; position: relative; width: 1.613em; height: 0px;"><span style="position: absolute; clip: rect(1.855em, 1000em, 2.945em, -0.558em); top: -2.731em; left: 0em;"><span class="texatom" id="MathJax-Span-413"><span class="mrow" id="MathJax-Span-414"><span class="mi" id="MathJax-Span-415" style="font-family: MathJax_Main;">V</span></span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.769em;"><span class="texatom" id="MathJax-Span-416"><span class="mrow" id="MathJax-Span-417"><span class="mi" id="MathJax-Span-418" style="font-size: 70.7%; font-family: MathJax_Main;">p</span><span class="mi" id="MathJax-Span-419" style="font-size: 70.7%; font-family: MathJax_Main;">p</span></span></span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.318em; vertical-align: -0.422em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-39">\mu\mathrm{V}\;\mathrm{V}_\mathrm{pp}</script>, 10 Hz square wave calibration signal to well within the ADC reference voltage range (0-1.1 <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-40-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-420"><span style="display: inline-block; position: relative; width: 0.769em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.599em, 1000em, 2.689em, -0.525em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-421"><span class="mi" id="MathJax-Span-422" style="font-family: MathJax_Math; font-style: italic;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.186em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1em; vertical-align: -0.103em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-40">V</script>) and plot it on a PC in real-time. We constructed this prototype circuit on a breadboard. A schematic diagram of the amplifier board follows:</p>
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/amplifier.png"><br><br><strong>Figure: EEG Amplifier Board Schematic</strong></p>
            
            <h3>Microcontroller Board Design</h3>
            <p>The microcontroller board contains a voltage divider that outputs a 125 <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-41-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-423"><span style="display: inline-block; position: relative; width: 3.269em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.855em, 1000em, 3.21em, -0.554em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-424"><span class="mi" id="MathJax-Span-425" style="font-family: MathJax_Math; font-style: italic;">μ</span><span class="texatom" id="MathJax-Span-426"><span class="mrow" id="MathJax-Span-427"><span class="mi" id="MathJax-Span-428" style="font-family: MathJax_Main;">V</span></span></span><span class="mspace" id="MathJax-Span-429" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="msubsup" id="MathJax-Span-430"><span style="display: inline-block; position: relative; width: 1.613em; height: 0px;"><span style="position: absolute; clip: rect(1.855em, 1000em, 2.945em, -0.558em); top: -2.731em; left: 0em;"><span class="texatom" id="MathJax-Span-431"><span class="mrow" id="MathJax-Span-432"><span class="mi" id="MathJax-Span-433" style="font-family: MathJax_Main;">V</span></span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.769em;"><span class="texatom" id="MathJax-Span-434"><span class="mrow" id="MathJax-Span-435"><span class="mi" id="MathJax-Span-436" style="font-size: 70.7%; font-family: MathJax_Main;">p</span><span class="mi" id="MathJax-Span-437" style="font-size: 70.7%; font-family: MathJax_Main;">p</span></span></span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.318em; vertical-align: -0.422em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-41">\mu\mathrm{V}\;\mathrm{V}_\mathrm{pp}</script>, 10 Hz square wave calibration signal from <strong>Pin D.3</strong> of the microcontroller. Moreover, it contains a <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-42-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-438"><span style="display: inline-block; position: relative; width: 2.051em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.855em, 1000em, 3.005em, -0.521em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-439"><span class="mo" id="MathJax-Span-440" style="font-family: MathJax_Main;">+</span><span class="mn" id="MathJax-Span-441" style="font-family: MathJax_Main;">6</span><span class="mi" id="MathJax-Span-442" style="font-family: MathJax_Math; font-style: italic;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.186em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.072em; vertical-align: -0.175em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-42">+6 V</script> DC battery-power supply that provides DC power to the microcontroller and the amplifiers. A schematic diagram of the microcontroller board follows:</p><br>
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/power.png"><br><br><strong>Figure: Microcontroller Power Supply Schematic</strong></p>
            <h3>Opto-Isolated UART over USB Design</h3>
            <p>We constructed an isolated +6 VDC power supply using 4 AA batteries and connected it the microcontroller using the PCB target board. We cut the ground trace connecting the microcontroller ground to the USB ground using a dremel tool. An illustration of the cut that we performed follows:</p>
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/cut.jpg"><br><br><strong>Figure: Ground Isolation Dremel Cut on Target Board</strong></p>
            <p>We used a Fairchild Semiconductor 6N137 optoisolator to isolate the USB power from the microcontroller power. The line of isolation is between the microcontroller UART RX and TX pins (<strong>Pin D.0</strong> and <strong>Pin D.1</strong>) and the FTDI chip's RX and TX pins. A schematic diagram of the isolation circuit follows:</p><br>
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/opto.png"><br><br><strong>Figure: USB UART Opto-Isolation Schematic</strong></p>

            <h3>Electrode Cap Design</h3>
            <p>We constructed an EEG helmet consisting of an old baseball cap modified to contain EEG electrodes. We followed the International 10-20 System of Electrode Placement by including electrodes at the designated locations on the scalp: Occipital lobe (<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-43-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-443"><span style="display: inline-block; position: relative; width: 0.769em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.578em, 1000em, 2.689em, -0.527em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-444"><span class="mi" id="MathJax-Span-445" style="font-family: MathJax_Math; font-style: italic;">O</span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.025em; vertical-align: -0.103em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-43">O</script>), Central lobe (<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-44-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-446"><span style="display: inline-block; position: relative; width: 1.059em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.128em, 1000em, 4.35em, -0.546em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-447"><span class="msubsup" id="MathJax-Span-448"><span style="display: inline-block; position: relative; width: 1.059em; height: 0px;"><span style="position: absolute; clip: rect(1.602em, 1000em, 2.667em, -0.546em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-449" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.068em; left: 0.663em;"><span class="mi" id="MathJax-Span-450" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.159em; vertical-align: -0.266em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-44">F_z</script>, <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-45-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-451"><span style="display: inline-block; position: relative; width: 1.056em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.125em, 1000em, 4.35em, -0.544em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-452"><span class="msubsup" id="MathJax-Span-453"><span style="display: inline-block; position: relative; width: 1.056em; height: 0px;"><span style="position: absolute; clip: rect(1.599em, 1000em, 2.667em, -0.544em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-454" style="font-family: MathJax_Math; font-style: italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.068em; left: 0.66em;"><span class="mi" id="MathJax-Span-455" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.163em; vertical-align: -0.266em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-45">P_z</script>, <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-46-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-456"><span style="display: inline-block; position: relative; width: 1.184em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.103em, 1000em, 4.358em, -0.527em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-457"><span class="msubsup" id="MathJax-Span-458"><span style="display: inline-block; position: relative; width: 1.184em; height: 0px;"><span style="position: absolute; clip: rect(1.577em, 1000em, 2.689em, -0.527em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-459" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.724em;"><span class="mn" id="MathJax-Span-460" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.199em; vertical-align: -0.276em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-46">C_3</script>, <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-47-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-461"><span style="display: inline-block; position: relative; width: 1.184em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.103em, 1000em, 4.342em, -0.527em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-462"><span class="msubsup" id="MathJax-Span-463"><span style="display: inline-block; position: relative; width: 1.184em; height: 0px;"><span style="position: absolute; clip: rect(1.577em, 1000em, 2.689em, -0.527em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-464" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.724em;"><span class="mn" id="MathJax-Span-465" style="font-size: 70.7%; font-family: MathJax_Main;">4</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.18em; vertical-align: -0.257em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-47">C_4</script>, <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-48-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-466"><span style="display: inline-block; position: relative; width: 1.12em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.103em, 1000em, 4.35em, -0.527em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-467"><span class="msubsup" id="MathJax-Span-468"><span style="display: inline-block; position: relative; width: 1.12em; height: 0px;"><span style="position: absolute; clip: rect(1.577em, 1000em, 2.689em, -0.527em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-469" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.068em; left: 0.724em;"><span class="mi" id="MathJax-Span-470" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.189em; vertical-align: -0.266em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-48">C_z</script>), and Frontal lobe (<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-49-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-471"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.128em, 1000em, 4.505em, -0.546em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-472"><span class="msubsup" id="MathJax-Span-473"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px;"><span style="position: absolute; clip: rect(1.602em, 1000em, 2.667em, -0.546em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-474" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -3.85em; left: 0.663em;"><span class="texatom" id="MathJax-Span-475"><span class="mrow" id="MathJax-Span-476"><span class="msubsup" id="MathJax-Span-477"><span style="display: inline-block; position: relative; width: 0.694em; height: 0px;"><span style="position: absolute; clip: rect(1.713em, 1000em, 2.547em, -0.605em); top: -2.218em; left: 0em;"><span class="mi" id="MathJax-Span-478" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">p</span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span><span style="position: absolute; top: -1.991em; left: 0.385em;"><span class="mn" id="MathJax-Span-479" style="font-size: 51.3%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.345em; vertical-align: -0.452em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-49">F_{p_1}</script>, <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-50-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-480"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.128em, 1000em, 4.505em, -0.546em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-481"><span class="msubsup" id="MathJax-Span-482"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px;"><span style="position: absolute; clip: rect(1.602em, 1000em, 2.667em, -0.546em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-483" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -3.85em; left: 0.663em;"><span class="texatom" id="MathJax-Span-484"><span class="mrow" id="MathJax-Span-485"><span class="msubsup" id="MathJax-Span-486"><span style="display: inline-block; position: relative; width: 0.694em; height: 0px;"><span style="position: absolute; clip: rect(1.713em, 1000em, 2.547em, -0.605em); top: -2.218em; left: 0em;"><span class="mi" id="MathJax-Span-487" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">p</span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span><span style="position: absolute; top: -1.991em; left: 0.385em;"><span class="mn" id="MathJax-Span-488" style="font-size: 51.3%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 2.154em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.345em; vertical-align: -0.452em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-50">F_{p_2}</script>, <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-51-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-489"><span style="display: inline-block; position: relative; width: 0.769em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.577em, 1000em, 2.689em, -0.527em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-490"><span class="mi" id="MathJax-Span-491" style="font-family: MathJax_Math; font-style: italic;">G</span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.026em; vertical-align: -0.103em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-51">G</script>). A diagram of the 10-20 system of electrode placement follows:</p>
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/electrodes.png"><br><br><strong>Figure: EEG Electrode Placement Diagram</strong><br><strong>Source:</strong> <a href="http://www.immrama.org/eeg/electrode.html">http://www.immrama.org/eeg/electrode.html</a></p>
<!--            <p>A photograph of Charles wearing the EEG electrode cap follows:</p>
            <p align="center"><img src="img/electrodes.png"><br /><br /><strong>Figure: EEG Electrode Cap In Use</strong></p> -->
        </div>
      </div>
      <br>

      <a name="software"></a>      
      <div class="row">
        <div class="span12">
          <h2>Software Design</h2>
            <br>
            <h3>MATLAB Serial Code</h3>
            <p>The primary function of the MATLAB serial code is to acquire digital EEG signal data from the microcontroller over the serial port. We wrote some code to plot the signal onto the screen and to perform rudimentary signal processing tasks (FFT and filtering). The MATLAB code consists of three files: <tt>plot_samples.m</tt>, <tt>plot_samples_rt.m</tt>, and <tt>serial_test.m</tt></p><br>
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/calibration.png"><br><br><strong>Figure: Calibration Signal Plotted within MATLAB</strong></p><br>
            <p>The <tt>serial_test.m</tt> script opens the serial port and displays an almost real-time plot of the serial data. It parses the serial data in a <tt>while</tt> loop via <tt>fscanf</tt> and <tt>str2num</tt>. Additionally, it updates the plot window contents using MATLAB's <tt>drawnow</tt> command. The loop terminates if the user closes the plot window, causing the script to clean up the file handle and close the serial port.</p><br>
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/eeg_signal.jpg"><br><br><strong>Figure: Actual EEG Signal Plotted within MATLAB (observe the beta waves and eye blink artifact)</strong></p><br>
            <p>The <tt>plot_samples.m</tt> script opens the serial port, and reads exactly <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-52-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-492"><span style="display: inline-block; position: relative; width: 3.654em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.855em, 1000em, 2.945em, -0.546em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-493"><span class="mi" id="MathJax-Span-494" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span class="mo" id="MathJax-Span-495" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mn" id="MathJax-Span-496" style="font-family: MathJax_Main; padding-left: 0.278em;">200</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1em; vertical-align: -0.103em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-52">N=200</script> samples of EEG data (around 2 seconds). It then closes and cleans up the serial port. Next, a 60 Hz notch filter is applied to the signal to remove powerline noise via the <tt>iirnotch</tt> and <tt>filter</tt>, and the DC offset (mean value) is subtracted from the signal. Finally, the time-domain signal is displayed in a plot window, along with the single-sided amplitude spectrum computed via MATLAB's <tt>fft</tt> function.</p>
            <p>The <tt>plot_samples_rt.m</tt> script performs exactly the same operations as the <tt>plot_samples.m</tt> script, except it performs them in a loop. The script operates by sampling <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-53-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-497"><span style="display: inline-block; position: relative; width: 3.654em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.855em, 1000em, 2.945em, -0.546em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-498"><span class="mi" id="MathJax-Span-499" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span class="mo" id="MathJax-Span-500" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mn" id="MathJax-Span-501" style="font-family: MathJax_Main; padding-left: 0.278em;">200</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1em; vertical-align: -0.103em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-53">N=200</script> samples repeatedly until the user closes the plot window. As an effect, the signal plot and the frequency spectrum are refreshed every 2 seconds giving <em>psuedo</em> real-time operation.</p>
           
            <h3>OpenGL Plotter</h3>
            <p>A real-time serial plotter was written in OpenGL and C++. OpenGL is a high-performance graphics library, while C++ is much faster than MATLAB since it runs as native code. The program displays the real-time wave form from the serial port, along with its FFT. We use the FFTW (Fastest FFT in the West) library for computing the FFT using fast algorithms. Moreover, extensions were later added to the plotting code allow Pong to be played using brain waves, along with a P300 ERP detector. A data logging feature was added to allow us to record our EEG data while asleep to a file. The SDL library is used to collect user input from the keyboard and output the OpenGL graphics buffer to an on-screen window.</p><br>
            
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/glplot.png"><br><br><strong>Figure: Calibration Signal Plotted within OpenGL</strong></p>
            <br>
            
            <h4>Initialization and Event Loop</h4>
            <p>The <tt>main()</tt> function initializes the SDL library, clears the ADC buffers, initializes OpenGL, initializes SDL TTF (for True Type font rendering), opens the serial port, opens the log file, and initializes the FFTW library. From there, the program enters the main event loop, an infinite <tt>while</tt> loop which checks for and handles key presses, along with drawing the screen via OpenGL.</p>
            <p>The <tt>Quit()</tt> function cleans up SDL, closes the serial port, de-initializes FFTW frees the font, and quits the program using the <tt>exit</tt> UNIX system call.</p>
            
            <p>The <tt>resizeWindow()</tt> function changes the window size of the screen by changing the viewport dimensions and the projection matrix. For this project, we use an orthographic projection with ranges <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-54-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-502"><span style="display: inline-block; position: relative; width: 6.667em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.542em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-503"><span class="mi" id="MathJax-Span-504" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-505" style="font-family: MathJax_Main; padding-left: 0.278em;">∈</span><span class="mo" id="MathJax-Span-506" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mn" id="MathJax-Span-507" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-508" style="font-family: MathJax_Main;">,</span><span class="texatom" id="MathJax-Span-509" style="padding-left: 0.167em;"><span class="mrow" id="MathJax-Span-510"><span class="mi" id="MathJax-Span-511" style="font-family: MathJax_Main;">X</span><span class="mi" id="MathJax-Span-512" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-513" style="font-family: MathJax_Main;">S</span><span class="mi" id="MathJax-Span-514" style="font-family: MathJax_Main;">I</span><span class="mi" id="MathJax-Span-515" style="font-family: MathJax_Main;">Z</span><span class="mi" id="MathJax-Span-516" style="font-family: MathJax_Main;">E</span></span></span><span class="mo" id="MathJax-Span-517" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-54">x \in [0, \mathrm{X\_SIZE}]</script> and <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-55-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-518"><span style="display: inline-block; position: relative; width: 12.628em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.556em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-519"><span class="mi" id="MathJax-Span-520" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-521" style="font-family: MathJax_Main; padding-left: 0.278em;">∈</span><span class="mo" id="MathJax-Span-522" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mn" id="MathJax-Span-523" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-524" style="font-family: MathJax_Main;">,</span><span class="texatom" id="MathJax-Span-525" style="padding-left: 0.167em;"><span class="mrow" id="MathJax-Span-526"><span class="mi" id="MathJax-Span-527" style="font-family: MathJax_Main;">A</span><span class="mi" id="MathJax-Span-528" style="font-family: MathJax_Main;">D</span><span class="mi" id="MathJax-Span-529" style="font-family: MathJax_Main;">C</span><span class="mi" id="MathJax-Span-530" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-531" style="font-family: MathJax_Main;">R</span><span class="mi" id="MathJax-Span-532" style="font-family: MathJax_Main;">E</span><span class="mi" id="MathJax-Span-533" style="font-family: MathJax_Main;">S</span><span class="mi" id="MathJax-Span-534" style="font-family: MathJax_Main;">O</span><span class="mi" id="MathJax-Span-535" style="font-family: MathJax_Main;">L</span><span class="mi" id="MathJax-Span-536" style="font-family: MathJax_Main;">U</span><span class="mi" id="MathJax-Span-537" style="font-family: MathJax_Main;">T</span><span class="mi" id="MathJax-Span-538" style="font-family: MathJax_Main;">I</span><span class="mi" id="MathJax-Span-539" style="font-family: MathJax_Main;">O</span><span class="mi" id="MathJax-Span-540" style="font-family: MathJax_Main;">N</span></span></span><span class="mo" id="MathJax-Span-541" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-55">y \in [0, \mathrm{ADC\_RESOLUTION}]</script>. The <tt>handleKeyPress()</tt> function intercepts key presses to quit the game (via the [ESCAPE] key) and to toggle full screen mode (using the [F1] key).</p>
            
            <p>The <tt>initGL()</tt> function initializes OpenGL by setting the shading model, the clear color and depth, and the depth buffer.</p><br>
            
            <h4>Drawing Code</h4>
            <p>The <tt>drawGLScene()</tt> function is called once per frame to update the screen. It clears the screen, sets the model view matrix to the identity matrix <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-56-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-542"><span style="display: inline-block; position: relative; width: 0.908em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.125em, 1000em, 4.342em, -0.551em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-543"><span class="msubsup" id="MathJax-Span-544"><span style="display: inline-block; position: relative; width: 0.908em; height: 0px;"><span style="position: absolute; clip: rect(1.599em, 1000em, 2.667em, -0.551em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-545" style="font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.449em;"><span class="mn" id="MathJax-Span-546" style="font-size: 70.7%; font-family: MathJax_Main;">4</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.153em; vertical-align: -0.257em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-56">I_4</script>, shifts the oscilloscope buffer <tt>running_buffer</tt> to the left by one, and fills the new spot in the buffer with the newest sample from the serial port. This sample is obtained by calling the <tt>readSerialValue()</tt> function in <tt>serial.cpp</tt>. This function also contains logic to perform the FFT and draw it onto the screen as well. The sample is sent to the P300 module and logged to the output file. Moreover, the power spectrum of the FFT is computed using <tt>rfftw_one()</tt> and by squaring the frequency amplitudes.</p>
            
            <p>The FFT bars and the oscilloscope points are plotted using <tt>GL_LINES</tt> and <tt>GL_POINTS</tt> respectively. Moreover, lines join adjacent oscilloscope points. The frequency ranges corresponding to each brain wave classification (alpha, beta, etc.) are calculated, along with their relative powers. Moreover, BCI code is executed which will be discussed in the <strong>OpenGL Pong</strong> sub-section of this report. The pong and P300 modules are then drawn on the screen, along with status text using TTF fonts and the framebuffer is swapped. Lastly, the frame rate is calculated using <tt>SDL_GetTicks()</tt>, an SDL library function.</p>
            
            <br>
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/eeg.png"><br><br><strong>Figure: Actual EEG Signal Plotted within OpenGL</strong></p>
            <br>
            
            <h4>Serial Code</h4>
            <p>The serial code handles serial communications over USB and is located in <tt>serial.cpp</tt>. Important parameters such as the buffer size <tt>BAUD_RATE</tt>, the port name <tt>PORT_NAME</tt>, and the baud rate <tt>B57600</tt> are stored as pre-processor directives. The <tt>openSerial()</tt> function opens the serial port and sets the baud rate to 57600 (56k). The <tt>readSerialValue()</tt> function reads and parses one 10-bit ASCII ADC value from the serial port by scanning for a new-line terminator and using <tt>sscanf</tt> (<tt>readByte()</tt> is unused). Lastly, the <tt>closeSerial()</tt> function closes the serial port device. The UNIX system calls <tt>open</tt>, <tt>read</tt>, and <tt>close</tt> are used to carry out serial I/O, along with the GNU C library's <tt>system()</tt> function. The device file name for USB serial in UNIX is <tt>/dev/ttyUSB0</tt>.</p>
            <p>Note that if the <tt>NULL_SERIAL</tt> pre-processor directive is set, then mock serial data is used rather than actually collecting data from the serial device. This functionality is useful for testing purposes.</p><br>
            
            <h4>Configuration</h4>
            <p>The <tt>config.h</tt> file contains pre-processor directives that can be used to configure the OpenGL plotting application during compile-time. Important parameters include the screen width and height (<tt>SCREEN_WIDTH</tt> and <tt>SCREEN_HEIGHT</tt> respectively), the screen bit depth (<tt>SCREEN_BPP</tt>), <tt>ADC_RESOLUTION</tt> the ADC resolution (the number of y-values) set to <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-57-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-547"><span style="display: inline-block; position: relative; width: 4.551em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.675em, 1000em, 2.945em, -0.527em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-548"><span class="msubsup" id="MathJax-Span-549"><span style="display: inline-block; position: relative; width: 1.293em; height: 0px;"><span style="position: absolute; clip: rect(1.872em, 1000em, 2.923em, -0.527em); top: -2.731em; left: 0em;"><span class="mn" id="MathJax-Span-550" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span><span style="position: absolute; top: -2.675em; left: 0.513em;"><span class="texatom" id="MathJax-Span-551"><span class="mrow" id="MathJax-Span-552"><span class="mn" id="MathJax-Span-553" style="font-size: 70.7%; font-family: MathJax_Main;">10</span></span></span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span><span class="mo" id="MathJax-Span-554" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mn" id="MathJax-Span-555" style="font-family: MathJax_Main; padding-left: 0.278em;">1024</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.217em; vertical-align: -0.103em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-57">2^{10}=1024</script>, and the log file name <tt>LOG_FILENAME</tt> (defaulting to <tt>"eeg_log.csv"</tt>).</p><br>
            
            <h4>Debugging</h4>
            <p>Useful utility functions for debugging purposes are found in <tt>debug.cpp</tt>. The <tt>FileExists()</tt> function returns a boolean indicating whether the given file exists. The <tt>OpenLog()</tt> and <tt>CloseLog()</tt> functions are useful for writing log files with time and date stamps. The <tt>log_out()</tt> function can be passed a format string which is written to the log file, along with a time stamp. The <tt>format()</tt> function takes a format string and returns the formatted result. It uses the <tt>vformat</tt> utility function to generate the format string based on the arguments passed to the function. The <tt>dump()</tt> function dumps regions of memory to the screen in a human-friendly hexadecimal format.</p><br>
            
            <h4>Font Rendering</h4>
            <p>TTF font rendering support was implemented using NeHe sample code (located in the <strong>References</strong> section of this report). The <tt>glBegin2D()</tt> and <tt>glEnd2D()</tt> functions set up an orthographic screen projection for font rendering. Meanwhile, <tt>power_of_two()</tt> is a utility function that calculates the next largest power-of-two of the given integer input (useful for computing OpenGL texture dimensions which must be powers of two). The <tt>SDL_GL_LoadTexture()</tt> function converts an <tt>SDL_Surface</tt> structure in memory to an OpenGL texture object. This is useful because the <tt>SDL_TTF</tt> library only returns an <tt>SDL_Surface</tt>, but we are rendering the fonts using OpenGL. The <tt>InitFont()</tt> and <tt>FreeFont()</tt> functions use the SDL_TTF library functions to load and free fonts respectively. Lastly, <tt>glPrint()</tt> acts like an OpenGL implementation of <tt>printf</tt> by printing strings to the screen using TTF font textures in SDL_TTF.</p><br>
            
            <h3>OpenGL Pong</h3><br>
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/pong_waves.png"><br><br><strong>Figure: Screenshot of OpenGL Pong game</strong></p><br>
            
            <p>The Pong game logic and drawing code is located in the <tt>pong.cpp</tt> source file. Moreover, a set of constant "glyphs" is located in the <tt>glyphs.h</tt> header file. These glyphs are 2D arrays of boolean values corresponding to pixel on and pixel off for each scoreboard number that is displayed on the screen. The blocky font used for each glyph lends a retro syling to the game (which suits the Pong aesthetics much more than the TTF font renderer would).</p><br>
            
            <h4>Pong Game Logic</h4>
            <p>The game logic defines several variables including the paddle width and height (stored in <tt>PADDLE_WIDTH</tt> and <tt>PADDLE_HEIGHT</tt> respectively), the positions of both paddles, the <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-58-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-556"><span style="display: inline-block; position: relative; width: 0.577em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.678em, -0.542em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-557"><span class="mi" id="MathJax-Span-558" style="font-family: MathJax_Math; font-style: italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.697em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-58">x</script> and <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-59-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-559"><span style="display: inline-block; position: relative; width: 0.513em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.872em, -0.556em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-560"><span class="mi" id="MathJax-Span-561" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.93em; vertical-align: -0.323em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-59">y</script> positions and velocities of the ball (<tt>ballposx</tt>, <tt>ballposy</tt>, <tt>ballvelx</tt>, <tt>ballvely</tt>). The <tt>sprite[]</tt> array includes a boolean bitmap storing the ball sprite.</p>
            
            <p>The <tt>updateball()</tt> function performances rudimentary numerical integration to get the new ball position by addition. Bounds checks is performed and the ball velocity is negated to reflect the ball direction if the ball collides with the screen edges. Collision detection is performed with both paddles for all four sides also using bounds checking. Moreover, the ball's velocity is reflected and its speed is increased slightly by the constant value stored in <tt>vel_threshold</tt> upon colliding. Lastly, if the ball collides with the left or right side of the screen, the appropriate player's score variable (<tt>score1</tt> or <tt>score2</tt>) is incremented depending on which side the ball collides on. The <tt>ResetVelocity()</tt> function is invoked to reset the ball's speed back to the initial speed.</p>
            
            <p>The <tt>pongInit()</tt> function determines a random direction of the pong ball for the initial "face off" by calling a utility function <tt>randomNum()</tt> which generates a random integer in the set <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-60-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-562"><span style="display: inline-block; position: relative; width: 1.41em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.872em, 1000em, 3.117em, -0.538em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-563"><span class="texatom" id="MathJax-Span-564"><span class="mrow" id="MathJax-Span-565"><span class="mn" id="MathJax-Span-566" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-567" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-568" style="font-family: MathJax_Main; padding-left: 0.167em;">1</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.186em; vertical-align: -0.31em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-60">{0, 1}</script>. The <tt>pongHandleKeyDown</tt> and <tt>pongHandleKeyUp</tt> update the game state based on keyboard presses and depresses. The [UP] key moves the right paddle up, and the [DOWN] key moves the right paddle down. The left paddle is controlled by the user's brain waves. The <tt>updatepaddle1()</tt> and <tt>updatepaddle2()</tt> functions perform numerical integration using addition to update the paddle <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-61-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-569"><span style="display: inline-block; position: relative; width: 0.513em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.872em, -0.556em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-570"><span class="mi" id="MathJax-Span-571" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.93em; vertical-align: -0.323em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-61">y</script> velocities (<tt>paddle1yvel</tt> and <tt>paddle2yvel</tt> respectively).</p>
            
            <h4>Pong Game Drawing Code</h4>
            <p>The <tt>pongUpdateAndRender()</tt> function is invoked from the OpenGL plotter drawing code. It invokes all of the updating functions (<tt>updateball()</tt>, <tt>updatepaddle1()</tt>, <tt>updatepaddle2()</tt>) and all of the drawing functions (<tt>drawsprite()</tt>, <tt>drawpaddlesprite()</tt>, <tt>drawscore()</tt>, and <tt>drawline()</tt>). The <tt>drawscore()</tt> function draws both score glyphs onto the screen at the proper positions by invoking <tt>drawglyph()</tt>. The <tt>drawglyph()</tt> function takes an integer number, an <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-62-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-572"><span style="display: inline-block; position: relative; width: 0.577em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.678em, -0.542em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-573"><span class="mi" id="MathJax-Span-574" style="font-family: MathJax_Math; font-style: italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.697em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-62">x</script> and <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-63-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-575"><span style="display: inline-block; position: relative; width: 0.513em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.872em, -0.556em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-576"><span class="mi" id="MathJax-Span-577" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.93em; vertical-align: -0.323em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-63">y</script> position, and an <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-64-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-578"><span style="display: inline-block; position: relative; width: 2.949em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.483em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-579"><span class="mo" id="MathJax-Span-580" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-581" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mo" id="MathJax-Span-582" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-583" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-584" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-585" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">b</span><span class="mo" id="MathJax-Span-586" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-64">(r,g,b)</script> floating point color value. It uses <tt>GL_POINTS</tt> to draw each pixel of the glyph onto the screen. The <tt>drawsprite()</tt> function takes an <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-65-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-587"><span style="display: inline-block; position: relative; width: 2.244em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.483em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-588"><span class="mo" id="MathJax-Span-589" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-590" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-591" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-592" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-593" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-65">(x,y)</script> position and an <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-66-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-594"><span style="display: inline-block; position: relative; width: 2.949em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.483em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-595"><span class="mo" id="MathJax-Span-596" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-597" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mo" id="MathJax-Span-598" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-599" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-600" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-601" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">b</span><span class="mo" id="MathJax-Span-602" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-66">(r,g,b)</script> color and draws the ball sprite at that location. The <tt>drawline()</tt> function draws a striped line with spacing defined by <tt>LINE_SPACING</tt> across the center of the screen depicting the center of the field. Finally, the <tt>drawpaddlesprite()</tt> function takes an <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-67-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-603"><span style="display: inline-block; position: relative; width: 2.244em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.483em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-604"><span class="mo" id="MathJax-Span-605" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-606" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-607" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-608" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-609" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-67">(x,y)</script> position and an <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-68-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-610"><span style="display: inline-block; position: relative; width: 2.949em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.483em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-611"><span class="mo" id="MathJax-Span-612" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-613" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mo" id="MathJax-Span-614" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-615" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-616" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-617" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">b</span><span class="mo" id="MathJax-Span-618" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-68">(r,g,b)</script> color and draws the rectangular paddle sprite using <tt>GL_POINTS</tt>.</p>
            
            <br>
            <h4>Pong Brain Wave Control and Brain-Computer Interface (BCI) Code</h4>
            <p>The most important part of the Pong software is the code snippet in <tt>main.cpp</tt> that updates the left paddle velocity based on the user's brain waves. We provide two modes of control. The first, alpha rhythm (8-13 Hz) modulation, provides proportional control based on the user's alpha waves. The EEG electrodes are placed on the user's forehead (near frontal lobes) during alpha rhythm measurement. The user concentrates to move the paddle down and relaxes to move the paddle up.</p>
            
            <p>The other method of control is based on mu rhythm (8-13 Hz) suppression. The user imagines moving their feet up and down (or actually moves them) to move the paddle, and if mu suppression reaches a threshold, then the paddle moves down; otherwise, it moves up. The user places the electrodes on the top of the scalp near the sensorimotor cortex (10-20 locations <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-69-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-619"><span style="display: inline-block; position: relative; width: 1.184em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.103em, 1000em, 4.358em, -0.527em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-620"><span class="msubsup" id="MathJax-Span-621"><span style="display: inline-block; position: relative; width: 1.184em; height: 0px;"><span style="position: absolute; clip: rect(1.577em, 1000em, 2.689em, -0.527em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-622" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.724em;"><span class="mn" id="MathJax-Span-623" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.199em; vertical-align: -0.276em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-69">C_3</script> and <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-70-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-624"><span style="display: inline-block; position: relative; width: 1.184em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.103em, 1000em, 4.342em, -0.527em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-625"><span class="msubsup" id="MathJax-Span-626"><span style="display: inline-block; position: relative; width: 1.184em; height: 0px;"><span style="position: absolute; clip: rect(1.577em, 1000em, 2.689em, -0.527em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-627" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.724em;"><span class="mn" id="MathJax-Span-628" style="font-size: 70.7%; font-family: MathJax_Main;">4</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.18em; vertical-align: -0.257em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-70">C_4</script>) during mu suppression measurement. Although both methods worked equally well, we found during user testing that users preferred the alpha modulation control method over the mu rhythm suppression method.</p>
            
            <br>
            <h5>Alpha Rhythm Modulation</h5>
            <p>The alpha rhythm modulation control is determined by two boundary variables <tt>ALPHA_MIN</tt> and <tt>ALPHA_MAX</tt>. The paddle's <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-71-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-629"><span style="display: inline-block; position: relative; width: 0.513em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.872em, -0.556em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-630"><span class="mi" id="MathJax-Span-631" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.93em; vertical-align: -0.323em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-71">y</script> position <tt>posy</tt> is proportional to the alpha rhythm's relative power spectrum's value within this range <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-72-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-632"><span style="display: inline-block; position: relative; width: 13.526em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.459em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-633"><span class="mo" id="MathJax-Span-634" style="font-family: MathJax_Main;">[</span><span class="texatom" id="MathJax-Span-635"><span class="mrow" id="MathJax-Span-636"><span class="mi" id="MathJax-Span-637" style="font-family: MathJax_Main;">A</span><span class="mi" id="MathJax-Span-638" style="font-family: MathJax_Main;">L</span><span class="mi" id="MathJax-Span-639" style="font-family: MathJax_Main;">P</span><span class="mi" id="MathJax-Span-640" style="font-family: MathJax_Main;">H</span><span class="mi" id="MathJax-Span-641" style="font-family: MathJax_Main;">A</span><span class="mi" id="MathJax-Span-642" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-643" style="font-family: MathJax_Main;">M</span><span class="mi" id="MathJax-Span-644" style="font-family: MathJax_Main;">I</span><span class="mi" id="MathJax-Span-645" style="font-family: MathJax_Main;">N</span></span></span><span class="mo" id="MathJax-Span-646" style="font-family: MathJax_Main;">,</span><span class="texatom" id="MathJax-Span-647" style="padding-left: 0.167em;"><span class="mrow" id="MathJax-Span-648"><span class="mi" id="MathJax-Span-649" style="font-family: MathJax_Main;">A</span><span class="mi" id="MathJax-Span-650" style="font-family: MathJax_Main;">L</span><span class="mi" id="MathJax-Span-651" style="font-family: MathJax_Main;">P</span><span class="mi" id="MathJax-Span-652" style="font-family: MathJax_Main;">H</span><span class="mi" id="MathJax-Span-653" style="font-family: MathJax_Main;">A</span><span class="mi" id="MathJax-Span-654" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-655" style="font-family: MathJax_Main;">M</span><span class="mi" id="MathJax-Span-656" style="font-family: MathJax_Main;">A</span><span class="mi" id="MathJax-Span-657" style="font-family: MathJax_Main;">X</span></span></span><span class="mo" id="MathJax-Span-658" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-72">[\mathrm{ALPHA\_MIN}, \mathrm{ALPHA\_MAX}]</script>. From our testing, we found that values of <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-73-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-659"><span style="display: inline-block; position: relative; width: 1.795em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.872em, 1000em, 2.945em, -0.538em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-660"><span class="mn" id="MathJax-Span-661" style="font-family: MathJax_Main;">0.01</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.979em; vertical-align: -0.103em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-73">0.01</script> and <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-74-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-662"><span style="display: inline-block; position: relative; width: 1.795em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.861em, 1000em, 2.945em, -0.538em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-663"><span class="mn" id="MathJax-Span-664" style="font-family: MathJax_Main;">0.04</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.993em; vertical-align: -0.103em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-74">0.04</script> worked best for <tt>ALPHA_MIN</tt> and <tt>ALPHA_MAX</tt> respectively. Users were able to control the paddle position quite accurately after some practice.</p>
            
            <br>
            <h5>Mu Rhythm Suppression</h5>
            <p>The mu rhythm supression control is determined by one threshold value <tt>MU_THRESHOLD</tt>. The paddle's <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-75-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-665"><span style="display: inline-block; position: relative; width: 0.513em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.84em, 1000em, 2.872em, -0.556em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-666"><span class="mi" id="MathJax-Span-667" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.93em; vertical-align: -0.323em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-75">y</script> velocity <tt>paddle1yvel</tt> is set to a value of <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-76-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-668"><span style="display: inline-block; position: relative; width: 1.282em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.872em, 1000em, 2.945em, -0.538em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-669"><span class="mn" id="MathJax-Span-670" style="font-family: MathJax_Main;">0.1</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.979em; vertical-align: -0.103em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-76">0.1</script> if the mu rhythm's relative power spectrum is below <tt>MU_THRESHOLD</tt> (indicating mu <em>suppression</em>, or movement visualization in the user). The <tt>paddle1yvel</tt> is set to <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-77-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-671"><span style="display: inline-block; position: relative; width: 2.051em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.872em, 1000em, 2.945em, -0.493em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-672"><span class="mo" id="MathJax-Span-673" style="font-family: MathJax_Main;">−</span><span class="mn" id="MathJax-Span-674" style="font-family: MathJax_Main;">0.1</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.979em; vertical-align: -0.103em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-77">-0.1</script> if the mu rhythm's relative power spectrum exceeds or matches <tt>MU_THRESHOLD</tt>. Users were also able to use this method of control albeit less successfully due to the weaker signal received from placing the saline electrodes on the user's hair rather than their forehead. Nevertheless, mu rhythm suppression was also a viable control scheme.</p>

            <br>
            <h5>Neurofeedback and Cursor Control</h5>
            <p>The alpha modulatiom and mu supression control schemes have diverse applications beyond simply playing the game Pong in brain-computer interfaces. Wheelchair and cursor control (both 1D and 2D) have been accomplished by mu rhythm suppression. In one instance, users controlled a cursor in 2D by imagining clenching either their left hand, their right hand, or moving their feet. This control scheme requires three channels measure three locations of the sensorimotor cortex near the top of the scalp: user's left side (<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-78-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-675"><span style="display: inline-block; position: relative; width: 1.184em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.103em, 1000em, 4.358em, -0.527em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-676"><span class="msubsup" id="MathJax-Span-677"><span style="display: inline-block; position: relative; width: 1.184em; height: 0px;"><span style="position: absolute; clip: rect(1.577em, 1000em, 2.689em, -0.527em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-678" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.724em;"><span class="mn" id="MathJax-Span-679" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.199em; vertical-align: -0.276em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-78">C_3</script>), center (<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-79-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-680"><span style="display: inline-block; position: relative; width: 1.12em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.103em, 1000em, 4.35em, -0.527em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-681"><span class="msubsup" id="MathJax-Span-682"><span style="display: inline-block; position: relative; width: 1.12em; height: 0px;"><span style="position: absolute; clip: rect(1.577em, 1000em, 2.689em, -0.527em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-683" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.068em; left: 0.724em;"><span class="mi" id="MathJax-Span-684" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span style="display: inline-block; width: 0px; height: 2.218em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.189em; vertical-align: -0.266em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-79">C_z</script>), and user's right side (<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-80-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-685"><span style="display: inline-block; position: relative; width: 1.184em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(3.103em, 1000em, 4.342em, -0.527em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-686"><span class="msubsup" id="MathJax-Span-687"><span style="display: inline-block; position: relative; width: 1.184em; height: 0px;"><span style="position: absolute; clip: rect(1.577em, 1000em, 2.689em, -0.527em); top: -2.474em; left: 0em;"><span class="mi" id="MathJax-Span-688" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span><span style="position: absolute; top: -2.132em; left: 0.724em;"><span class="mn" id="MathJax-Span-689" style="font-size: 70.7%; font-family: MathJax_Main;">4</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.18em; vertical-align: -0.257em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-80">C_4</script>). Even though we had one channel, we could easily extend this to support 2D cursor control, along with detecting eye blinking artifacts for "clicking" the mouse. One could imagine applying this technology to allow users with special needs to control computer mouse movement.</p>
            <p>The other application is in the field of neurofeedback. Neurofeedback creates a feedback loop for users attempting to meditate or treat ADHD disorder. The user visually sees or audibly hears the power of their alpha waves and is able to manipulate their alpha intensity. This neurofeedback has applications in the military and aircraft control as well, as users can be trained to focus and are alerted if they lose concentration. The Pong game can be viewed as a neurofeedback device since the user's concentration level is visually depicted on the screen as the position of the left paddle. Thus, the Brain-Computer Interface component of this project has diverse applications that go far beyond playing a simple computer game with one's brain waves.</p>
            
            <br>
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/eeg_pong.png"><br><br><strong>Figure: Photograph of User Interaction with OpenGL Pong game</strong></p>

            <h3>P300 Detector</h3>
            <p>The P300 detection code was an attempt to detect which color a user is thinking of from a discrete set of randomly flashed colors displayed on the screen. The software used machine learning algorithms for support vector machines (SVMs) provided by the libSVM C library. This attempt was not successful. In a training set of 50 trials, we were unable to obtain classification accuracy beyond 64%. Nonetheless, we document our code here and provide some suggestions for improvements and future work.</p>
            <p>The P300 code uses a finite state machine (FSM) to display colors randomly on the screen in either a training mode or a testing mode. The colors are chosen randomly from the set {red, green, blue, yellow, purple}, and after each color in the set has been displayed exactly once, a trial is considered to have been completed. Five trials are performed during both testing and training, and the recorded brain waves are averaged. The idea is to attempt to classify one-second sets of brain data as either containing a P300 potential (target) or not (non-target) using the SVM. The target set corresponds with the color that the user is thinking of. While the colors are flashed on the computer screen, the user is instructed to count the number of times the target appears.</p>

            <br>
            <h4>Code Structure</h4>
            <p>The code contains pre-processor definitions (<tt>TRAINING_DATA_FILENAME</tt> and <tt>TESTING_DATA_FILENAME</tt>) for the data file names, along with configuration variables for the number of colors <tt>NUM_COLORS</tt>, the number of trials (<tt>NUM_TRIALS</tt>), and the buffer size (<tt>BUFFER_SIZE</tt>).</p>
            <p>The <tt>color_choices</tt> array contains <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-81-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-690"><span style="display: inline-block; position: relative; width: 2.949em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.483em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-691"><span class="mo" id="MathJax-Span-692" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-693" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mo" id="MathJax-Span-694" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-695" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-696" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-697" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">b</span><span class="mo" id="MathJax-Span-698" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-81">(r,g,b)</script> floating-point tuples for each of the <tt>NUM_COLORS</tt> colors. The <tt>color_names</tt> array contains the human-readable names of each color (for text display). The <tt>trialBuffer</tt> is a 3D array indexed by trial number, color index, and buffer position containing the EEG waves recorded for each color and each trial. Moreover, <tt>targetBuffer</tt> and <tt>nonTargetBuffer</tt> contain the averaged target and non-target EEG waves respectively in training mode (to provide an additional target and non-target training instance to the SVM). Meanwhile, <tt>testBuffers</tt> is a 2D array of EEG wave buffers for each color used during testing mode (to test each color individually using the SVM).</p>
            <p>State variables include <tt>current_color</tt>, the current color being displayed, and <tt>trainingTarget</tt>, the randomly-selected target color to be "chosen" by the user during training mode. The <tt>bufferPtr</tt> variable contains an index into the current <tt>trialBuffer</tt>. It gets incremented as additional samples are received from the serial port. The <tt>current_trial</tt> variable contains the index corresponding to the current color trial <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-82-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-699"><span style="display: inline-block; position: relative; width: 9.167em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.493em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-700"><span class="mo" id="MathJax-Span-701" style="font-family: MathJax_Main;">∈</span><span class="mo" id="MathJax-Span-702" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mn" id="MathJax-Span-703" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-704" style="font-family: MathJax_Main;">,</span><span class="texatom" id="MathJax-Span-705" style="padding-left: 0.167em;"><span class="mrow" id="MathJax-Span-706"><span class="mi" id="MathJax-Span-707" style="font-family: MathJax_Main;">N</span><span class="mi" id="MathJax-Span-708" style="font-family: MathJax_Main;">U</span><span class="mi" id="MathJax-Span-709" style="font-family: MathJax_Main;">M</span><span class="mi" id="MathJax-Span-710" style="font-family: MathJax_Main;">_</span><span class="mi" id="MathJax-Span-711" style="font-family: MathJax_Main;">T</span><span class="mi" id="MathJax-Span-712" style="font-family: MathJax_Main;">R</span><span class="mi" id="MathJax-Span-713" style="font-family: MathJax_Main;">I</span><span class="mi" id="MathJax-Span-714" style="font-family: MathJax_Main;">A</span><span class="mi" id="MathJax-Span-715" style="font-family: MathJax_Main;">L</span><span class="mi" id="MathJax-Span-716" style="font-family: MathJax_Main;">S</span></span></span><span class="mo" id="MathJax-Span-717" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-82">\in [0, \mathrm{NUM\_TRIALS})</script>. The <tt>color_histogram</tt> variable contains an array of booleans signifying whether color <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-83-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-718"><span style="display: inline-block; position: relative; width: 0.321em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.621em, 1000em, 2.678em, -0.556em); top: -2.474em; left: 0em;"><span class="mrow" id="MathJax-Span-719"><span class="mi" id="MathJax-Span-720" style="font-family: MathJax_Math; font-style: italic;">i</span></span><span style="display: inline-block; width: 0px; height: 2.474em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.96em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-83">i</script> has been displayed in the current trial yet or not.</p>
            <p>The <tt>p300init()</tt> function initializes the P300 module by clearing the histograms and the buffers. It initially sets the training target and calls a placeholder function to train the SVM. For our purposes, we used libSVM's provided scripts to process the data, rather than directly integrating it within our code. This worked because our code merely generates data that can be used by libSVM offline for training and testing the support vector machine. The data files are updated whenever a new training or testing instance is provided, and then they can be used later by the user with libSVM.</p>
            <p>The <tt>p300AddSample()</tt> function adds a new sample collected from the serial port to the current trial buffer. If the buffer has been filled, it starts a new trial, and if the last trial has finished, then the state is reset to the initial state. The background color is reset to black, and <tt>p300_state</tt> is set to <tt>P300_READY</tt>).</p>
            <p>In both training and testing mode, the <tt>p300StartTrial()</tt> function is used to start a new trial. If the <tt>clear</tt> parameter is set, then this trial is considered to be the first trial, and state variables are reset accordingly. Otherwise, we check if all colors have been displayed. If they have been, then we increment <tt>current_trial</tt> and clear the histogram. We then choose the next random color and set its value in the histogram to <tt>true</tt>. Lastly, we update the OpenGL screen clear color to set the background color to the new randomly-chosen color.</p>
            
            <br>
			<h5>User Interaction Code</h5>
			<p>The <tt>p300UpdateAndRender()</tt> function updates the screen to contain status text corresponding to the state of the P300 FSM (ready, training, testing mode), along with the training target. The SDL_ttf library functions from <tt>font.cpp</tt> are used to render the text onto the screen using OpenGL.</p>
			<p>The <tt>p300HandleKeyDown()</tt> function checks for key presses and handles them accordingly. If the [F2] key is pressed, then the P300 FSM is switched to "training mode." If the [F3] key is pressed, then the P300 FSM is switched to "testing mode." Note that if a trial is already running, then nothing happens.</p>
            
            <br>
            <h5>SVM Training Code</h5>
            <p>The <tt>p300setTrainingTarget()</tt> function sets the next training target of the training session. Initially, we randomly chose a color. However, we found that user fatigue is greater if the color changes during training, so we instead fixed the color index to correspond with the yellow color for all training sessions. Because training instances are only distinguished by their label (i.e. target or non-target), this does not have an effect on the training procedure, other than the fact that it is easier to concentrate on a single color throughout the entire training session rather than a randomly changing color.</p>
            <p>The <tt>p300addTrainingExample()</tt> function constructs a <tt>targetBuffer</tt> and the <tt>nonTargetBuffer</tt> from the <tt>trialBuffer</tt> by averaging the target and non-target buffers. The data is then scaled for improved SVM performance in the range of <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-84-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-721"><span style="display: inline-block; position: relative; width: 3.526em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.788em, 1000em, 3.173em, -0.459em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-722"><span class="mo" id="MathJax-Span-723" style="font-family: MathJax_Main;">[</span><span class="mo" id="MathJax-Span-724" style="font-family: MathJax_Main;">−</span><span class="mn" id="MathJax-Span-725" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-726" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-727" style="font-family: MathJax_Main; padding-left: 0.167em;">+</span><span class="mn" id="MathJax-Span-728" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-729" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.354em; vertical-align: -0.377em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-84">[-1,+1]</script>. Last, the training instance is appended to the <tt>TRAINING_DATA_FILENAME</tt> file using the ASCII format specified in the libSVM README file.</p>

            <br>
            <h5>SVM Testing Code</h5>
            <p>The <tt>p300testandReport()</tt> function clears the testBuffers and stores the average EEG wave for each color throughout all trials from the <tt>trialBuffer</tt> array in each <tt>testBuffer</tt>. Then, the data is written to a testing data file specified by <tt>TESTING_DATA_FILENAME</tt> using the libSVM data format.</p>
            
            <br>
            
            <h3>AVR Firmware</h3>
            <p>The AVR firmware was developed using the Atmel AVR Studio 5 integrated development environment (IDE) software program. The latest stable release of the WinAVR compiler was used, along with the ATAVRISP2 programmer.</p><br>
            <h4>Initialization Code</h4>
            <p>The firmware's C source code initializes the microcontroller ADC to use a <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-85-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-730"><span style="display: inline-block; position: relative; width: 2.051em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.855em, 1000em, 2.945em, -0.494em); top: -2.731em; left: 0em;"><span class="mrow" id="MathJax-Span-731"><span class="mn" id="MathJax-Span-732" style="font-family: MathJax_Main;">1.1</span><span class="mi" id="MathJax-Span-733" style="font-family: MathJax_Math; font-style: italic;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.186em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.731em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1em; vertical-align: -0.103em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-85">1.1 V</script> reference voltage by setting the <tt>REFS1</tt> bit of the <tt>ADMUX</tt> register. Next, the <tt>ADEN</tt> and <tt>ADIE</tt> bits are set in the <tt>ADCSRA</tt> register, enabling the ADC and the ADC interrupt respectively. A prescaler value of 125,000 is used. The LED port <b>Pin D.2</b> and <b>Pin D.3</b> are set to outputs. Next, <b>Timer 0</b> is set to a 1 ms time base by setting a prescaler of 64 and a compare match ISR with an <tt>OCR0A</tt> value of 249 (implying 250 time ticks).</p>
            <p>ADC sleep is enabled by setting the <tt>SM0</tt> bit in the <tt>SMCR</tt> sleep mode control register. The UART is then initialized by calling <tt>uart_init()</tt>, sleep is enabled via <tt>sleep_enable()</tt>, and interrupts are enabled using <tt>sei()</tt>.</p>
            <p>From there, the firmware enters an infinite <tt>while</tt> loop. The CPU is put to sleep via <tt>sleep_cpu()</tt>, which automatically starts an ADC conversion. When the CPU wakes up, the current value of the ADC is sent via UART using <tt>fprintf()</tt>. A delay loop waits for the UART transmission to finish by delaying 1 ms until the <tt>UDRE0</tt> bit is set in the <tt>UCSR0A</tt> register.</p><br>
            <h4>ADC Interrupt Handler</h4>
            <p>The ADC interrupt handler <tt>ADC_vect</tt> reads a 10-bit ADC value by storing the contents of the <tt>ADCL</tt> register inside a temporary variable, then reading <tt>ADCH</tt>, and computing <tt>ADCL+ADCH*256</tt>. Note that the register reads <strong>must</strong> be performed in this order, otherwise the ADC will lock up (see the Mega644 datasheet for details).</p><br>
            <h4>Timer 0 Compare ISR Interrupt Handler</h4>
            <p>The <b>Timer 0</b> compare ISR vector <tt>TIMER0_COMPA_vect</tt> generates a test square wave on <b>Pin D.2</b> and <b>Pin D.3</b>. It executes at a rate of 10 Hz, toggling the values of both pins in the <tt>PORTD</tt> register. Note that this task runs once every 10 ticks because of the 1 ms time base. We later disabled this feature because it was introducing extraneous noise in the EEG signal.</p>
        </div>
      </div>
      <br>

      <a name="results"></a>
      <div class="row">
        <div class="span12">
          <h2>Results</h2>
          <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/eeg_user.jpg"><br><br><strong>Figure: Mengxiang using the EEG Device</strong></p>
          <h3>Speed of Execution</h3>
          <p>The MATLAB serial plotter was not fast enough for real-time; however, the OpenGL plotter runs at 200-400 frames per second (FPS). Code was written in the OpenGL software to measure and output the FPS rate to the terminal console. This benchmark includes running Pong and doing a real-time FFT on the incoming serial data concurrently. The microcontroller samples the ADC at a rate of 200 Hz, and it sends the serial data to the PC over USB/UART at 57,600 (56k) baud.</p>
          <br>
          <h3>Accuracy</h3>
          <p>The ADC code achieves 10-bit accuracy, utilizing ADC sleep to power down the CPU clock in between successive analog voltage measurements in order to reduce clock noise. Accuracy is highly dependent on electrode placement and electrical connection to the user's head. We discuss these measurement accuracy issues further in the <strong>Interference</strong> sub-section. Unfortunately, we were unable to attain acceptable accuracy performing SVM classification of P300 target wave forms, but one-dimensional BCI cursor control in Pong works perfectly for both alpha rhythm modulation (concentrating and relaxing) and mu suppression (visualizing motor movement).</p>
          <br>
          <h3>Safety</h3>
          <p>Because this is a device attached to the user's head, safety was our utmost priority. The microcontroller was only ever powered by four 1.5V AA batteries, rather than through an AC power supply connected to mains. Moreover, serial communication to a PC over USB was isolated from the USB using optocouplers, which we tested extensively using a multimeter to ensure that both ground loops were separated. Only laptops running off of battery power supplies (no AC adapters connected) were ever connected to the microcontroller over USB. As a corollary, the microcontroller was never connected to a user's head while the programmer cable was connected to a PC. We promised that 120 VAC power will never be connected to this project directly or indirectly. As a result, users were never allowed to touch any other electrical devices while wearing the EEG helmet. We took safety very seriously throughout the development of the project.</p>
          <br>
          <h3>Interference</h3>
          <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/noise.png"><br><br><strong>Figure: 60 Hz Noise Corrupting an EEG Signal</strong></p>
          <p>Our device is very susceptible to interference from outside sources. We constructed DIY shielded electrode cables using aluminum foil, but we still encountered problems with 60 Hz power-line noise occasionally. Moreover, when the electrodes do not make sufficient electrical contact with the user's scalp, galvanic voltages show up that corrupt the signal. These galvanic voltages are less of an issue while playing Pong because an additional 50 Hz or 60 Hz frequency band does not affect the relevant frequency content of the signal. However, for time-domain analysis of the P300 ERP, these galvanic voltages can severely degrade the accuracy of this process.</p><br>
          <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/eeg_device.jpg"><br><br><strong>Figure: DIY Shielded Aluminum Foil Electrode Cables</strong></p>
          <p>We also noticed that our 10 Hz calibration test square wave signal was introducing noise into the EEG signal even when it was not connected to the instrumentation amplifier, so we disabled this feature in the firmware. This solution eliminated the noise.</p>
          <br>
          <h3>Usability and Special Needs Considerations</h3>
          <p>This project will have great societal impact because it is specifically designed for users with special needs. Using brain-computer interfaces, users with special needs will be able to interact in computers in ways that were not previously possible merely by using their brain waves. In addition, patients with sleep apnea will be able to collect and analyze their own EEG data while asleep without having to participate in expensive overnight sleep studies at hospitals. They will be able to see their data; rather than being shielded from it by a medical doctor. Because our budget is less than $75, they will be able to do this at a very low cost.</p>
        </div>
      </div>
      <br>
      
      <a name="conclusions"></a>
      <div class="row">
        <div class="span12">
          <h2>Conclusions</h2>
             <h4>Expectations Met</h4>
             <p>When we were initially brainstorming for the project, we wanted a full sleep apnea diagnostic machine. This included not only an EEG, but also heart rate monitor, blood oxgen level monitor, temperature, etc. However, we immediately realized that doing just the EEG was a very challenging task by itself and so decided to focus on only that. When we actually created the proposal for the project, we had many ambitious ideas for what the EEG would do. Some of the ideas were fully implemented such as reading the Alpha Waves for checking how relaxed or focused you are, and the Mu Waves which correspond with thoughts of motion. Some of the ideas were somewhat implemented such as the reading of the P300 signal for identifying color. And some of the ideas were not implemented at all such as mouse cursor movement, due to time constraints and technical limitations such as only having 10-bit resolution and one channel, while most commercial EEGs have much more channels and better resolution. If we were to do this project again, we might add more channels and try to write a better P300 training and prediction program.</p><br>
             <h4>Conformed Standards</h4>
<!-- <b>TODO!!!</b><br /> -->
<p>Although there is not an IEEE Standard for EEG operation, there are medical guidelines for specifications of what the EEG must have. The guidelines can be found at <a href="ftp://ansuk.org/pub/clinical_governance/dig_eeg.pdf">ftp://ansuk.org/pub/clinical_governance/dig_eeg.pdf</a></p>

<dl>
<dt>The first specification is that the EEG must have a minimum of 25 channels, preferably 32.</dt>
<dd>We did not meet this specification because we could not afford that many.</dd>
<br>
<dt>The input impedance also must be greater than 10 mega-ohms.</dt>
<dd>Our AD620 input impedance is 10||2 giga-ohms, which meets the specification.</dd>
<br>
<dt>The Noise must be below 2 microVpp from 0.16 to 100 Hz.</dt>
<dd>We used function generator input and we had noise around 3 microVolt, so we did not meet the specification.</dd>
<br>
<dt>The Common Mode Rejection Ratio must be greater than 80-100 dB.</dt>
<dd>The AD620 Common-Mode Rejection Ratio has a minimum of 110 dB for the gain and the range of frequencies measured, so the specification is met.</dd>
<br>
<dt>The sampling rate must be a minimum of 200 Hz, preferably 250-400 Hz.</dt>
<dd>Ours was 200 Hz, so we did meet this specification.</dd>
<br>
<dt>The dynamic range must be better than 2 microVolts.</dt>
<dd>We calculated our dynamic range to be around 0.7 microVolts, therefore meeting specification.</dd>
<br>
<dt>There must also be low pass filters of 15, 30, 50, 70, 100 Hz, and high pass filters of 0.16, 0.5, 1.6, 5, 10 Hz.</dt>
<dd>We had one low pass filter with 36 Hz, and a high pass filter of 0.13 Hz, therefore not enough filters to meet specification.</dd>
<br>
<dt>A Notch Filter with attenuation ratio 1:20 at 50 and 60 Hz is also required.</dt>
<dd>We did not have a hardware Notch Filter although we implemented one in software on MATLAB.</dd>
<br>
<dt>The electrode impedances must be displayed for each electrode and saved for review and playback.</dt>
<dd>We do not measure and display the electrode impedances so we did not meet this specification.</dd>
<br>
<dt>The ADC resolution must be equal to or greater than 12 bits.</dt>
<dd>Our ADC only has 10 bit accuracy, therefore not meeting this standard.</dd>
<br>
<dt>There must be enough memory storage, at least 1 GB.</dt>
<dd>Our computers have more than that so we meet the specification.</dd>
<br>
<dt>Inputs must be safely isolated and complies with the IEC 601-1/EN 60601-1 Type BF UL 544 Isolated standard.</dt>
<dd>We do not believe we conform to these standards; however, the inputs are isolated.</dd>
<br>
<dt>There must be a color monitor with at least 17" with minimum of 1280 x 1024 resolution.</dt>
<dd>We have a 22" color monitor with 1680 x 1050 resolution.</dd>
<br>
<dt>There must be a printer that prints at paper speed of 1, 2, 5, 10, 15, 30, 60 mm/sec.</dt>
<dd>We do not have such a printer, so we do not meet this specification.</dd>
</dl>

<p>Although we did not meet the majority of these specifications, we did not intend this device for medical use as we are simply students creating a microcontroller project in a month. Therefore, it is difficult if not impossible for us to create a product with the same amount of quality required for medical use.</p><br>
             
             <h4>Intellectual Property Considerations</h4>
<p>We reused some code from the web to help us write the programs needed for analyzing the EEG.</p><p>

</p><p>The following are all public domain and open source therefore free to use and modify as needed. The ADC Sleep code for the microcontroller comes from the ECE 4760 Lab 2 example code by Professor Land. This code was used to increase the resolution of the ADC to 10-bits by putting the microcontroller to sleep and thus reduce noise. UART code, which was used in all the previous labs, is written by Joerg Wunsch. This was used to help debug the hardware by allowing the microcontroller to send messages to the computer using the usb. The code has a beerware license, which requires only that the license header remain on the file when used. When intially developing software for the EEG, we used MATLAB, and one of the first problems we faced was significant 60Hz noise. We looked online and found a MATLAB notch filter program which reduced the noise. When we found out that MATLAB was running too slow for real time, we turned to C instead. For plotting in C, we used OpenGL, which has the open source license. We used the examples from the Neon Helium (NeHe) OpenGL website as guides for creating programs in OpenGL. For writing text on the OpenGL window we used a sprintf program on the flipcode website.</p>

<p>We also used GNU licensed code in our project. The license states that we cannot modify the code, and we most provide the full source code if we distribute our code. As such, the full source code of our project can be found on GitHub at <a href="https://github.com/TheChuckster/EEG_BCI">https://github.com/TheChuckster/EEG_BCI</a></p>

<p>One of the GNU licensed code is FFTW, a Fast Fourier Transform algorithm for C, which allowed as to quickly figure out the frequencies present in our EEG while plotting in OpenGL. Another is the GNU C Library (glibc), which provides the standard libary of functions for using C. The GNU Compiler Collection is the compiler system we used for our C programs. SDL_TTF is another GNU licensed code which was used for displaying truetype font.</p>

<p>We did not reverse engineering any design nor did we sign any non-disclosure agreements for any parts.</p><br>

             <h4>Ethical Considerations</h4>
<p>When we started the project, we understood that we were hooking up electrical devices up to a person's head. If we did not carefully make the device and made some mistakes, the device could potentially harm or even kill a person. Therefore, safety was one of our main concerns when starting the project. Our first objective was to make sure that even if we made some mistake, there was still no way to harm a person. This was done by optoisolating the electrode circuit from the microcontroller, and also providing the microcontroller's power source with AA batteries instead of an outlet. This way, even if we shorted out the circuit somehow, the most voltage the person will receive will be 6V from 4 AA batteries.</p>

<p>When we were making the project and testing out our EEG, we got various signals. Although sometimes we thought the signals we got were actual brain waves, we also understood that we could be wrong. By careful calculations and procedures, we were able to distinguish noise from what could be brain waves. Even then, we were not sure if the signal we got was indeed brain waves, so we also asked a researcher at the Cornell Sleep Lab to verify that indeed we were right.</p><br>
             
             <h4>Legal Considerations</h4><br>
<p><strong><u>NOTE:</u> This project is made by students and not medical professionals, therefore it is not intended for medical use!</strong></p>
<p>We also made a PONG-like game, and the original PONG game was made by Atari. However, we are simply using the game as a demo of our EEG and not for commercial gain, therefore there should be no legal implications for having PONG.</p>
        </div>
      </div>
      <br>
      <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/big_red_bear.jpg"><br><br><strong>Figure: Hard at work inside Phillips ECE Lab</strong></p>
    
      <a name="appendix"></a>           
      <div class="row">
        <div class="span12">
          <h2>Appendix</h2>
           <h3>Sleep Recording</h3><br>
           <p>Because this device was originally intended to diagnose sleep-related disorders, we used to EEG to record Mengxiang taking a nap and discovered several interesting sleep-related waveforms. I took several screenshots of the OpenGL plotting application. Sleep spindles and k-complexes occur during the onset of stage 2 sleep and aid in maintaining muscle memory and sleep-related relaxation (See <a href="http://en.wikipedia.org/wiki/Sleep_spindle">http://en.wikipedia.org/wiki/Sleep_spindle</a>). We also observed theta waves during Stage 1 and Stage 2 sleep (<a href="http://en.wikipedia.org/wiki/Stage_2_sleep">http://en.wikipedia.org/wiki/Stage_2_sleep</a>), and REM sleep (<a href="http://en.wikipedia.org/wiki/REM_sleep">http://en.wikipedia.org/wiki/REM_sleep</a>). I woke Mengxiang up during the observed REM waves on the OpenGL plot, and he confirmed that he was dreaming.</p>
           <p>We included a series of screenshots (the green bars show the Fourier power spectrum):</p><br>
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/sleep_spindle.png"><br><br><strong>Figure: Sleep Spindle</strong></p>
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/kcomplex1.png"><br><br><strong>Figure: K Complex (<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-86-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-734"><span style="display: inline-block; position: relative; width: 0.745em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(2.907em, 1000em, 4.608em, -0.457em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-735"><span class="mfrac" id="MathJax-Span-736" style="padding-left: 0.12em; padding-right: 0.12em;"><span style="display: inline-block; position: relative; width: 0.505em; height: 0px;"><span style="position: absolute; clip: rect(1.619em, 1000em, 2.474em, -0.542em); top: -2.712em; left: 50%; margin-left: -0.192em;"><span class="mn" id="MathJax-Span-737" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span><span style="position: absolute; clip: rect(1.62em, 1000em, 2.49em, -0.547em); top: -1.882em; left: 50%; margin-left: -0.192em;"><span class="mn" id="MathJax-Span-738" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 2.282em;"></span></span><span style="position: absolute; clip: rect(0.808em, 1000em, 1.272em, -0.577em); top: -1.3em; left: 0em;"><span style="border-left: 0.505em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0em;"></span><span style="display: inline-block; width: 0px; height: 1.08em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.734em; vertical-align: -0.576em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-86">\frac{2}{3}</script> of the way to the right)</strong></p>
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/kcomplex3.png"><br><br><strong>Figure: Another K Complex (near the left, notice the strong deflections in voltage)</strong></p>
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/delta.png"><br><br><strong>Figure: Theta Waves (Lower frequency)</strong></p>
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/rem.png"><br><br><strong>Figure: REM sleep (Higher frequency)</strong></p>
            <h3>Source Code Listings</h3>
            <p>You may find a copy of our source code on Git Hub at <a href="https://github.com/TheChuckster/EEG_BCI">https://github.com/TheChuckster/EEG_BCI</a>.</p><br>
              <h4>AVR Microcontroller Firmware</h4><br>
                 <h5>lab5.c</h5>
                 <pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;inttypes.h&gt;</span></li><li class="L1"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;avr/io.h&gt;</span></li><li class="L2"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;avr/interrupt.h&gt;</span></li><li class="L3"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;avr/sleep.h&gt;</span></li><li class="L4"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdio.h&gt;</span></li><li class="L5"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdlib.h&gt;</span></li><li class="L6"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;util/delay.h&gt;</span></li><li class="L7"><span class="com">#include</span><span class="pln"> </span><span class="str">"uart.h"</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="com">// UART file descriptor</span></li><li class="L0"><span class="com">// putchar and getchar are in uart.c</span></li><li class="L1"><span class="pln">FILE uart_str </span><span class="pun">=</span><span class="pln"> FDEV_SETUP_STREAM</span><span class="pun">(</span><span class="pln">uart_putchar</span><span class="pun">,</span><span class="pln"> uart_getchar</span><span class="pun">,</span><span class="pln"> _FDEV_SETUP_RW</span><span class="pun">);</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="com">// timeout values for each task</span></li><li class="L4"><span class="com">#define</span><span class="pln"> t1 </span><span class="lit">200</span></li><li class="L5"><span class="com">#define</span><span class="pln"> t2 </span><span class="lit">5</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="kwd">volatile</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> time1</span><span class="pun">=</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> time2</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> </span><span class="com">// timeout counter</span></li><li class="L8"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> led</span><span class="pun">;</span><span class="pln"> </span><span class="com">// light states</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="kwd">volatile</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> </span><span class="typ">Ain</span><span class="pun">,</span><span class="pln"> </span><span class="typ">AinLow</span><span class="pun">;</span><span class="pln"> </span><span class="com">// raw A to D number</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">ISR </span><span class="pun">(</span><span class="pln">ADC_vect</span><span class="pun">)</span></li><li class="L3"><span class="pun">{</span></li><li class="L4"><span class="pln">	</span><span class="com">//program ONLY gets here when ADC done flag is set</span></li><li class="L5"><span class="pln">   </span><span class="com">//when reading 10-bit values </span></li><li class="L6"><span class="pln">   </span><span class="com">//you MUST read the low byte first </span></li><li class="L7"><span class="pln">   </span><span class="typ">AinLow</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln">ADCL</span><span class="pun">;</span></li><li class="L8"><span class="pln">   </span><span class="typ">Ain</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln">ADCH</span><span class="pun">*</span><span class="lit">256</span><span class="pun">;</span><span class="pln"> </span></li><li class="L9"><span class="pln">   </span><span class="typ">Ain</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Ain</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="typ">AinLow</span><span class="pun">;</span></li><li class="L0"><span class="pun">}</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="com">// timer 0 compare ISR</span></li><li class="L3"><span class="pln">ISR </span><span class="pun">(</span><span class="pln">TIMER0_COMPA_vect</span><span class="pun">)</span></li><li class="L4"><span class="pun">{</span></li><li class="L5"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">time1 </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln">time1</span><span class="pun">;</span></li><li class="L6"><span class="pln">	</span></li><li class="L7"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">time1 </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></li><li class="L8"><span class="pln">	</span><span class="pun">{</span></li><li class="L9"><span class="pln">		time1 </span><span class="pun">=</span><span class="pln"> t1</span><span class="pun">;</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">		</span><span class="com">// toggle the LED and the square wave test output</span></li><li class="L2"><span class="pln">		led </span><span class="pun">^=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L3"><span class="pln">		PORTD </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">led </span><span class="pun">&lt;&lt;</span><span class="pln"> PORTD2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="pun">(</span><span class="pln">led </span><span class="pun">&lt;&lt;</span><span class="pln"> PORTD3</span><span class="pun">);</span></li><li class="L4"><span class="pln">	</span><span class="pun">}</span></li><li class="L5"><span class="pln">	</span></li><li class="L6"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">time2 </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">--</span><span class="pln">time2</span><span class="pun">;</span></li><li class="L7"><span class="pun">}</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="kwd">int</span><span class="pln"> main</span><span class="pun">()</span></li><li class="L0"><span class="pun">{</span></li><li class="L1"><span class="pln">	</span><span class="com">// init the A to D converter </span></li><li class="L2"><span class="pln">	</span><span class="com">//channel zero/ right adj /ext Aref</span></li><li class="L3"><span class="pln">	</span><span class="com">//!!!DO NOT CONNECT Aref jumper!!!!</span></li><li class="L4"><span class="pln">	ADMUX </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pun">&lt;&lt;</span><span class="pln">REFS1</span><span class="pun">);</span><span class="pln">  </span><span class="com">// 1.1 V ref</span></li><li class="L5"><span class="pln">	</span><span class="com">//enable ADC and set prescaler to 1/127*16MHz=125,000</span></li><li class="L6"><span class="pln">	</span><span class="com">//and set int enable</span></li><li class="L7"><span class="pln">	ADCSRA </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pun">&lt;&lt;</span><span class="pln">ADEN</span><span class="pun">)</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pun">&lt;&lt;</span><span class="pln">ADIE</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">7</span><span class="pln"> </span><span class="pun">;</span><span class="pln"> </span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">	</span><span class="com">// set up the LED port</span></li><li class="L0"><span class="pln">  	DDRD </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> PORTD2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> PORTD3</span><span class="pun">);</span><span class="pln"> </span><span class="com">// PORT D.2 is an ouput</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">  	</span><span class="com">// set up timer 0 for 1 mSec timebase</span></li><li class="L3"><span class="pln">  	TIMSK0 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> OCIE0A</span><span class="pun">;</span><span class="pln"> </span><span class="com">// turn on timer 0 cmp match ISR</span></li><li class="L4"><span class="pln">  	OCR0A </span><span class="pun">=</span><span class="pln"> </span><span class="lit">249</span><span class="pun">;</span><span class="pln"> </span><span class="com">// set the compare register to 250 time ticks</span></li><li class="L5"><span class="pln">  	TCCR0B </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span><span class="pln"> </span><span class="com">// set prescalar to divide by 64</span></li><li class="L6"><span class="pln">  	TCCR0A </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> WGM01</span><span class="pun">;</span><span class="pln"> </span><span class="com">// turn on clear-on-match</span></li><li class="L7"><span class="pln">	  </span></li><li class="L8"><span class="pln">   SMCR </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pun">&lt;&lt;</span><span class="pln">SM0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">;</span><span class="pln"> </span><span class="com">// sleep -- choose ADC mode </span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">  	 	</span></li><li class="L1"><span class="pln">  	</span><span class="com">// set up timer for PWM</span></li><li class="L2"><span class="pln">  	</span><span class="com">//pwm_init();</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">  	led </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0x00</span><span class="pun">;</span><span class="pln"> </span><span class="com">// init the LED status</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">  	time1 </span><span class="pun">=</span><span class="pln"> t1</span><span class="pun">;</span><span class="pln"> </span><span class="com">// init the task timer</span></li><li class="L7"><span class="pln">  	time2 </span><span class="pun">=</span><span class="pln"> t2</span><span class="pun">;</span></li><li class="L8"><span class="pln">   </span></li><li class="L9"><span class="pln">	</span><span class="com">// init the UART -- uart_init() is in uart.c</span></li><li class="L0"><span class="pln">	uart_init</span><span class="pun">();</span></li><li class="L1"><span class="pln">	stdout </span><span class="pun">=</span><span class="pln"> stdin </span><span class="pun">=</span><span class="pln"> stderr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">uart_str</span><span class="pun">;</span></li><li class="L2"><span class="pln">	fprintf</span><span class="pun">(</span><span class="pln">stdout</span><span class="pun">,</span><span class="str">"\n\rStarting ADC ISR demo...\n\r"</span><span class="pun">);</span><span class="pln"> </span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">	</span><span class="com">// Need the next two statments so that the USART finishes</span></li><li class="L5"><span class="pln">	</span><span class="com">// BEFORE the cpu goes to sleep.</span></li><li class="L6"><span class="pln">	</span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(!(</span><span class="pln">UCSR0A </span><span class="pun">&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pun">&lt;&lt;</span><span class="pln">UDRE0</span><span class="pun">)))</span><span class="pln"> </span><span class="pun">;</span><span class="pln"> </span></li><li class="L7"><span class="pln">	_delay_ms</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">	sleep_enable</span><span class="pun">();</span><span class="pln">                             </span></li><li class="L0"><span class="pln">	sei</span><span class="pun">();</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">	</span><span class="com">// measure and display loop</span></li><li class="L3"><span class="pln">	</span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></li><li class="L4"><span class="pln">	</span><span class="pun">{</span></li><li class="L5"><span class="pln">	    sleep_cpu</span><span class="pun">();</span></li><li class="L6"><span class="pln">		fprintf</span><span class="pun">(</span><span class="pln">stdout</span><span class="pun">,</span><span class="pln"> </span><span class="str">"%d\n\r"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Ain</span><span class="pun">);</span></li><li class="L7"><span class="pln">		</span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(!(</span><span class="pln">UCSR0A </span><span class="pun">&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pun">&lt;&lt;</span><span class="pln">UDRE0</span><span class="pun">)))</span><span class="pln"> </span><span class="pun">;</span></li><li class="L8"><span class="pln">		_delay_ms</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">		</span><span class="com">/*if (time2 == 0)</span></li><li class="L1"><span class="com">		{</span></li><li class="L2"><span class="com">			time2 = t2;	</span></li><li class="L3"><span class="com">			fprintf(stdout, "%d\n\r", Ain);</span></li><li class="L4"><span class="com">		}</span></li><li class="L5"><span class="com">		</span></li><li class="L6"><span class="com">		if (ADCSRA &amp; (1&lt;&lt;ADSC)) continue; // skip processing if not ready to do ADC -- now we don't need an interrupt</span></li><li class="L7"><span class="com">&nbsp;</span></li><li class="L8"><span class="com">		AinLow = (int)ADCL;</span></li><li class="L9"><span class="com">		Ain = (int)ADCH*256; </span></li><li class="L0"><span class="com">		Ain = Ain + AinLow;</span></li><li class="L1"><span class="com">			</span></li><li class="L2"><span class="com">		// start another conversion</span></li><li class="L3"><span class="com">		ADCSRA |= (1&lt;&lt;ADSC); */</span></li><li class="L4"><span class="pln">	</span><span class="pun">}</span></li><li class="L5"><span class="pun">}</span></li><li class="L6"><span class="pln">                 </span></li></ol></pre>

                 <h5>uart.c</h5>
                 <pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">/*</span></li><li class="L1"><span class="com"> * ----------------------------------------------------------------------------</span></li><li class="L2"><span class="com"> * "THE BEER-WARE LICENSE" (Revision 42):</span></li><li class="L3"><span class="com"> * &lt;joerg@FreeBSD.ORG&gt; wrote this file.  As long as you retain this notice you</span></li><li class="L4"><span class="com"> * can do whatever you want with this stuff. If we meet some day, and you think</span></li><li class="L5"><span class="com"> * this stuff is worth it, you can buy me a beer in return.        Joerg Wunsch</span></li><li class="L6"><span class="com"> * ----------------------------------------------------------------------------</span></li><li class="L7"><span class="com"> *</span></li><li class="L8"><span class="com"> * Stdio demo, UART implementation</span></li><li class="L9"><span class="com"> *</span></li><li class="L0"><span class="com"> * $Id: uart.c,v 1.1 2005/12/28 21:38:59 joerg_wunsch Exp $</span></li><li class="L1"><span class="com"> *</span></li><li class="L2"><span class="com"> * Mod for mega644 BRL Jan2009</span></li><li class="L3"><span class="com"> */</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="com">/* CPU frequency */</span></li><li class="L7"><span class="com">#define</span><span class="pln"> F_CPU </span><span class="lit">16000000UL</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="com">/* UART baud rate */</span></li><li class="L0"><span class="com">#define</span><span class="pln"> UART_BAUD  </span><span class="lit">57600</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdint.h&gt;</span></li><li class="L4"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdio.h&gt;</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;avr/io.h&gt;</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="com">#include</span><span class="pln"> </span><span class="str">"uart.h"</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="com">/*</span></li><li class="L1"><span class="com"> * Initialize the UART to 9600 Bd, tx/rx, 8N1.</span></li><li class="L2"><span class="com"> */</span></li><li class="L3"><span class="kwd">void</span></li><li class="L4"><span class="pln">uart_init</span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span></li><li class="L5"><span class="pun">{</span></li><li class="L6"><span class="com">#if F_CPU &lt; 2000000UL &amp;&amp; defined(U2X)</span></li><li class="L7"><span class="pln">  UCSR0A </span><span class="pun">=</span><span class="pln"> _BV</span><span class="pun">(</span><span class="pln">U2X</span><span class="pun">);</span><span class="pln">             </span><span class="com">/* improve baud rate error by using 2x clk */</span></li><li class="L8"><span class="pln">  UBRR0L </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">F_CPU </span><span class="pun">/</span><span class="pln"> </span><span class="pun">(</span><span class="lit">8UL</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> UART_BAUD</span><span class="pun">))</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L9"><span class="com">#else</span></li><li class="L0"><span class="pln">  UBRR0L </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">F_CPU </span><span class="pun">/</span><span class="pln"> </span><span class="pun">(</span><span class="lit">16UL</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> UART_BAUD</span><span class="pun">))</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L1"><span class="com">#endif</span></li><li class="L2"><span class="pln">  UCSR0B </span><span class="pun">=</span><span class="pln"> _BV</span><span class="pun">(</span><span class="pln">TXEN0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> _BV</span><span class="pun">(</span><span class="pln">RXEN0</span><span class="pun">);</span><span class="pln"> </span><span class="com">/* tx/rx enable */</span></li><li class="L3"><span class="pun">}</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="com">/*</span></li><li class="L6"><span class="com"> * Send character c down the UART Tx, wait until tx holding register</span></li><li class="L7"><span class="com"> * is empty.</span></li><li class="L8"><span class="com"> */</span></li><li class="L9"><span class="kwd">int</span></li><li class="L0"><span class="pln">uart_putchar</span><span class="pun">(</span><span class="kwd">char</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> FILE </span><span class="pun">*</span><span class="pln">stream</span><span class="pun">)</span></li><li class="L1"><span class="pun">{</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c </span><span class="pun">==</span><span class="pln"> </span><span class="str">'\a'</span><span class="pun">)</span></li><li class="L4"><span class="pln">    </span><span class="pun">{</span></li><li class="L5"><span class="pln">      fputs</span><span class="pun">(</span><span class="str">"*ring*\n"</span><span class="pun">,</span><span class="pln"> stderr</span><span class="pun">);</span></li><li class="L6"><span class="pln">      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L7"><span class="pln">    </span><span class="pun">}</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c </span><span class="pun">==</span><span class="pln"> </span><span class="str">'\n'</span><span class="pun">)</span></li><li class="L0"><span class="pln">    uart_putchar</span><span class="pun">(</span><span class="str">'\r'</span><span class="pun">,</span><span class="pln"> stream</span><span class="pun">);</span></li><li class="L1"><span class="pln">  loop_until_bit_is_set</span><span class="pun">(</span><span class="pln">UCSR0A</span><span class="pun">,</span><span class="pln"> UDRE0</span><span class="pun">);</span></li><li class="L2"><span class="pln">  UDR0 </span><span class="pun">=</span><span class="pln"> c</span><span class="pun">;</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L5"><span class="pun">}</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="com">/*</span></li><li class="L8"><span class="com"> * Receive a character from the UART Rx.</span></li><li class="L9"><span class="com"> *</span></li><li class="L0"><span class="com"> * This features a simple line-editor that allows to delete and</span></li><li class="L1"><span class="com"> * re-edit the characters entered, until either CR or NL is entered.</span></li><li class="L2"><span class="com"> * Printable characters entered will be echoed using uart_putchar().</span></li><li class="L3"><span class="com"> *</span></li><li class="L4"><span class="com"> * Editing characters:</span></li><li class="L5"><span class="com"> *</span></li><li class="L6"><span class="com"> * . \b (BS) or \177 (DEL) delete the previous character</span></li><li class="L7"><span class="com"> * . ^u kills the entire input buffer</span></li><li class="L8"><span class="com"> * . ^w deletes the previous word</span></li><li class="L9"><span class="com"> * . ^r sends a CR, and then reprints the buffer</span></li><li class="L0"><span class="com"> * . \t will be replaced by a single space</span></li><li class="L1"><span class="com"> *</span></li><li class="L2"><span class="com"> * All other control characters will be ignored.</span></li><li class="L3"><span class="com"> *</span></li><li class="L4"><span class="com"> * The internal line buffer is RX_BUFSIZE (80) characters long, which</span></li><li class="L5"><span class="com"> * includes the terminating \n (but no terminating \0).  If the buffer</span></li><li class="L6"><span class="com"> * is full (i. e., at RX_BUFSIZE-1 characters in order to keep space for</span></li><li class="L7"><span class="com"> * the trailing \n), any further input attempts will send a \a to</span></li><li class="L8"><span class="com"> * uart_putchar() (BEL character), although line editing is still</span></li><li class="L9"><span class="com"> * allowed.</span></li><li class="L0"><span class="com"> *</span></li><li class="L1"><span class="com"> * Input errors while talking to the UART will cause an immediate</span></li><li class="L2"><span class="com"> * return of -1 (error indication).  Notably, this will be caused by a</span></li><li class="L3"><span class="com"> * framing error (e. g. serial line "break" condition), by an input</span></li><li class="L4"><span class="com"> * overrun, and by a parity error (if parity was enabled and automatic</span></li><li class="L5"><span class="com"> * parity recognition is supported by hardware).</span></li><li class="L6"><span class="com"> *</span></li><li class="L7"><span class="com"> * Successive calls to uart_getchar() will be satisfied from the</span></li><li class="L8"><span class="com"> * internal buffer until that buffer is emptied again.</span></li><li class="L9"><span class="com"> */</span></li><li class="L0"><span class="kwd">int</span></li><li class="L1"><span class="pln">uart_getchar</span><span class="pun">(</span><span class="pln">FILE </span><span class="pun">*</span><span class="pln">stream</span><span class="pun">)</span></li><li class="L2"><span class="pun">{</span></li><li class="L3"><span class="pln">  </span><span class="typ">uint8_t</span><span class="pln"> c</span><span class="pun">;</span></li><li class="L4"><span class="pln">  </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">cp</span><span class="pun">,</span><span class="pln"> </span><span class="pun">*</span><span class="pln">cp2</span><span class="pun">;</span></li><li class="L5"><span class="pln">  </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> b</span><span class="pun">[</span><span class="pln">RX_BUFSIZE</span><span class="pun">];</span></li><li class="L6"><span class="pln">  </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">rxp</span><span class="pun">;</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">rxp </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></li><li class="L9"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cp </span><span class="pun">=</span><span class="pln"> b</span><span class="pun">;;)</span></li><li class="L0"><span class="pln">      </span><span class="pun">{</span></li><li class="L1"><span class="pln">	loop_until_bit_is_set</span><span class="pun">(</span><span class="pln">UCSR0A</span><span class="pun">,</span><span class="pln"> RXC0</span><span class="pun">);</span></li><li class="L2"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">UCSR0A </span><span class="pun">&amp;</span><span class="pln"> _BV</span><span class="pun">(</span><span class="pln">FE0</span><span class="pun">))</span></li><li class="L3"><span class="pln">	  </span><span class="kwd">return</span><span class="pln"> _FDEV_EOF</span><span class="pun">;</span></li><li class="L4"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">UCSR0A </span><span class="pun">&amp;</span><span class="pln"> _BV</span><span class="pun">(</span><span class="pln">DOR0</span><span class="pun">))</span></li><li class="L5"><span class="pln">	  </span><span class="kwd">return</span><span class="pln"> _FDEV_ERR</span><span class="pun">;</span></li><li class="L6"><span class="pln">	c </span><span class="pun">=</span><span class="pln"> UDR0</span><span class="pun">;</span></li><li class="L7"><span class="pln">	</span><span class="com">/* behaviour similar to Unix stty ICRNL */</span></li><li class="L8"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c </span><span class="pun">==</span><span class="pln"> </span><span class="str">'\r'</span><span class="pun">)</span></li><li class="L9"><span class="pln">	  c </span><span class="pun">=</span><span class="pln"> </span><span class="str">'\n'</span><span class="pun">;</span></li><li class="L0"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c </span><span class="pun">==</span><span class="pln"> </span><span class="str">'\n'</span><span class="pun">)</span></li><li class="L1"><span class="pln">	  </span><span class="pun">{</span></li><li class="L2"><span class="pln">	    </span><span class="pun">*</span><span class="pln">cp </span><span class="pun">=</span><span class="pln"> c</span><span class="pun">;</span></li><li class="L3"><span class="pln">	    uart_putchar</span><span class="pun">(</span><span class="pln">c</span><span class="pun">,</span><span class="pln"> stream</span><span class="pun">);</span></li><li class="L4"><span class="pln">	    rxp </span><span class="pun">=</span><span class="pln"> b</span><span class="pun">;</span></li><li class="L5"><span class="pln">	    </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L6"><span class="pln">	  </span><span class="pun">}</span></li><li class="L7"><span class="pln">	</span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c </span><span class="pun">==</span><span class="pln"> </span><span class="str">'\t'</span><span class="pun">)</span></li><li class="L8"><span class="pln">	  c </span><span class="pun">=</span><span class="pln"> </span><span class="str">' '</span><span class="pun">;</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">c </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">uint8_t</span><span class="pun">)</span><span class="str">' '</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> c </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">uint8_t</span><span class="pun">)</span><span class="str">'\x7e'</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span></li><li class="L1"><span class="pln">	    c </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">uint8_t</span><span class="pun">)</span><span class="str">'\xa0'</span><span class="pun">)</span></li><li class="L2"><span class="pln">	  </span><span class="pun">{</span></li><li class="L3"><span class="pln">	    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cp </span><span class="pun">==</span><span class="pln"> b </span><span class="pun">+</span><span class="pln"> RX_BUFSIZE </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></li><li class="L4"><span class="pln">	      uart_putchar</span><span class="pun">(</span><span class="str">'\a'</span><span class="pun">,</span><span class="pln"> stream</span><span class="pun">);</span></li><li class="L5"><span class="pln">	    </span><span class="kwd">else</span></li><li class="L6"><span class="pln">	      </span><span class="pun">{</span></li><li class="L7"><span class="pln">		</span><span class="pun">*</span><span class="pln">cp</span><span class="pun">++</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> c</span><span class="pun">;</span></li><li class="L8"><span class="pln">		uart_putchar</span><span class="pun">(</span><span class="pln">c</span><span class="pun">,</span><span class="pln"> stream</span><span class="pun">);</span></li><li class="L9"><span class="pln">	      </span><span class="pun">}</span></li><li class="L0"><span class="pln">	    </span><span class="kwd">continue</span><span class="pun">;</span></li><li class="L1"><span class="pln">	  </span><span class="pun">}</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">	</span><span class="kwd">switch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c</span><span class="pun">)</span></li><li class="L4"><span class="pln">	  </span><span class="pun">{</span></li><li class="L5"><span class="pln">	  </span><span class="kwd">case</span><span class="pln"> </span><span class="str">'c'</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">0x1f</span><span class="pun">:</span></li><li class="L6"><span class="pln">	    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">	  </span><span class="kwd">case</span><span class="pln"> </span><span class="str">'\b'</span><span class="pun">:</span></li><li class="L9"><span class="pln">	  </span><span class="kwd">case</span><span class="pln"> </span><span class="str">'\x7f'</span><span class="pun">:</span></li><li class="L0"><span class="pln">	    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cp </span><span class="pun">&gt;</span><span class="pln"> b</span><span class="pun">)</span></li><li class="L1"><span class="pln">	      </span><span class="pun">{</span></li><li class="L2"><span class="pln">		uart_putchar</span><span class="pun">(</span><span class="str">'\b'</span><span class="pun">,</span><span class="pln"> stream</span><span class="pun">);</span></li><li class="L3"><span class="pln">		uart_putchar</span><span class="pun">(</span><span class="str">' '</span><span class="pun">,</span><span class="pln"> stream</span><span class="pun">);</span></li><li class="L4"><span class="pln">		uart_putchar</span><span class="pun">(</span><span class="str">'\b'</span><span class="pun">,</span><span class="pln"> stream</span><span class="pun">);</span></li><li class="L5"><span class="pln">		cp</span><span class="pun">--;</span></li><li class="L6"><span class="pln">	      </span><span class="pun">}</span></li><li class="L7"><span class="pln">	    </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">	  </span><span class="kwd">case</span><span class="pln"> </span><span class="str">'r'</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">0x1f</span><span class="pun">:</span></li><li class="L0"><span class="pln">	    uart_putchar</span><span class="pun">(</span><span class="str">'\r'</span><span class="pun">,</span><span class="pln"> stream</span><span class="pun">);</span></li><li class="L1"><span class="pln">	    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cp2 </span><span class="pun">=</span><span class="pln"> b</span><span class="pun">;</span><span class="pln"> cp2 </span><span class="pun">&lt;</span><span class="pln"> cp</span><span class="pun">;</span><span class="pln"> cp2</span><span class="pun">++)</span></li><li class="L2"><span class="pln">	      uart_putchar</span><span class="pun">(*</span><span class="pln">cp2</span><span class="pun">,</span><span class="pln"> stream</span><span class="pun">);</span></li><li class="L3"><span class="pln">	    </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">	  </span><span class="kwd">case</span><span class="pln"> </span><span class="str">'u'</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">0x1f</span><span class="pun">:</span></li><li class="L6"><span class="pln">	    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cp </span><span class="pun">&gt;</span><span class="pln"> b</span><span class="pun">)</span></li><li class="L7"><span class="pln">	      </span><span class="pun">{</span></li><li class="L8"><span class="pln">		uart_putchar</span><span class="pun">(</span><span class="str">'\b'</span><span class="pun">,</span><span class="pln"> stream</span><span class="pun">);</span></li><li class="L9"><span class="pln">		uart_putchar</span><span class="pun">(</span><span class="str">' '</span><span class="pun">,</span><span class="pln"> stream</span><span class="pun">);</span></li><li class="L0"><span class="pln">		uart_putchar</span><span class="pun">(</span><span class="str">'\b'</span><span class="pun">,</span><span class="pln"> stream</span><span class="pun">);</span></li><li class="L1"><span class="pln">		cp</span><span class="pun">--;</span></li><li class="L2"><span class="pln">	      </span><span class="pun">}</span></li><li class="L3"><span class="pln">	    </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">	  </span><span class="kwd">case</span><span class="pln"> </span><span class="str">'w'</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">0x1f</span><span class="pun">:</span></li><li class="L6"><span class="pln">	    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cp </span><span class="pun">&gt;</span><span class="pln"> b </span><span class="pun">&amp;&amp;</span><span class="pln"> cp</span><span class="pun">[-</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="str">' '</span><span class="pun">)</span></li><li class="L7"><span class="pln">	      </span><span class="pun">{</span></li><li class="L8"><span class="pln">		uart_putchar</span><span class="pun">(</span><span class="str">'\b'</span><span class="pun">,</span><span class="pln"> stream</span><span class="pun">);</span></li><li class="L9"><span class="pln">		uart_putchar</span><span class="pun">(</span><span class="str">' '</span><span class="pun">,</span><span class="pln"> stream</span><span class="pun">);</span></li><li class="L0"><span class="pln">		uart_putchar</span><span class="pun">(</span><span class="str">'\b'</span><span class="pun">,</span><span class="pln"> stream</span><span class="pun">);</span></li><li class="L1"><span class="pln">		cp</span><span class="pun">--;</span></li><li class="L2"><span class="pln">	      </span><span class="pun">}</span></li><li class="L3"><span class="pln">	    </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L4"><span class="pln">	  </span><span class="pun">}</span></li><li class="L5"><span class="pln">      </span><span class="pun">}</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">  c </span><span class="pun">=</span><span class="pln"> </span><span class="pun">*</span><span class="pln">rxp</span><span class="pun">++;</span></li><li class="L8"><span class="pln">  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c </span><span class="pun">==</span><span class="pln"> </span><span class="str">'\n'</span><span class="pun">)</span></li><li class="L9"><span class="pln">    rxp </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">  </span><span class="kwd">return</span><span class="pln"> c</span><span class="pun">;</span></li><li class="L2"><span class="pun">}</span></li><li class="L3"><span class="pln">                 </span></li></ol></pre>

                 <h5>uart.h</h5>
                 <pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="com">/*</span></li><li class="L1"><span class="com"> * ----------------------------------------------------------------------------</span></li><li class="L2"><span class="com"> * "THE BEER-WARE LICENSE" (Revision 42):</span></li><li class="L3"><span class="com"> * &lt;joerg@FreeBSD.ORG&gt; wrote this file.  As long as you retain this notice you</span></li><li class="L4"><span class="com"> * can do whatever you want with this stuff. If we meet some day, and you think</span></li><li class="L5"><span class="com"> * this stuff is worth it, you can buy me a beer in return.        Joerg Wunsch</span></li><li class="L6"><span class="com"> * ----------------------------------------------------------------------------</span></li><li class="L7"><span class="com"> *</span></li><li class="L8"><span class="com"> * Stdio demo, UART declarations</span></li><li class="L9"><span class="com"> *</span></li><li class="L0"><span class="com"> * $Id: uart.h,v 1.1 2005/12/28 21:38:59 joerg_wunsch Exp $</span></li><li class="L1"><span class="com"> */</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="com">/*</span></li><li class="L4"><span class="com"> * Perform UART startup initialization.</span></li><li class="L5"><span class="com"> */</span></li><li class="L6"><span class="kwd">void</span><span class="pln">	uart_init</span><span class="pun">(</span><span class="kwd">void</span><span class="pun">);</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="com">/*</span></li><li class="L9"><span class="com"> * Send one character to the UART.</span></li><li class="L0"><span class="com"> */</span></li><li class="L1"><span class="kwd">int</span><span class="pln">	uart_putchar</span><span class="pun">(</span><span class="kwd">char</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> FILE </span><span class="pun">*</span><span class="pln">stream</span><span class="pun">);</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="com">/*</span></li><li class="L4"><span class="com"> * Size of internal line buffer used by uart_getchar().</span></li><li class="L5"><span class="com"> */</span></li><li class="L6"><span class="com">#define</span><span class="pln"> RX_BUFSIZE </span><span class="lit">80</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="com">/*</span></li><li class="L9"><span class="com"> * Receive one character from the UART.  The actual reception is</span></li><li class="L0"><span class="com"> * line-buffered, and one character is returned from the buffer at</span></li><li class="L1"><span class="com"> * each invokation.</span></li><li class="L2"><span class="com"> */</span></li><li class="L3"><span class="kwd">int</span><span class="pln">	uart_getchar</span><span class="pun">(</span><span class="pln">FILE </span><span class="pun">*</span><span class="pln">stream</span><span class="pun">);</span></li><li class="L4"><span class="pln">                 </span></li></ol></pre>

              <h4>OpenGL Pong/P300</h4><br>
                 <h5>config.h</h5>
                 <pre class="prettyprint linenums" id="gl_plot_config_h"><ol class="linenums"><li class="L0"><span class="com">#ifndef</span><span class="pln"> CONFIG_H_</span></li><li class="L1"><span class="com">#define</span><span class="pln"> CONFIG_H_</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="com">#define</span><span class="pln"> SCREEN_WIDTH  </span><span class="lit">1024</span></li><li class="L4"><span class="com">#define</span><span class="pln"> SCREEN_HEIGHT  </span><span class="lit">768</span></li><li class="L5"><span class="com">#define</span><span class="pln"> SCREEN_BPP      </span><span class="lit">16</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="com">#define</span><span class="pln"> ADC_RESOLUTION </span><span class="lit">1024</span></li><li class="L8"><span class="com">#define</span><span class="pln"> FFT_SCALE_FACTOR </span><span class="pun">(</span><span class="lit">1024</span><span class="pun">*</span><span class="lit">1024</span><span class="pun">*</span><span class="lit">10</span><span class="pun">)</span></li><li class="L9"><span class="com">#define</span><span class="pln"> X_SIZE </span><span class="lit">1024</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="com">#define</span><span class="pln"> TRUE  </span><span class="lit">1</span></li><li class="L2"><span class="com">#define</span><span class="pln"> FALSE </span><span class="lit">0</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="com">#define</span><span class="pln"> LOG_FILENAME </span><span class="str">"eeg_log.csv"</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="com">#endif</span></li><li class="L7"><span class="pln">                 </span></li></ol></pre>
                 <h5>debug.cpp</h5>
                 <pre class="prettyprint linenums" id="gl_plot_debug_cpp"><ol class="linenums"><li class="L0"><span class="com">#include</span><span class="pln"> </span><span class="str">"debug.h"</span></li><li class="L1"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdlib.h&gt;</span></li><li class="L2"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;iostream&gt;</span></li><li class="L3"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;fstream&gt;</span></li><li class="L4"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;time.h&gt;</span></li><li class="L5"><span class="kwd">using</span><span class="pln"> </span><span class="kwd">namespace</span><span class="pln"> std</span><span class="pun">;</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">ofstream log_file</span><span class="pun">;</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="com">#define</span><span class="pln"> BPERL </span><span class="lit">16</span><span class="pln"> </span><span class="com">// byte/line for dump</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">FileExists</span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> filename</span><span class="pun">)</span></li><li class="L2"><span class="pun">{</span></li><li class="L3"><span class="pln">	std</span><span class="pun">::</span><span class="pln">fstream fin</span><span class="pun">;</span></li><li class="L4"><span class="pln">	fin</span><span class="pun">.</span><span class="pln">open</span><span class="pun">(</span><span class="pln">filename</span><span class="pun">.</span><span class="pln">c_str</span><span class="pun">(),</span><span class="pln"> std</span><span class="pun">::</span><span class="pln">ios</span><span class="pun">::</span><span class="kwd">in</span><span class="pun">);</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">fin</span><span class="pun">.</span><span class="pln">is_open</span><span class="pun">())</span></li><li class="L7"><span class="pln">	</span><span class="pun">{</span></li><li class="L8"><span class="pln">		fin</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span></li><li class="L9"><span class="pln">		</span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></li><li class="L0"><span class="pln">	</span><span class="pun">}</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">	fin</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span></li><li class="L3"><span class="pln">	</span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></li><li class="L4"><span class="pun">}</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="kwd">void</span><span class="pln"> </span><span class="typ">OpenLog</span><span class="pun">()</span></li><li class="L7"><span class="pun">{</span></li><li class="L8"><span class="pln">	</span><span class="kwd">string</span><span class="pln"> filename </span><span class="pun">=</span><span class="pln"> </span><span class="str">""</span><span class="pun">;</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">	</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span></li><li class="L1"><span class="pln">	</span><span class="kwd">bool</span><span class="pln"> taken</span><span class="pun">=</span><span class="kwd">true</span><span class="pun">;</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">	</span><span class="kwd">do</span><span class="pln"> </span><span class="pun">{</span></li><li class="L4"><span class="pln">		i</span><span class="pun">++;</span></li><li class="L5"><span class="pln">		filename </span><span class="pun">=</span><span class="pln"> format</span><span class="pun">(</span><span class="str">"logs/log%d.txt"</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">);</span></li><li class="L6"><span class="pln">		</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">FileExists</span><span class="pun">(</span><span class="pln">filename</span><span class="pun">))</span></li><li class="L7"><span class="pln">			taken </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></li><li class="L8"><span class="pln">		</span><span class="kwd">else</span></li><li class="L9"><span class="pln">			taken </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></li><li class="L0"><span class="pln">	</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">taken </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">);</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">	printf</span><span class="pun">(</span><span class="str">"Using log file %s ...\n"</span><span class="pun">,</span><span class="pln"> filename</span><span class="pun">.</span><span class="pln">c_str</span><span class="pun">());</span></li><li class="L3"><span class="pln">	log_file</span><span class="pun">.</span><span class="pln">open</span><span class="pun">(</span><span class="pln">filename</span><span class="pun">.</span><span class="pln">c_str</span><span class="pun">(),</span><span class="pln"> ofstream</span><span class="pun">::</span><span class="kwd">out</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> ofstream</span><span class="pun">::</span><span class="pln">trunc</span><span class="pun">);</span></li><li class="L4"><span class="pun">}</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="kwd">void</span><span class="pln"> </span><span class="typ">CloseLog</span><span class="pun">()</span></li><li class="L7"><span class="pun">{</span></li><li class="L8"><span class="pln">	log_file</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span></li><li class="L9"><span class="pln">	printf</span><span class="pun">(</span><span class="str">"Log file closed.\n"</span><span class="pun">);</span></li><li class="L0"><span class="pun">}</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="kwd">void</span><span class="pln"> log_out</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> fmt </span><span class="pun">...)</span></li><li class="L3"><span class="pun">{</span></li><li class="L4"><span class="pln">	va_list argList</span><span class="pun">;</span></li><li class="L5"><span class="pln">	va_start</span><span class="pun">(</span><span class="pln">argList</span><span class="pun">,</span><span class="pln"> fmt</span><span class="pun">);</span></li><li class="L6"><span class="pln">	std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> vformat</span><span class="pun">(</span><span class="pln">fmt</span><span class="pun">,</span><span class="pln"> argList</span><span class="pun">);</span></li><li class="L7"><span class="pln">	va_end</span><span class="pun">(</span><span class="pln">argList</span><span class="pun">);</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">	</span><span class="kwd">char</span><span class="pln"> timebuf</span><span class="pun">[</span><span class="lit">52</span><span class="pun">];</span></li><li class="L0"><span class="pln">	</span><span class="kwd">long</span><span class="pln"> timeval</span><span class="pun">;</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">	time</span><span class="pun">(&amp;</span><span class="pln">timeval</span><span class="pun">);</span></li><li class="L3"><span class="pln">	strftime</span><span class="pun">(</span><span class="pln">timebuf</span><span class="pun">,</span><span class="lit">32</span><span class="pun">,</span><span class="str">"%I:%M:%S"</span><span class="pun">,</span><span class="pln">localtime</span><span class="pun">(&amp;</span><span class="pln">timeval</span><span class="pun">));</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">	cout </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"["</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> timebuf </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"] "</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> result</span><span class="pun">;</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">log_file</span><span class="pun">.</span><span class="pln">is_open</span><span class="pun">())</span><span class="pln"> log_file </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"["</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> timebuf </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"] "</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> result</span><span class="pun">;</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">	</span><span class="kwd">return</span><span class="pun">;</span></li><li class="L0"><span class="pun">}</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> format</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> fmt </span><span class="pun">...)</span></li><li class="L3"><span class="pun">{</span></li><li class="L4"><span class="pln">	va_list argList</span><span class="pun">;</span></li><li class="L5"><span class="pln">	va_start</span><span class="pun">(</span><span class="pln">argList</span><span class="pun">,</span><span class="pln"> fmt</span><span class="pun">);</span></li><li class="L6"><span class="pln">	std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> vformat</span><span class="pun">(</span><span class="pln">fmt</span><span class="pun">,</span><span class="pln"> argList</span><span class="pun">);</span></li><li class="L7"><span class="pln">	va_end</span><span class="pun">(</span><span class="pln">argList</span><span class="pun">);</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">	</span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></li><li class="L0"><span class="pun">}</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> vformat</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">fmt</span><span class="pun">,</span><span class="pln"> va_list argPtr</span><span class="pun">)</span></li><li class="L3"><span class="pun">{</span></li><li class="L4"><span class="pln">	</span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> maxSize </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1000000</span><span class="pun">;</span></li><li class="L5"><span class="pln">	</span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> bufSize </span><span class="pun">=</span><span class="pln"> </span><span class="lit">161</span><span class="pun">;</span></li><li class="L6"><span class="pln">	</span><span class="kwd">char</span><span class="pln"> stackBuffer</span><span class="pun">[</span><span class="pln">bufSize</span><span class="pun">];</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">	</span><span class="kwd">int</span><span class="pln"> attemptedSize </span><span class="pun">=</span><span class="pln"> bufSize </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">	</span><span class="kwd">int</span><span class="pln"> numChars </span><span class="pun">=</span><span class="pln"> vsnprintf</span><span class="pun">(</span><span class="pln">stackBuffer</span><span class="pun">,</span><span class="pln"> attemptedSize</span><span class="pun">,</span><span class="pln"> fmt</span><span class="pun">,</span><span class="pln"> argPtr</span><span class="pun">);</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">numChars </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></li><li class="L3"><span class="pln">		</span><span class="kwd">return</span><span class="pln"> std</span><span class="pun">::</span><span class="kwd">string</span><span class="pun">(</span><span class="pln">stackBuffer</span><span class="pun">);</span><span class="pln">	</span><span class="com">// Got it on the first try.</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">	</span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> heapBuffer </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span><span class="pln">	</span><span class="com">// Now use the heap.</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">	</span><span class="kwd">while</span><span class="pln"> </span><span class="pun">((</span><span class="pln">numChars </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">attemptedSize </span><span class="pun">&lt;</span><span class="pln"> maxSize</span><span class="pun">))</span></li><li class="L8"><span class="pln">	</span><span class="pun">{</span></li><li class="L9"><span class="pln">		attemptedSize </span><span class="pun">*=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln">	</span><span class="com">// Try a bigger size</span></li><li class="L0"><span class="pln">		heapBuffer </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">char</span><span class="pun">*)</span><span class="pln">realloc</span><span class="pun">(</span><span class="pln">heapBuffer</span><span class="pun">,</span><span class="pln"> attemptedSize </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></li><li class="L1"><span class="pln">		numChars </span><span class="pun">=</span><span class="pln"> vsnprintf</span><span class="pun">(</span><span class="pln">heapBuffer</span><span class="pun">,</span><span class="pln"> attemptedSize</span><span class="pun">,</span><span class="pln"> fmt</span><span class="pun">,</span><span class="pln"> argPtr</span><span class="pun">);</span></li><li class="L2"><span class="pln">	</span><span class="pun">}</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">	std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> std</span><span class="pun">::</span><span class="kwd">string</span><span class="pun">(</span><span class="pln">heapBuffer</span><span class="pun">);</span></li><li class="L5"><span class="pln">	free</span><span class="pun">(</span><span class="pln">heapBuffer</span><span class="pun">);</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">	</span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></li><li class="L8"><span class="pun">}</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="kwd">void</span><span class="pln"> </span><span class="kwd">dump</span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">data</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> count</span><span class="pun">)</span></li><li class="L1"><span class="pun">{</span></li><li class="L2"><span class="pln">	</span><span class="kwd">unsigned</span><span class="pln"> byte1</span><span class="pun">,</span><span class="pln"> byte2</span><span class="pun">;</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">	</span><span class="kwd">while</span><span class="pun">(</span><span class="pln">count </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></li><li class="L5"><span class="pln">	</span><span class="pun">{</span></li><li class="L6"><span class="pln">		</span><span class="kwd">for</span><span class="pun">(</span><span class="pln">byte1 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> byte1 </span><span class="pun">&lt;</span><span class="pln"> BPERL</span><span class="pun">;</span><span class="pln"> byte1</span><span class="pun">++)</span></li><li class="L7"><span class="pln">		</span><span class="pun">{</span></li><li class="L8"><span class="pln">			</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">count </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></li><li class="L9"><span class="pln">				</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">			printf</span><span class="pun">(</span><span class="str">"%02X "</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">byte1</span><span class="pun">]);</span></li><li class="L2"><span class="pln">			count</span><span class="pun">--;</span></li><li class="L3"><span class="pln">		</span><span class="pun">}</span></li><li class="L4"><span class="pln">		printf</span><span class="pun">(</span><span class="str">"\t"</span><span class="pun">);</span></li><li class="L5"><span class="pln">		</span><span class="kwd">for</span><span class="pun">(</span><span class="pln">byte2 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> byte2 </span><span class="pun">&lt;</span><span class="pln"> byte1</span><span class="pun">;</span><span class="pln"> byte2</span><span class="pun">++)</span></li><li class="L6"><span class="pln">		</span><span class="pun">{</span></li><li class="L7"><span class="com">/*			if(data[byte2] &lt; ' ')</span></li><li class="L8"><span class="com">				printf(".");</span></li><li class="L9"><span class="com">			else</span></li><li class="L0"><span class="com">				printf("%c", data[byte2]);*/</span></li><li class="L1"><span class="pln">			</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">byte2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="str">'!'</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">byte2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="str">'}'</span><span class="pun">)</span></li><li class="L2"><span class="pln">				printf</span><span class="pun">(</span><span class="str">"%c"</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">byte2</span><span class="pun">]);</span></li><li class="L3"><span class="pln">			</span><span class="kwd">else</span></li><li class="L4"><span class="pln">				printf</span><span class="pun">(</span><span class="str">"."</span><span class="pun">);</span></li><li class="L5"><span class="pln">		</span><span class="pun">}</span></li><li class="L6"><span class="pln">		printf</span><span class="pun">(</span><span class="str">"\n"</span><span class="pun">);</span></li><li class="L7"><span class="pln">		data </span><span class="pun">+=</span><span class="pln"> BPERL</span><span class="pun">;</span></li><li class="L8"><span class="pln">	</span><span class="pun">}</span></li><li class="L9"><span class="pun">}</span></li><li class="L0"><span class="pln">                 </span></li></ol></pre>
                 <h5>debug.h</h5>
                 <pre class="prettyprint linenums" id="gl_plot_debug_h"><ol class="linenums"><li class="L0"><span class="com">#ifndef</span><span class="pln"> DEBUG_H_</span></li><li class="L1"><span class="com">#define</span><span class="pln"> DEBUG_H_</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;string&gt;</span></li><li class="L4"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdio.h&gt;</span></li><li class="L5"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;cstdarg&gt;</span></li><li class="L6"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdarg.h&gt;</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="kwd">bool</span><span class="pln"> </span><span class="typ">FileExists</span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> filename</span><span class="pun">);</span></li><li class="L9"><span class="kwd">void</span><span class="pln"> </span><span class="typ">OpenLog</span><span class="pun">();</span></li><li class="L0"><span class="kwd">void</span><span class="pln"> </span><span class="typ">CloseLog</span><span class="pun">();</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> format</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> fmt </span><span class="pun">...);</span></li><li class="L3"><span class="pln">std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> vformat</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">fmt</span><span class="pun">,</span><span class="pln"> va_list argPtr</span><span class="pun">);</span></li><li class="L4"><span class="kwd">void</span><span class="pln"> </span><span class="kwd">dump</span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">data</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> count</span><span class="pun">);</span></li><li class="L5"><span class="kwd">void</span><span class="pln"> log_out</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pun">*</span><span class="pln"> fmt </span><span class="pun">...);</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="com">#endif</span></li><li class="L8"><span class="pln">                 </span></li></ol></pre>
                 <h5>font.cpp</h5>
                 <pre class="prettyprint linenums" id="gl_plot_font_cpp"><ol class="linenums"><li class="L0"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;math.h&gt;</span></li><li class="L1"><span class="com">#include</span><span class="pln"> </span><span class="str">"font.h"</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="com">#define</span><span class="pln"> FONT_SIZE </span><span class="lit">16</span></li><li class="L4"><span class="pln">SDL_Color red </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="lit">255</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">},</span><span class="pln"> blue </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">255</span><span class="pun">};</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="kwd">void</span><span class="pln"> glBegin2D</span><span class="pun">()</span></li><li class="L7"><span class="pun">{</span></li><li class="L8"><span class="pln">	glViewport</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> SCREEN_WIDTH</span><span class="pun">,</span><span class="pln"> SCREEN_HEIGHT</span><span class="pun">);</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">	glMatrixMode</span><span class="pun">(</span><span class="pln">GL_PROJECTION</span><span class="pun">);</span></li><li class="L1"><span class="pln">	glPushMatrix</span><span class="pun">();</span></li><li class="L2"><span class="pln">	glLoadIdentity</span><span class="pun">();</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">    glOrtho</span><span class="pun">(</span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="typ">GLdouble</span><span class="pun">)</span><span class="pln">SCREEN_WIDTH</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="typ">GLdouble</span><span class="pun">)</span><span class="pln">SCREEN_HEIGHT</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">);</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">	glMatrixMode</span><span class="pun">(</span><span class="pln">GL_MODELVIEW</span><span class="pun">);</span></li><li class="L7"><span class="pln">	glPushMatrix</span><span class="pun">();</span></li><li class="L8"><span class="pln">	glLoadIdentity</span><span class="pun">();</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">	glPushAttrib</span><span class="pun">(</span><span class="pln">GL_ENABLE_BIT</span><span class="pun">);</span></li><li class="L1"><span class="pln">	glDisable</span><span class="pun">(</span><span class="pln">GL_DEPTH_TEST</span><span class="pun">);</span></li><li class="L2"><span class="pln">	glDisable</span><span class="pun">(</span><span class="pln">GL_CULL_FACE</span><span class="pun">);</span></li><li class="L3"><span class="pln">	glEnable</span><span class="pun">(</span><span class="pln">GL_TEXTURE_2D</span><span class="pun">);</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">	glEnable</span><span class="pun">(</span><span class="pln">GL_BLEND</span><span class="pun">);</span></li><li class="L6"><span class="pln">	glBlendFunc</span><span class="pun">(</span><span class="pln">GL_SRC_ALPHA</span><span class="pun">,</span><span class="pln"> GL_ONE_MINUS_SRC_ALPHA</span><span class="pun">);</span></li><li class="L7"><span class="pun">}</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="kwd">void</span><span class="pln"> glEnd2D</span><span class="pun">()</span></li><li class="L0"><span class="pun">{</span></li><li class="L1"><span class="pln">	glMatrixMode</span><span class="pun">(</span><span class="pln">GL_PROJECTION</span><span class="pun">);</span></li><li class="L2"><span class="pln">	glPopMatrix</span><span class="pun">();</span></li><li class="L3"><span class="pln">	glMatrixMode</span><span class="pun">(</span><span class="pln">GL_MODELVIEW</span><span class="pun">);</span></li><li class="L4"><span class="pln">	glPopMatrix</span><span class="pun">();</span></li><li class="L5"><span class="pln">	glPopAttrib</span><span class="pun">();</span></li><li class="L6"><span class="pun">}</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="kwd">static</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> power_of_two</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> input</span><span class="pun">)</span></li><li class="L9"><span class="pun">{</span></li><li class="L0"><span class="pln">	</span><span class="kwd">int</span><span class="pln"> value </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">	</span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">value </span><span class="pun">&lt;</span><span class="pln"> input</span><span class="pun">)</span></li><li class="L3"><span class="pln">	</span><span class="pun">{</span></li><li class="L4"><span class="pln">		value </span><span class="pun">&lt;&lt;=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L5"><span class="pln">	</span><span class="pun">}</span></li><li class="L6"><span class="pln">	</span><span class="kwd">return</span><span class="pln"> value</span><span class="pun">;</span></li><li class="L7"><span class="pun">}</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="typ">GLuint</span><span class="pln"> SDL_GL_LoadTexture</span><span class="pun">(</span><span class="pln">SDL_Surface </span><span class="pun">*</span><span class="pln">surface</span><span class="pun">,</span><span class="pln"> </span><span class="typ">GLfloat</span><span class="pln"> </span><span class="pun">*</span><span class="pln">texcoord</span><span class="pun">)</span></li><li class="L0"><span class="pun">{</span></li><li class="L1"><span class="pln">	</span><span class="typ">GLuint</span><span class="pln"> texture</span><span class="pun">;</span></li><li class="L2"><span class="pln">	</span><span class="kwd">int</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> h</span><span class="pun">;</span></li><li class="L3"><span class="pln">	SDL_Surface </span><span class="pun">*</span><span class="pln">image</span><span class="pun">;</span></li><li class="L4"><span class="pln">	SDL_Rect area</span><span class="pun">;</span></li><li class="L5"><span class="pln">	</span><span class="typ">Uint32</span><span class="pln"> saved_flags</span><span class="pun">;</span></li><li class="L6"><span class="pln">	</span><span class="typ">Uint8</span><span class="pln">  saved_alpha</span><span class="pun">;</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">	w </span><span class="pun">=</span><span class="pln"> power_of_two</span><span class="pun">(</span><span class="pln">surface</span><span class="pun">-&gt;</span><span class="pln">w</span><span class="pun">);</span></li><li class="L9"><span class="pln">	h </span><span class="pun">=</span><span class="pln"> power_of_two</span><span class="pun">(</span><span class="pln">surface</span><span class="pun">-&gt;</span><span class="pln">h</span><span class="pun">);</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">	texcoord</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">			</span><span class="com">/* Min X */</span></li><li class="L2"><span class="pln">	texcoord</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">			</span><span class="com">/* Min Y */</span></li><li class="L3"><span class="pln">	texcoord</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">GLfloat</span><span class="pun">)</span><span class="pln">surface</span><span class="pun">-&gt;</span><span class="pln">w </span><span class="pun">/</span><span class="pln"> w</span><span class="pun">;</span><span class="pln">	</span><span class="com">/* Max X */</span></li><li class="L4"><span class="pln">	texcoord</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">GLfloat</span><span class="pun">)</span><span class="pln">surface</span><span class="pun">-&gt;</span><span class="pln">h </span><span class="pun">/</span><span class="pln"> h</span><span class="pun">;</span><span class="pln">	</span><span class="com">/* Max Y */</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">	image </span><span class="pun">=</span><span class="pln"> SDL_CreateRGBSurface</span><span class="pun">(</span><span class="pln">SDL_SWSURFACE</span><span class="pun">,</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> h</span><span class="pun">,</span><span class="pln"> </span><span class="lit">32</span><span class="pun">,</span></li><li class="L7"><span class="com">#if SDL_BYTEORDER == SDL_LIL_ENDIAN /* OpenGL RGBA masks */</span></li><li class="L8"><span class="pln">			</span><span class="lit">0x000000FF</span><span class="pun">,</span></li><li class="L9"><span class="pln">			</span><span class="lit">0x0000FF00</span><span class="pun">,</span></li><li class="L0"><span class="pln">			</span><span class="lit">0x00FF0000</span><span class="pun">,</span></li><li class="L1"><span class="pln">			</span><span class="lit">0xFF000000</span></li><li class="L2"><span class="com">#else</span></li><li class="L3"><span class="pln">			</span><span class="lit">0xFF000000</span><span class="pun">,</span></li><li class="L4"><span class="pln">			</span><span class="lit">0x00FF0000</span><span class="pun">,</span></li><li class="L5"><span class="pln">			</span><span class="lit">0x0000FF00</span><span class="pun">,</span></li><li class="L6"><span class="pln">			</span><span class="lit">0x000000FF</span></li><li class="L7"><span class="com">#endif</span></li><li class="L8"><span class="pln">		       </span><span class="pun">);</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">image </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">	saved_flags </span><span class="pun">=</span><span class="pln"> surface</span><span class="pun">-&gt;</span><span class="pln">flags</span><span class="pun">&amp;(</span><span class="pln">SDL_SRCALPHA</span><span class="pun">|</span><span class="pln">SDL_RLEACCELOK</span><span class="pun">);</span></li><li class="L3"><span class="pln">	saved_alpha </span><span class="pun">=</span><span class="pln"> surface</span><span class="pun">-&gt;</span><span class="pln">format</span><span class="pun">-&gt;</span><span class="pln">alpha</span><span class="pun">;</span></li><li class="L4"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">saved_flags </span><span class="pun">&amp;</span><span class="pln"> SDL_SRCALPHA</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> SDL_SRCALPHA</span><span class="pun">)</span><span class="pln"> SDL_SetAlpha</span><span class="pun">(</span><span class="pln">surface</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">	</span><span class="com">/* Copy the surface into the GL texture image */</span></li><li class="L7"><span class="pln">	area</span><span class="pun">.</span><span class="pln">x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L8"><span class="pln">	area</span><span class="pun">.</span><span class="pln">y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L9"><span class="pln">	area</span><span class="pun">.</span><span class="pln">w </span><span class="pun">=</span><span class="pln"> surface</span><span class="pun">-&gt;</span><span class="pln">w</span><span class="pun">;</span></li><li class="L0"><span class="pln">	area</span><span class="pun">.</span><span class="pln">h </span><span class="pun">=</span><span class="pln"> surface</span><span class="pun">-&gt;</span><span class="pln">h</span><span class="pun">;</span></li><li class="L1"><span class="pln">	SDL_BlitSurface</span><span class="pun">(</span><span class="pln">surface</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">area</span><span class="pun">,</span><span class="pln"> image</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">area</span><span class="pun">);</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">	</span><span class="com">/* Restore the alpha blending attributes */</span></li><li class="L4"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">saved_flags </span><span class="pun">&amp;</span><span class="pln"> SDL_SRCALPHA</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> SDL_SRCALPHA</span><span class="pun">)</span><span class="pln"> SDL_SetAlpha</span><span class="pun">(</span><span class="pln">surface</span><span class="pun">,</span><span class="pln"> saved_flags</span><span class="pun">,</span><span class="pln"> saved_alpha</span><span class="pun">);</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">	</span><span class="com">/* Create an OpenGL texture for the image */</span></li><li class="L7"><span class="pln">	glGenTextures</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">texture</span><span class="pun">);</span></li><li class="L8"><span class="pln">	glBindTexture</span><span class="pun">(</span><span class="pln">GL_TEXTURE_2D</span><span class="pun">,</span><span class="pln"> texture</span><span class="pun">);</span></li><li class="L9"><span class="pln">	glTexParameteri</span><span class="pun">(</span><span class="pln">GL_TEXTURE_2D</span><span class="pun">,</span><span class="pln"> GL_TEXTURE_MAG_FILTER</span><span class="pun">,</span><span class="pln"> GL_NEAREST</span><span class="pun">);</span></li><li class="L0"><span class="pln">	glTexParameteri</span><span class="pun">(</span><span class="pln">GL_TEXTURE_2D</span><span class="pun">,</span><span class="pln"> GL_TEXTURE_MIN_FILTER</span><span class="pun">,</span><span class="pln"> GL_NEAREST</span><span class="pun">);</span></li><li class="L1"><span class="pln">	glTexImage2D</span><span class="pun">(</span><span class="pln">GL_TEXTURE_2D</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> GL_RGBA</span><span class="pun">,</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> h</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> GL_RGBA</span><span class="pun">,</span><span class="pln"> GL_UNSIGNED_BYTE</span><span class="pun">,</span><span class="pln"> image</span><span class="pun">-&gt;</span><span class="pln">pixels</span><span class="pun">);</span></li><li class="L2"><span class="pln">	SDL_FreeSurface</span><span class="pun">(</span><span class="pln">image</span><span class="pun">);</span><span class="pln"> </span><span class="com">/* No longer needed */</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">	</span><span class="kwd">return</span><span class="pln"> texture</span><span class="pun">;</span></li><li class="L5"><span class="pun">}</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">TTF_Font </span><span class="pun">*</span><span class="pln">font</span><span class="pun">;</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="kwd">void</span><span class="pln"> </span><span class="typ">InitFont</span><span class="pun">()</span></li><li class="L0"><span class="pun">{</span></li><li class="L1"><span class="pln">	font </span><span class="pun">=</span><span class="pln"> TTF_OpenFont</span><span class="pun">(</span><span class="str">"fonts/arial.ttf"</span><span class="pun">,</span><span class="pln"> FONT_SIZE</span><span class="pun">);</span></li><li class="L2"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">font </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></li><li class="L3"><span class="pln">	</span><span class="pun">{</span></li><li class="L4"><span class="pln">		printf</span><span class="pun">(</span><span class="str">"TTF_OpenFont: %s\n"</span><span class="pun">,</span><span class="pln"> SDL_GetError</span><span class="pun">());</span></li><li class="L5"><span class="pln">		</span><span class="kwd">return</span><span class="pun">;</span></li><li class="L6"><span class="pln">	</span><span class="pun">}</span></li><li class="L7"><span class="pun">}</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="kwd">void</span><span class="pln"> </span><span class="typ">FreeFont</span><span class="pun">()</span></li><li class="L0"><span class="pun">{</span></li><li class="L1"><span class="pln">	TTF_CloseFont</span><span class="pun">(</span><span class="pln">font</span><span class="pun">);</span></li><li class="L2"><span class="pun">}</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="kwd">void</span><span class="pln"> glPrint</span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> message</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> SDL_Color color</span><span class="pun">)</span></li><li class="L5"><span class="pun">{</span></li><li class="L6"><span class="pln">	</span><span class="kwd">int</span><span class="pln"> w</span><span class="pun">,</span><span class="pln"> h</span><span class="pun">;</span></li><li class="L7"><span class="pln">	</span><span class="typ">GLfloat</span><span class="pln"> texcoord</span><span class="pun">[</span><span class="lit">4</span><span class="pun">];</span></li><li class="L8"><span class="pln">	</span><span class="typ">GLfloat</span><span class="pln"> texMinX</span><span class="pun">,</span><span class="pln"> texMinY</span><span class="pun">;</span></li><li class="L9"><span class="pln">	</span><span class="typ">GLfloat</span><span class="pln"> texMaxX</span><span class="pun">,</span><span class="pln"> texMaxY</span><span class="pun">;</span></li><li class="L0"><span class="pln">	SDL_Surface </span><span class="pun">*</span><span class="pln">text</span><span class="pun">;</span></li><li class="L1"><span class="pln">	</span><span class="typ">GLuint</span><span class="pln"> fonttexture</span><span class="pun">;</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">	text </span><span class="pun">=</span><span class="pln"> TTF_RenderText_Blended</span><span class="pun">(</span><span class="pln">font</span><span class="pun">,</span><span class="pln"> message</span><span class="pun">.</span><span class="pln">c_str</span><span class="pun">(),</span><span class="pln"> color</span><span class="pun">);</span></li><li class="L4"><span class="pln">	fonttexture </span><span class="pun">=</span><span class="pln"> SDL_GL_LoadTexture</span><span class="pun">(</span><span class="pln">text</span><span class="pun">,</span><span class="pln"> texcoord</span><span class="pun">);</span></li><li class="L5"><span class="pln">	SDL_FreeSurface</span><span class="pun">(</span><span class="pln">text</span><span class="pun">);</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">	w </span><span class="pun">=</span><span class="pln"> text</span><span class="pun">-&gt;</span><span class="pln">w</span><span class="pun">;</span></li><li class="L8"><span class="pln">	h </span><span class="pun">=</span><span class="pln"> text</span><span class="pun">-&gt;</span><span class="pln">h</span><span class="pun">;</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">	texMinX </span><span class="pun">=</span><span class="pln"> texcoord</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span></li><li class="L1"><span class="pln">	texMinY </span><span class="pun">=</span><span class="pln"> texcoord</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span></li><li class="L2"><span class="pln">	texMaxX </span><span class="pun">=</span><span class="pln"> texcoord</span><span class="pun">[</span><span class="lit">2</span><span class="pun">];</span></li><li class="L3"><span class="pln">	texMaxY </span><span class="pun">=</span><span class="pln"> texcoord</span><span class="pun">[</span><span class="lit">3</span><span class="pun">];</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">	glBegin2D</span><span class="pun">();</span></li><li class="L6"><span class="pln">	glDisable</span><span class="pun">(</span><span class="pln">GL_LIGHTING</span><span class="pun">);</span></li><li class="L7"><span class="pln">	glBindTexture</span><span class="pun">(</span><span class="pln">GL_TEXTURE_2D</span><span class="pun">,</span><span class="pln"> fonttexture</span><span class="pun">);</span></li><li class="L8"><span class="pln">	glColor3f</span><span class="pun">(</span><span class="lit">1.0</span><span class="pun">,</span><span class="lit">1.0</span><span class="pun">,</span><span class="lit">1.0</span><span class="pun">);</span></li><li class="L9"><span class="pln">	glBegin</span><span class="pun">(</span><span class="pln">GL_TRIANGLE_STRIP</span><span class="pun">);</span></li><li class="L0"><span class="pln">		glTexCoord2f</span><span class="pun">(</span><span class="pln">texMinX</span><span class="pun">,</span><span class="pln"> texMinY</span><span class="pun">);</span><span class="pln"> glVertex2i</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln">   y  </span><span class="pun">);</span></li><li class="L1"><span class="pln">		glTexCoord2f</span><span class="pun">(</span><span class="pln">texMaxX</span><span class="pun">,</span><span class="pln"> texMinY</span><span class="pun">);</span><span class="pln"> glVertex2i</span><span class="pun">(</span><span class="pln">x</span><span class="pun">+</span><span class="pln">w</span><span class="pun">,</span><span class="pln"> y  </span><span class="pun">);</span></li><li class="L2"><span class="pln">		glTexCoord2f</span><span class="pun">(</span><span class="pln">texMinX</span><span class="pun">,</span><span class="pln"> texMaxY</span><span class="pun">);</span><span class="pln"> glVertex2i</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln">   y</span><span class="pun">+</span><span class="pln">h</span><span class="pun">);</span></li><li class="L3"><span class="pln">		glTexCoord2f</span><span class="pun">(</span><span class="pln">texMaxX</span><span class="pun">,</span><span class="pln"> texMaxY</span><span class="pun">);</span><span class="pln"> glVertex2i</span><span class="pun">(</span><span class="pln">x</span><span class="pun">+</span><span class="pln">w</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">+</span><span class="pln">h</span><span class="pun">);</span></li><li class="L4"><span class="pln">	glEnd</span><span class="pun">();</span></li><li class="L5"><span class="pln">	glEnable</span><span class="pun">(</span><span class="pln">GL_LIGHTING</span><span class="pun">);</span></li><li class="L6"><span class="pln">	glEnd2D</span><span class="pun">();</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">	glDeleteTextures</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">fonttexture</span><span class="pun">);</span></li><li class="L9"><span class="pun">}</span></li><li class="L0"><span class="pln">                 </span></li></ol></pre>
                 <h5>font.h</h5>
                 <pre class="prettyprint linenums" id="gl_plot_font_h"><ol class="linenums"><li class="L0"><span class="com">#ifndef</span><span class="pln"> FONT_H_</span></li><li class="L1"><span class="com">#define</span><span class="pln"> FONT_H_</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;string&gt;</span></li><li class="L4"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;GL/gl.h&gt;</span></li><li class="L5"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;GL/glu.h&gt;</span></li><li class="L6"><span class="com">#include</span><span class="pln"> </span><span class="str">"SDL.h"</span></li><li class="L7"><span class="com">#include</span><span class="pln"> </span><span class="str">"SDL_ttf.h"</span></li><li class="L8"><span class="com">#include</span><span class="pln"> </span><span class="str">"config.h"</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="kwd">void</span><span class="pln"> glPrint</span><span class="pun">(</span><span class="pln">std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> message</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> SDL_Color color</span><span class="pun">);</span></li><li class="L1"><span class="kwd">void</span><span class="pln"> </span><span class="typ">InitFont</span><span class="pun">();</span></li><li class="L2"><span class="kwd">void</span><span class="pln"> </span><span class="typ">FreeFont</span><span class="pun">();</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="kwd">void</span><span class="pln"> glBegin2D</span><span class="pun">();</span></li><li class="L5"><span class="kwd">void</span><span class="pln"> glEnd2D</span><span class="pun">();</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="kwd">extern</span><span class="pln"> SDL_Color red</span><span class="pun">,</span><span class="pln"> blue</span><span class="pun">;</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="com">#endif</span></li><li class="L0"><span class="pln">                 </span></li></ol></pre>
                 <h5>glyphs.h</h5>
                 <pre class="prettyprint linenums" id="gl_plot_glyphs_h"><ol class="linenums"><li class="L0"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> num0</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span></li><li class="L1"><span class="pun">{</span></li><li class="L2"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span></li><li class="L2"><span class="pun">};</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> num1</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span></li><li class="L5"><span class="pun">{</span></li><li class="L6"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span></li><li class="L6"><span class="pun">};</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> num2</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span></li><li class="L9"><span class="pun">{</span></li><li class="L0"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L3"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L4"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L5"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L6"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span></li><li class="L0"><span class="pun">};</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> num3</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span></li><li class="L3"><span class="pun">{</span></li><li class="L4"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span></li><li class="L4"><span class="pun">};</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> num4</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span></li><li class="L7"><span class="pun">{</span></li><li class="L8"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span></li><li class="L8"><span class="pun">};</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> num5</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span></li><li class="L1"><span class="pun">{</span></li><li class="L2"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L7"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L8"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L9"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L0"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span></li><li class="L2"><span class="pun">};</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> num6</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span></li><li class="L5"><span class="pun">{</span></li><li class="L6"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L1"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L2"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L3"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L4"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span></li><li class="L6"><span class="pun">};</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> num7</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span></li><li class="L9"><span class="pun">{</span></li><li class="L0"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span></li><li class="L0"><span class="pun">};</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> num8</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span></li><li class="L3"><span class="pun">{</span></li><li class="L4"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span></li><li class="L4"><span class="pun">};</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> num9</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span></li><li class="L7"><span class="pun">{</span></li><li class="L8"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L8"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L9"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L0"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L1"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L2"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L3"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span></li><li class="L8"><span class="pun">};</span></li><li class="L9"><span class="pln">                 </span></li></ol></pre>
                 <h5>main.cpp</h5>
                 <pre class="prettyprint linenums" id="gl_plot_main_cpp"><ol class="linenums"><li class="L0"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdio.h&gt;</span></li><li class="L1"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdlib.h&gt;</span></li><li class="L2"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;GL/gl.h&gt;</span></li><li class="L3"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;GL/glu.h&gt;</span></li><li class="L4"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;time.h&gt;</span></li><li class="L5"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;rfftw.h&gt;</span></li><li class="L6"><span class="com">#include</span><span class="pln"> </span><span class="str">"SDL.h"</span></li><li class="L7"><span class="com">#include</span><span class="pln"> </span><span class="str">"font.h"</span></li><li class="L8"><span class="com">#include</span><span class="pln"> </span><span class="str">"debug.h"</span></li><li class="L9"><span class="com">#include</span><span class="pln"> </span><span class="str">"serial.h"</span></li><li class="L0"><span class="com">#include</span><span class="pln"> </span><span class="str">"config.h"</span></li><li class="L1"><span class="com">#include</span><span class="pln"> </span><span class="str">"pong.h"</span></li><li class="L2"><span class="com">#include</span><span class="pln"> </span><span class="str">"p300.h"</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="com">// drawing stuff</span></li><li class="L5"><span class="pln">SDL_Surface </span><span class="pun">*</span><span class="pln">surface</span><span class="pun">;</span></li><li class="L6"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> point_buffer</span><span class="pun">[</span><span class="pln">X_SIZE</span><span class="pun">],</span><span class="pln"> running_buffer</span><span class="pun">[</span><span class="pln">X_SIZE</span><span class="pun">],</span><span class="pln"> xline</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="com">// logging stuff</span></li><li class="L9"><span class="pln">FILE</span><span class="pun">*</span><span class="pln"> logFile </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="com">// FFT stuff</span></li><li class="L2"><span class="pln">fftw_real </span><span class="kwd">in</span><span class="pun">[</span><span class="pln">X_SIZE</span><span class="pun">],</span><span class="pln"> </span><span class="kwd">out</span><span class="pun">[</span><span class="pln">X_SIZE</span><span class="pun">],</span><span class="pln"> power_spectrum</span><span class="pun">[</span><span class="pln">X_SIZE</span><span class="pun">/</span><span class="lit">2</span><span class="pun">+</span><span class="lit">1</span><span class="pun">];</span></li><li class="L3"><span class="pln">rfftw_plan p</span><span class="pun">;</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="kwd">void</span><span class="pln"> </span><span class="typ">Quit</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> returnCode</span><span class="pun">)</span></li><li class="L6"><span class="pun">{</span></li><li class="L7"><span class="pln">	SDL_ShowCursor</span><span class="pun">(</span><span class="pln">SDL_ENABLE</span><span class="pun">);</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">    printf</span><span class="pun">(</span><span class="str">"Quiting...\n"</span><span class="pun">);</span></li><li class="L0"><span class="pln">    closeSerial</span><span class="pun">();</span></li><li class="L1"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">logFile</span><span class="pun">)</span><span class="pln"> fclose</span><span class="pun">(</span><span class="pln">logFile</span><span class="pun">);</span></li><li class="L2"><span class="pln">    rfftw_destroy_plan</span><span class="pun">(</span><span class="pln">p</span><span class="pun">);</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">    </span><span class="typ">FreeFont</span><span class="pun">();</span></li><li class="L5"><span class="pln">    SDL_Quit</span><span class="pun">();</span></li><li class="L6"><span class="pln">    </span><span class="kwd">exit</span><span class="pun">(</span><span class="pln">returnCode</span><span class="pun">);</span></li><li class="L7"><span class="pun">}</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="kwd">int</span><span class="pln"> resizeWindow</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> width</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> height</span><span class="pun">)</span></li><li class="L0"><span class="pun">{</span></li><li class="L1"><span class="pln">    </span><span class="typ">GLfloat</span><span class="pln"> ratio</span><span class="pun">;</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">height </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> height </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">    ratio </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">GLfloat</span><span class="pun">)</span><span class="pln">width </span><span class="pun">/</span><span class="pln"> </span><span class="pun">(</span><span class="typ">GLfloat</span><span class="pun">)</span><span class="pln">height</span><span class="pun">;</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">    glViewport</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="typ">GLsizei</span><span class="pun">)</span><span class="pln">width</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="typ">GLsizei</span><span class="pun">)</span><span class="pln">height</span><span class="pun">);</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">    glMatrixMode</span><span class="pun">(</span><span class="pln">GL_PROJECTION</span><span class="pun">);</span></li><li class="L0"><span class="pln">    glLoadIdentity</span><span class="pun">();</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">    </span><span class="com">//gluPerspective(45.0f, ratio, 0.1f, 100.0f);</span></li><li class="L3"><span class="pln">    gluOrtho2D</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> X_SIZE</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> ADC_RESOLUTION</span><span class="pun">);</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">    glMatrixMode</span><span class="pun">(</span><span class="pln">GL_MODELVIEW</span><span class="pun">);</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">    glLoadIdentity</span><span class="pun">();</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> TRUE</span><span class="pun">;</span></li><li class="L0"><span class="pun">}</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="kwd">void</span><span class="pln"> handleKeyPress</span><span class="pun">(</span><span class="pln">SDL_keysym </span><span class="pun">*</span><span class="pln">keysym</span><span class="pun">)</span></li><li class="L3"><span class="pun">{</span></li><li class="L4"><span class="pln">    </span><span class="kwd">switch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">keysym</span><span class="pun">-&gt;</span><span class="pln">sym</span><span class="pun">)</span></li><li class="L5"><span class="pln">	</span><span class="pun">{</span></li><li class="L6"><span class="pln">	</span><span class="kwd">case</span><span class="pln"> SDLK_ESCAPE</span><span class="pun">:</span></li><li class="L7"><span class="pln">	    </span><span class="typ">Quit</span><span class="pun">(</span><span class="lit">0</span><span class="pun">);</span></li><li class="L8"><span class="pln">	    </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L9"><span class="pln">	</span><span class="kwd">case</span><span class="pln"> SDLK_F1</span><span class="pun">:</span></li><li class="L0"><span class="pln">	    SDL_WM_ToggleFullScreen</span><span class="pun">(</span><span class="pln">surface</span><span class="pun">);</span></li><li class="L1"><span class="pln">	    </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L2"><span class="pln">	</span><span class="kwd">default</span><span class="pun">:</span></li><li class="L3"><span class="pln">	    </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L4"><span class="pln">	</span><span class="pun">}</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">    </span><span class="kwd">return</span><span class="pun">;</span></li><li class="L7"><span class="pun">}</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="kwd">int</span><span class="pln"> initGL</span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span></li><li class="L0"><span class="pun">{</span></li><li class="L1"><span class="pln">    glShadeModel</span><span class="pun">(</span><span class="pln">GL_SMOOTH</span><span class="pun">);</span></li><li class="L2"><span class="pln">    glClearColor</span><span class="pun">(</span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">);</span></li><li class="L3"><span class="pln">    glClearDepth</span><span class="pun">(</span><span class="lit">1.0f</span><span class="pun">);</span></li><li class="L4"><span class="pln">    glEnable</span><span class="pun">(</span><span class="pln">GL_DEPTH_TEST</span><span class="pun">);</span></li><li class="L5"><span class="pln">    glDepthFunc</span><span class="pun">(</span><span class="pln">GL_LEQUAL</span><span class="pun">);</span></li><li class="L6"><span class="pln">    glHint</span><span class="pun">(</span><span class="pln">GL_PERSPECTIVE_CORRECTION_HINT</span><span class="pun">,</span><span class="pln"> GL_NICEST</span><span class="pun">);</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> TRUE</span><span class="pun">;</span></li><li class="L9"><span class="pun">}</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="kwd">int</span><span class="pln"> drawGLScene</span><span class="pun">(</span><span class="kwd">void</span><span class="pun">)</span></li><li class="L2"><span class="pun">{</span></li><li class="L3"><span class="pln">    </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">GLint</span><span class="pln"> T0 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Frames</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">    glClear</span><span class="pun">(</span><span class="pln">GL_COLOR_BUFFER_BIT </span><span class="pun">|</span><span class="pln"> GL_DEPTH_BUFFER_BIT</span><span class="pun">);</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">    glLoadIdentity</span><span class="pun">();</span></li><li class="L8"><span class="pln">    glTranslatef</span><span class="pun">(</span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">);</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> point_buffer</span><span class="pun">[</span><span class="pln">xline</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> readSerialValue</span><span class="pun">();</span></li><li class="L1"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">X_SIZE</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L2"><span class="pln">    </span><span class="pun">{</span></li><li class="L3"><span class="pln">        running_buffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> running_buffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></li><li class="L4"><span class="pln">    </span><span class="pun">}</span></li><li class="L5"><span class="pln">    running_buffer</span><span class="pun">[</span><span class="pln">X_SIZE</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> point_buffer</span><span class="pun">[</span><span class="pln">xline</span><span class="pun">];</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">    </span><span class="com">// log the output to a file</span></li><li class="L8"><span class="pln">    fprintf</span><span class="pun">(</span><span class="pln">logFile</span><span class="pun">,</span><span class="pln"> </span><span class="str">"%d,%d\n"</span><span class="pun">,</span><span class="pln"> time</span><span class="pun">(</span><span class="pln">NULL</span><span class="pun">),</span><span class="pln"> point_buffer</span><span class="pun">[</span><span class="pln">xline</span><span class="pun">]);</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">    </span><span class="com">// send sample to P300 buffer</span></li><li class="L1"><span class="pln">    p300AddSample</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">    xline</span><span class="pun">++;</span></li><li class="L4"><span class="pln">    xline </span><span class="pun">%=</span><span class="pln"> X_SIZE</span><span class="pun">;</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">X_SIZE</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L7"><span class="pln">        </span><span class="pun">{</span></li><li class="L8"><span class="pln">            </span><span class="kwd">in</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> running_buffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> ADC_RESOLUTION</span><span class="pun">/</span><span class="lit">2</span><span class="pun">;</span></li><li class="L9"><span class="pln">        </span><span class="pun">}</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">        rfftw_one</span><span class="pun">(</span><span class="pln">p</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">in</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">out</span><span class="pun">);</span></li><li class="L2"><span class="pln">        power_spectrum</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">out</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]*</span><span class="kwd">out</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">  </span><span class="com">/* DC component */</span></li><li class="L3"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">X_SIZE</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln">  </span><span class="com">/* (k &lt; N/2 rounded up) */</span></li><li class="L4"><span class="pln">        </span><span class="pun">{</span></li><li class="L5"><span class="pln">            power_spectrum</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">out</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]*</span><span class="kwd">out</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="kwd">out</span><span class="pun">[</span><span class="pln">X_SIZE</span><span class="pun">-</span><span class="pln">i</span><span class="pun">]*</span><span class="kwd">out</span><span class="pun">[</span><span class="pln">X_SIZE</span><span class="pun">-</span><span class="pln">i</span><span class="pun">];</span></li><li class="L6"><span class="pln">            </span><span class="com">//printf("i=%d power_spectrum[i]=%f\n", i, power_spectrum[i]);</span></li><li class="L7"><span class="pln">        </span><span class="pun">}</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">X_SIZE </span><span class="pun">%</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="com">/* N is even */</span></li><li class="L0"><span class="pln">        </span><span class="pun">{</span></li><li class="L1"><span class="pln">            power_spectrum</span><span class="pun">[</span><span class="pln">X_SIZE</span><span class="pun">/</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">out</span><span class="pun">[</span><span class="pln">X_SIZE</span><span class="pun">/</span><span class="lit">2</span><span class="pun">]*</span><span class="kwd">out</span><span class="pun">[</span><span class="pln">X_SIZE</span><span class="pun">/</span><span class="lit">2</span><span class="pun">];</span><span class="pln">  </span><span class="com">/* Nyquist freq. */</span></li><li class="L2"><span class="pln">        </span><span class="pun">}</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">    </span><span class="com">// draw FFT</span></li><li class="L5"><span class="pln">    glBegin</span><span class="pun">(</span><span class="pln">GL_LINES</span><span class="pun">);</span></li><li class="L6"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;=</span><span class="pln">X_SIZE</span><span class="pun">/</span><span class="lit">2</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L7"><span class="pln">        </span><span class="pun">{</span></li><li class="L8"><span class="pln">            glColor4f</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">);</span></li><li class="L9"><span class="pln">            glVertex2i</span><span class="pun">(</span><span class="pln">i</span><span class="pun">*</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></li><li class="L0"><span class="pln">            glVertex2i</span><span class="pun">(</span><span class="pln">i</span><span class="pun">*</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> power_spectrum</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]/</span><span class="pln">FFT_SCALE_FACTOR</span><span class="pun">);</span></li><li class="L1"><span class="pln">            glVertex2i</span><span class="pun">(</span><span class="pln">i</span><span class="pun">*</span><span class="lit">2</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></li><li class="L2"><span class="pln">            glVertex2i</span><span class="pun">(</span><span class="pln">i</span><span class="pun">*</span><span class="lit">2</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> power_spectrum</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]/</span><span class="pln">FFT_SCALE_FACTOR</span><span class="pun">);</span></li><li class="L3"><span class="pln">        </span><span class="pun">}</span></li><li class="L4"><span class="pln">    glEnd</span><span class="pun">();</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">    </span><span class="com">// draw points here</span></li><li class="L7"><span class="pln">    glBegin</span><span class="pun">(</span><span class="pln">GL_POINTS</span><span class="pun">);</span></li><li class="L8"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">X_SIZE</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L9"><span class="pln">        </span><span class="pun">{</span></li><li class="L0"><span class="pln">            glColor4f</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">);</span></li><li class="L1"><span class="pln">            glVertex2f</span><span class="pun">(</span><span class="pln">i</span><span class="pun">,</span><span class="pln"> running_buffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]*((</span><span class="kwd">float</span><span class="pun">)</span><span class="pln">SCREEN_HEIGHT</span><span class="pun">/</span><span class="pln">ADC_RESOLUTION</span><span class="pun">));</span></li><li class="L2"><span class="pln">        </span><span class="pun">}</span></li><li class="L3"><span class="pln">    glEnd</span><span class="pun">();</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">    glBegin</span><span class="pun">(</span><span class="pln">GL_LINES</span><span class="pun">);</span></li><li class="L6"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">X_SIZE</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L7"><span class="pln">        </span><span class="pun">{</span></li><li class="L8"><span class="pln">            glColor4f</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">);</span></li><li class="L9"><span class="pln">            glVertex2f</span><span class="pun">(</span><span class="pln">i</span><span class="pun">,</span><span class="pln"> running_buffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]*((</span><span class="kwd">float</span><span class="pun">)</span><span class="pln">SCREEN_HEIGHT</span><span class="pun">/</span><span class="pln">ADC_RESOLUTION</span><span class="pun">));</span></li><li class="L0"><span class="pln">            glVertex2f</span><span class="pun">(</span><span class="pln">i</span><span class="pun">,</span><span class="pln"> running_buffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]*((</span><span class="kwd">float</span><span class="pun">)</span><span class="pln">SCREEN_HEIGHT</span><span class="pun">/</span><span class="pln">ADC_RESOLUTION</span><span class="pun">));</span></li><li class="L1"><span class="pln">        </span><span class="pun">}</span></li><li class="L2"><span class="pln">    glEnd</span><span class="pun">();</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">    </span><span class="kwd">float</span><span class="pln"> delta</span><span class="pun">=</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> theta</span><span class="pun">=</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> alpha</span><span class="pun">=</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> beta</span><span class="pun">=</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> gamma</span><span class="pun">=</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> mu</span><span class="pun">=</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> total</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;(</span><span class="pln">X_SIZE</span><span class="pun">/</span><span class="lit">2</span><span class="pun">);</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> total </span><span class="pun">+=</span><span class="pln"> power_spectrum</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></li><li class="L7"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="lit">4</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> delta </span><span class="pun">+=</span><span class="pln"> power_spectrum</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></li><li class="L8"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">4</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;=</span><span class="lit">8</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> theta </span><span class="pun">+=</span><span class="pln"> power_spectrum</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></li><li class="L9"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">8</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;=</span><span class="lit">13</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> alpha </span><span class="pun">+=</span><span class="pln"> power_spectrum</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></li><li class="L0"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">14</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;=</span><span class="lit">30</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> beta </span><span class="pun">+=</span><span class="pln"> power_spectrum</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></li><li class="L1"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">30</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;=</span><span class="lit">100</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> gamma </span><span class="pun">+=</span><span class="pln"> power_spectrum</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></li><li class="L2"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">8</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;=</span><span class="lit">13</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> mu </span><span class="pun">+=</span><span class="pln"> power_spectrum</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></li><li class="L3"><span class="pln">    delta </span><span class="pun">/=</span><span class="pln"> total</span><span class="pun">;</span><span class="pln"> theta </span><span class="pun">/=</span><span class="pln"> total</span><span class="pun">;</span><span class="pln"> alpha </span><span class="pun">/=</span><span class="pln"> total</span><span class="pun">;</span><span class="pln"> beta </span><span class="pun">/=</span><span class="pln"> total</span><span class="pun">;</span><span class="pln"> gamma </span><span class="pun">/=</span><span class="pln"> total</span><span class="pun">;</span><span class="pln"> mu </span><span class="pun">/=</span><span class="pln"> total</span><span class="pun">;</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">    </span><span class="com">// do BCI paddle control</span></li><li class="L6"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> THETA_MIN</span><span class="pun">=</span><span class="lit">0.01f</span><span class="pun">,</span><span class="pln"> THETA_MAX</span><span class="pun">=</span><span class="lit">0.04f</span><span class="pun">;</span></li><li class="L7"><span class="pln">    posy </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">SCREEN_HEIGHT </span><span class="pun">-</span><span class="pln"> </span><span class="lit">64</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="pln">theta </span><span class="pun">-</span><span class="pln"> THETA_MIN</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="pun">(</span><span class="pln">THETA_MAX </span><span class="pun">-</span><span class="pln"> THETA_MIN</span><span class="pun">);</span></li><li class="L8"><span class="pln">    </span><span class="com">// TODO: low-pass filter</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="com">/*    // 0.03 BELOW THAT MOVE PADDLE DOWN, OTHERWISE MOVE UP</span></li><li class="L1"><span class="com">    const float MU_THRESHOLD = 0.03f;</span></li><li class="L2"><span class="com">    if (mu &lt; MU_THRESHOLD)</span></li><li class="L3"><span class="com">        paddle1yvel = 0.1f;</span></li><li class="L4"><span class="com">    else</span></li><li class="L5"><span class="com">        paddle1yvel = -0.1f; */</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">    </span><span class="com">// update and draw pong game state</span></li><li class="L8"><span class="pln">	pongUpdateAndRender</span><span class="pun">();</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">    </span><span class="com">// update and draw P300 state machine</span></li><li class="L1"><span class="pln">    p300UpdateAndRender</span><span class="pun">();</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">    </span><span class="com">// draw text</span></li><li class="L4"><span class="pln">    glPrint</span><span class="pun">(</span><span class="pln">format</span><span class="pun">(</span><span class="str">"Delta=%f; Theta=%f; Alpha=%f"</span><span class="pun">,</span><span class="pln"> delta</span><span class="pun">,</span><span class="pln"> theta</span><span class="pun">,</span><span class="pln"> alpha</span><span class="pun">),</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> blue</span><span class="pun">);</span></li><li class="L5"><span class="pln">    glPrint</span><span class="pun">(</span><span class="pln">format</span><span class="pun">(</span><span class="str">"Beta=%f; Gamma=%f; Mu=%f"</span><span class="pun">,</span><span class="pln"> beta</span><span class="pun">,</span><span class="pln"> gamma</span><span class="pun">,</span><span class="pln"> mu</span><span class="pun">),</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">30</span><span class="pun">,</span><span class="pln"> blue</span><span class="pun">);</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">    SDL_GL_SwapBuffers</span><span class="pun">();</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">    </span><span class="typ">Frames</span><span class="pun">++;</span></li><li class="L0"><span class="pln">    </span><span class="pun">{</span></li><li class="L1"><span class="pln">        </span><span class="typ">GLint</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> SDL_GetTicks</span><span class="pun">();</span></li><li class="L2"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">t </span><span class="pun">-</span><span class="pln"> T0 </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">5000</span><span class="pun">)</span></li><li class="L3"><span class="pln">        </span><span class="pun">{</span></li><li class="L4"><span class="pln">            </span><span class="typ">GLfloat</span><span class="pln"> seconds </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">t </span><span class="pun">-</span><span class="pln"> T0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">1000.0</span><span class="pun">;</span></li><li class="L5"><span class="pln">            </span><span class="typ">GLfloat</span><span class="pln"> fps </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Frames</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> seconds</span><span class="pun">;</span></li><li class="L6"><span class="pln">            printf</span><span class="pun">(</span><span class="str">"%d frames in %g seconds = %g FPS\n"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Frames</span><span class="pun">,</span><span class="pln"> seconds</span><span class="pun">,</span><span class="pln"> fps</span><span class="pun">);</span></li><li class="L7"><span class="pln">            T0 </span><span class="pun">=</span><span class="pln"> t</span><span class="pun">;</span></li><li class="L8"><span class="pln">            </span><span class="typ">Frames</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L9"><span class="pln">        </span><span class="pun">}</span></li><li class="L0"><span class="pln">    </span><span class="pun">}</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> TRUE</span><span class="pun">;</span></li><li class="L3"><span class="pun">}</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="kwd">int</span><span class="pln"> main</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> argc</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">**</span><span class="pln">argv</span><span class="pun">)</span></li><li class="L6"><span class="pun">{</span></li><li class="L7"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">X_SIZE</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L8"><span class="pln">    </span><span class="pun">{</span></li><li class="L9"><span class="pln">        point_buffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> ADC_RESOLUTION</span><span class="pun">/</span><span class="lit">2</span><span class="pun">;</span><span class="pln"> </span><span class="com">//0;</span></li><li class="L0"><span class="pln">        running_buffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> ADC_RESOLUTION</span><span class="pun">/</span><span class="lit">2</span><span class="pun">;</span><span class="pln"> </span><span class="com">//0;</span></li><li class="L1"><span class="pln">    </span><span class="pun">}</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> videoFlags</span><span class="pun">;</span></li><li class="L4"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> </span><span class="kwd">done</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> FALSE</span><span class="pun">;</span></li><li class="L5"><span class="pln">    SDL_Event </span><span class="kwd">event</span><span class="pun">;</span></li><li class="L6"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> SDL_VideoInfo </span><span class="pun">*</span><span class="pln">videoInfo</span><span class="pun">;</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">SDL_Init</span><span class="pun">(</span><span class="pln">SDL_INIT_VIDEO</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></li><li class="L9"><span class="pln">	</span><span class="pun">{</span></li><li class="L0"><span class="pln">	    fprintf</span><span class="pun">(</span><span class="pln">stderr</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Video initialization failed: %s\n"</span><span class="pun">,</span><span class="pln"> SDL_GetError</span><span class="pun">());</span></li><li class="L1"><span class="pln">	    </span><span class="typ">Quit</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span></li><li class="L2"><span class="pln">	</span><span class="pun">}</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="com">#ifdef</span><span class="pln"> WIN32</span></li><li class="L5"><span class="pln">	freopen</span><span class="pun">(</span><span class="str">"CON"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"w"</span><span class="pun">,</span><span class="pln"> stdout</span><span class="pun">);</span></li><li class="L6"><span class="pln">    freopen</span><span class="pun">(</span><span class="str">"CON"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"w"</span><span class="pun">,</span><span class="pln"> stderr</span><span class="pun">);</span></li><li class="L7"><span class="com">#endif</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">    videoInfo </span><span class="pun">=</span><span class="pln"> SDL_GetVideoInfo</span><span class="pun">();</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">videoInfo</span><span class="pun">)</span></li><li class="L2"><span class="pln">	</span><span class="pun">{</span></li><li class="L3"><span class="pln">	    fprintf</span><span class="pun">(</span><span class="pln">stderr</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Video query failed: %s\n"</span><span class="pun">,</span><span class="pln"> SDL_GetError</span><span class="pun">());</span></li><li class="L4"><span class="pln">	    </span><span class="typ">Quit</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span></li><li class="L5"><span class="pln">	</span><span class="pun">}</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">    videoFlags  </span><span class="pun">=</span><span class="pln"> SDL_OPENGL</span><span class="pun">;</span></li><li class="L8"><span class="pln">    videoFlags </span><span class="pun">|=</span><span class="pln"> SDL_GL_DOUBLEBUFFER</span><span class="pun">;</span></li><li class="L9"><span class="pln">    videoFlags </span><span class="pun">|=</span><span class="pln"> SDL_HWPALETTE</span><span class="pun">;</span></li><li class="L0"><span class="pln">    videoFlags </span><span class="pun">|=</span><span class="pln"> SDL_RESIZABLE</span><span class="pun">;</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">videoInfo</span><span class="pun">-&gt;</span><span class="pln">hw_available</span><span class="pun">)</span></li><li class="L3"><span class="pln">        videoFlags </span><span class="pun">|=</span><span class="pln"> SDL_HWSURFACE</span><span class="pun">;</span></li><li class="L4"><span class="pln">    </span><span class="kwd">else</span></li><li class="L5"><span class="pln">        videoFlags </span><span class="pun">|=</span><span class="pln"> SDL_SWSURFACE</span><span class="pun">;</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">videoInfo</span><span class="pun">-&gt;</span><span class="pln">blit_hw</span><span class="pun">)</span></li><li class="L8"><span class="pln">        videoFlags </span><span class="pun">|=</span><span class="pln"> SDL_HWACCEL</span><span class="pun">;</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">    SDL_GL_SetAttribute</span><span class="pun">(</span><span class="pln">SDL_GL_DOUBLEBUFFER</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">    surface </span><span class="pun">=</span><span class="pln"> SDL_SetVideoMode</span><span class="pun">(</span><span class="pln">SCREEN_WIDTH</span><span class="pun">,</span><span class="pln"> SCREEN_HEIGHT</span><span class="pun">,</span><span class="pln"> SCREEN_BPP</span><span class="pun">,</span><span class="pln"> videoFlags</span><span class="pun">);</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">surface</span><span class="pun">)</span></li><li class="L5"><span class="pln">	</span><span class="pun">{</span></li><li class="L6"><span class="pln">	    fprintf</span><span class="pun">(</span><span class="pln">stderr</span><span class="pun">,</span><span class="pln">  </span><span class="str">"Video mode set failed: %s\n"</span><span class="pun">,</span><span class="pln"> SDL_GetError</span><span class="pun">());</span></li><li class="L7"><span class="pln">	    </span><span class="typ">Quit</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span></li><li class="L8"><span class="pln">	</span><span class="pun">}</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">    initGL</span><span class="pun">();</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">    resizeWindow</span><span class="pun">(</span><span class="pln">SCREEN_WIDTH</span><span class="pun">,</span><span class="pln"> SCREEN_HEIGHT</span><span class="pun">);</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">TTF_Init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span></li><li class="L5"><span class="pln">    </span><span class="pun">{</span></li><li class="L6"><span class="pln">        printf</span><span class="pun">(</span><span class="str">"Unable to initialize SDL_ttf: %s \n"</span><span class="pun">,</span><span class="pln"> TTF_GetError</span><span class="pun">());</span></li><li class="L7"><span class="pln">        </span><span class="typ">Quit</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span></li><li class="L8"><span class="pln">    </span><span class="pun">}</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">    </span><span class="com">// init font</span></li><li class="L1"><span class="pln">    </span><span class="typ">InitFont</span><span class="pun">();</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">    </span><span class="com">// open serial</span></li><li class="L4"><span class="pln">    openSerial</span><span class="pun">();</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">    </span><span class="com">// open log file</span></li><li class="L7"><span class="pln">    logFile </span><span class="pun">=</span><span class="pln"> fopen</span><span class="pun">(</span><span class="pln">LOG_FILENAME</span><span class="pun">,</span><span class="pln"> </span><span class="str">"w"</span><span class="pun">);</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">logFile </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></li><li class="L0"><span class="pln">    </span><span class="pun">{</span></li><li class="L1"><span class="pln">        fprintf</span><span class="pun">(</span><span class="pln">stderr</span><span class="pun">,</span><span class="pln"> </span><span class="str">"gl_plot main(): Can't open log output file %s!\n"</span><span class="pun">,</span><span class="pln"> LOG_FILENAME</span><span class="pun">);</span></li><li class="L2"><span class="pln">        </span><span class="typ">Quit</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span></li><li class="L3"><span class="pln">    </span><span class="pun">}</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">    </span><span class="com">// init FFT</span></li><li class="L6"><span class="pln">    printf</span><span class="pun">(</span><span class="str">"Initializing FFTW 2...\n"</span><span class="pun">);</span></li><li class="L7"><span class="pln">    p </span><span class="pun">=</span><span class="pln"> rfftw_create_plan</span><span class="pun">(</span><span class="pln">X_SIZE</span><span class="pun">,</span><span class="pln"> FFTW_REAL_TO_COMPLEX</span><span class="pun">,</span><span class="pln"> FFTW_ESTIMATE</span><span class="pun">);</span></li><li class="L8"><span class="pln">    printf</span><span class="pun">(</span><span class="str">"Done!\n"</span><span class="pun">);</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">    </span><span class="com">// init pong</span></li><li class="L1"><span class="pln">    printf</span><span class="pun">(</span><span class="str">"Initializing pong...\n"</span><span class="pun">);</span></li><li class="L2"><span class="pln">	srand</span><span class="pun">((</span><span class="kwd">unsigned</span><span class="pun">)</span><span class="pln">time</span><span class="pun">(</span><span class="lit">0</span><span class="pun">));</span><span class="pln"> </span><span class="com">// Init Random Number Generator</span></li><li class="L3"><span class="pln">    pongInit</span><span class="pun">();</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">    </span><span class="com">// init P300</span></li><li class="L6"><span class="pln">    p300init</span><span class="pun">();</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">done</span><span class="pun">)</span></li><li class="L9"><span class="pln">	</span><span class="pun">{</span></li><li class="L0"><span class="pln">	    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">SDL_PollEvent</span><span class="pun">(&amp;</span><span class="kwd">event</span><span class="pun">))</span></li><li class="L1"><span class="pln">		</span><span class="pun">{</span></li><li class="L2"><span class="pln">		    </span><span class="kwd">switch</span><span class="pun">(</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">type</span><span class="pun">)</span></li><li class="L3"><span class="pln">			</span><span class="pun">{</span></li><li class="L4"><span class="pln">			</span><span class="kwd">case</span><span class="pln"> SDL_VIDEORESIZE</span><span class="pun">:</span></li><li class="L5"><span class="pln">			    surface </span><span class="pun">=</span><span class="pln"> SDL_SetVideoMode</span><span class="pun">(</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">resize</span><span class="pun">.</span><span class="pln">w</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">resize</span><span class="pun">.</span><span class="pln">h</span><span class="pun">,</span><span class="pln"> SCREEN_BPP</span><span class="pun">,</span><span class="pln"> videoFlags</span><span class="pun">);</span></li><li class="L6"><span class="pln">			    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">surface</span><span class="pun">)</span></li><li class="L7"><span class="pln">				</span><span class="pun">{</span></li><li class="L8"><span class="pln">				    fprintf</span><span class="pun">(</span><span class="pln">stderr</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Could not get a surface after resize: %s\n"</span><span class="pun">,</span><span class="pln"> SDL_GetError</span><span class="pun">());</span></li><li class="L9"><span class="pln">				    </span><span class="typ">Quit</span><span class="pun">(</span><span class="lit">1</span><span class="pun">);</span></li><li class="L0"><span class="pln">				</span><span class="pun">}</span></li><li class="L1"><span class="pln">			    resizeWindow</span><span class="pun">(</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">resize</span><span class="pun">.</span><span class="pln">w</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">resize</span><span class="pun">.</span><span class="pln">h</span><span class="pun">);</span></li><li class="L2"><span class="pln">			    </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L3"><span class="pln">			</span><span class="kwd">case</span><span class="pln"> SDL_KEYDOWN</span><span class="pun">:</span></li><li class="L4"><span class="pln">				handleKeyPress</span><span class="pun">(&amp;</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">key</span><span class="pun">.</span><span class="pln">keysym</span><span class="pun">);</span></li><li class="L5"><span class="pln">				pongHandleKeyDown</span><span class="pun">(&amp;</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">key</span><span class="pun">.</span><span class="pln">keysym</span><span class="pun">);</span></li><li class="L6"><span class="pln">				p300HandleKeyDown</span><span class="pun">(&amp;</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">key</span><span class="pun">.</span><span class="pln">keysym</span><span class="pun">);</span></li><li class="L7"><span class="pln">				</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L8"><span class="pln">			</span><span class="kwd">case</span><span class="pln"> SDL_KEYUP</span><span class="pun">:</span></li><li class="L9"><span class="pln">				pongHandleKeyUp</span><span class="pun">(&amp;</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">key</span><span class="pun">.</span><span class="pln">keysym</span><span class="pun">);</span></li><li class="L0"><span class="pln">				p300HandleKeyUp</span><span class="pun">(&amp;</span><span class="kwd">event</span><span class="pun">.</span><span class="pln">key</span><span class="pun">.</span><span class="pln">keysym</span><span class="pun">);</span></li><li class="L1"><span class="pln">				</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L2"><span class="pln">			</span><span class="kwd">case</span><span class="pln"> SDL_QUIT</span><span class="pun">:</span></li><li class="L3"><span class="pln">			    </span><span class="kwd">done</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> TRUE</span><span class="pun">;</span></li><li class="L4"><span class="pln">			    </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L5"><span class="pln">			</span><span class="kwd">default</span><span class="pun">:</span></li><li class="L6"><span class="pln">			    </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L7"><span class="pln">			</span><span class="pun">}</span></li><li class="L8"><span class="pln">		</span><span class="pun">}</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">		drawGLScene</span><span class="pun">();</span></li><li class="L1"><span class="pln">	</span><span class="pun">}</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">    </span><span class="typ">Quit</span><span class="pun">(</span><span class="lit">0</span><span class="pun">);</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">    </span><span class="kwd">return</span><span class="pun">(</span><span class="lit">0</span><span class="pun">);</span></li><li class="L6"><span class="pun">}</span></li><li class="L7"><span class="pln">                 </span></li></ol></pre>
                 <h5>Makefile</h5>
                 <pre class="prettyprint linenums" id="gl_plot_Makefile"><ol class="linenums"><li class="L0"><span class="pln">CXX </span><span class="pun">=</span><span class="pln"> g</span><span class="pun">++</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">CFLAGS </span><span class="pun">:=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">g </span><span class="pun">-</span><span class="pln">I</span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="pln">include</span><span class="pun">/</span><span class="pln">SDL </span><span class="pun">-</span><span class="pln">O2 </span><span class="pun">-</span><span class="pln">pipe </span><span class="pun">-</span><span class="typ">Wall</span><span class="pln"> </span><span class="pun">-</span><span class="pln">ansi</span></li><li class="L3"><span class="pln">LDFLAGS </span><span class="pun">:=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">lrfftw </span><span class="pun">-</span><span class="pln">lfftw </span><span class="pun">-</span><span class="pln">lm </span><span class="pun">-</span><span class="pln">lGLEW </span><span class="pun">-</span><span class="pln">lGL </span><span class="pun">-</span><span class="pln">lGLU </span><span class="pun">-</span><span class="pln">lSDL_image </span><span class="pun">-</span><span class="pln">lSDL_ttf </span><span class="str">`sdl-config --cflags --libs`</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">PROGRAM </span><span class="pun">=</span><span class="pln"> gl_plot</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">SRC</span><span class="pun">=</span><span class="pln">\</span></li><li class="L8"><span class="pln">	serial</span><span class="pun">.</span><span class="pln">cpp\</span></li><li class="L9"><span class="pln">	font</span><span class="pun">.</span><span class="pln">cpp\</span></li><li class="L0"><span class="pln">	main</span><span class="pun">.</span><span class="pln">cpp\</span></li><li class="L1"><span class="pln">	debug</span><span class="pun">.</span><span class="pln">cpp\</span></li><li class="L2"><span class="pln">	pong</span><span class="pun">.</span><span class="pln">cpp\</span></li><li class="L3"><span class="pln">	p300</span><span class="pun">.</span><span class="pln">cpp\</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">OBJ </span><span class="pun">=</span><span class="pln"> $</span><span class="pun">(</span><span class="pln">SRC</span><span class="pun">:%.</span><span class="pln">cpp</span><span class="pun">=%.</span><span class="pln">o</span><span class="pun">)</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pun">.</span><span class="pln">cpp</span><span class="pun">.</span><span class="pln">o </span><span class="pun">:</span></li><li class="L8"><span class="pln">	$</span><span class="pun">(</span><span class="pln">CXX</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln">c $</span><span class="pun">&lt;</span><span class="pln"> $</span><span class="pun">(</span><span class="pln">CFLAGS</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln">o $@</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">all</span><span class="pun">:</span><span class="pln">	$</span><span class="pun">(</span><span class="pln">PROGRAM</span><span class="pun">)</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">$</span><span class="pun">(</span><span class="pln">PROGRAM</span><span class="pun">):</span><span class="pln">	$</span><span class="pun">(</span><span class="pln">OBJ</span><span class="pun">)</span></li><li class="L3"><span class="pln">	$</span><span class="pun">(</span><span class="pln">CXX</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln">o $</span><span class="pun">(</span><span class="pln">PROGRAM</span><span class="pun">)</span><span class="pln"> $</span><span class="pun">(</span><span class="pln">OBJ</span><span class="pun">)</span><span class="pln"> $</span><span class="pun">(</span><span class="pln">LDFLAGS</span><span class="pun">)</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pun">.</span><span class="pln">PHONY </span><span class="pun">:</span><span class="pln"> clean</span></li><li class="L6"><span class="pln">clean</span><span class="pun">:</span></li><li class="L7"><span class="pln">	rm </span><span class="pun">-</span><span class="pln">f $</span><span class="pun">(</span><span class="pln">OBJ</span><span class="pun">)</span><span class="pln">                 </span></li><li class="L8"><span class="pln">                 </span></li></ol></pre>
                 <h5>p300.cpp</h5>
                 <pre class="prettyprint linenums" id="gl_plot_p300_cpp"><ol class="linenums"><li class="L0"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdio.h&gt;</span></li><li class="L1"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdlib.h&gt;</span></li><li class="L2"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;GL/gl.h&gt;</span></li><li class="L3"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;GL/glu.h&gt;</span></li><li class="L4"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;time.h&gt;</span></li><li class="L5"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;string&gt;</span></li><li class="L6"><span class="com">//#include &lt;rfftw.h&gt;</span></li><li class="L7"><span class="com">#include</span><span class="pln"> </span><span class="str">"font.h"</span></li><li class="L8"><span class="com">#include</span><span class="pln"> </span><span class="str">"debug.h"</span></li><li class="L9"><span class="com">#include</span><span class="pln"> </span><span class="str">"config.h"</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="com">#include</span><span class="pln"> </span><span class="str">"p300.h"</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="com">#define</span><span class="pln"> TRAINING_DATA_FILENAME </span><span class="str">"p300_data"</span></li><li class="L4"><span class="com">#define</span><span class="pln"> TESTING_DATA_FILENAME </span><span class="str">"p300_data.t"</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="com">#define</span><span class="pln"> P300_READY </span><span class="lit">0</span></li><li class="L7"><span class="com">#define</span><span class="pln"> P300_TRAINING </span><span class="lit">1</span></li><li class="L8"><span class="com">#define</span><span class="pln"> P300_TESTING </span><span class="lit">2</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> p300_state </span><span class="pun">=</span><span class="pln"> P300_READY</span><span class="pun">;</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="com">#define</span><span class="pln"> NUM_COLORS </span><span class="lit">5</span></li><li class="L3"><span class="com">#define</span><span class="pln"> NUM_TRIALS </span><span class="lit">3</span></li><li class="L4"><span class="com">#define</span><span class="pln"> BUFFER_SIZE </span><span class="lit">512</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> color_choices</span><span class="pun">[</span><span class="pln">NUM_COLORS</span><span class="pun">][</span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">{</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">}</span><span class="pln"> </span><span class="pun">};</span></li><li class="L7"><span class="kwd">const</span><span class="pln"> std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> color_names</span><span class="pun">[</span><span class="pln">NUM_COLORS</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">"Red"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Green"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Blue"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Yellow"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Purple"</span><span class="pln"> </span><span class="pun">};</span></li><li class="L8"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> trialBuffer</span><span class="pun">[</span><span class="pln">NUM_TRIALS</span><span class="pun">][</span><span class="pln">NUM_COLORS</span><span class="pun">][</span><span class="pln">BUFFER_SIZE</span><span class="pun">];</span></li><li class="L9"><span class="kwd">float</span><span class="pln"> targetBuffer</span><span class="pun">[</span><span class="pln">BUFFER_SIZE</span><span class="pun">],</span><span class="pln"> nonTargetBuffer</span><span class="pun">[</span><span class="pln">BUFFER_SIZE</span><span class="pun">],</span><span class="pln"> testBuffers</span><span class="pun">[</span><span class="pln">NUM_COLORS</span><span class="pun">][</span><span class="pln">BUFFER_SIZE</span><span class="pun">];</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="kwd">int</span><span class="pln"> current_color </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> trainingTarget </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln"> </span><span class="com">// black</span></li><li class="L2"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> bufferPtr </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L3"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> current_trial </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L4"><span class="kwd">bool</span><span class="pln"> color_histogram</span><span class="pun">[</span><span class="pln">NUM_COLORS</span><span class="pun">],</span><span class="pln"> classified_histogram</span><span class="pun">[</span><span class="pln">NUM_COLORS</span><span class="pun">];</span></li><li class="L5"><span class="kwd">bool</span><span class="pln"> displayBuffers </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="kwd">bool</span><span class="pln"> p300StartTrial</span><span class="pun">(</span><span class="kwd">bool</span><span class="pln"> clear</span><span class="pun">);</span></li><li class="L8"><span class="kwd">void</span><span class="pln"> p300trainSVM</span><span class="pun">();</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="kwd">void</span><span class="pln"> p300setTrainingTarget</span><span class="pun">()</span></li><li class="L1"><span class="pun">{</span></li><li class="L2"><span class="pln">    trainingTarget </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span><span class="com">//rand() % NUM_COLORS;</span></li><li class="L3"><span class="pun">}</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="kwd">void</span><span class="pln"> p300init</span><span class="pun">()</span></li><li class="L6"><span class="pun">{</span></li><li class="L7"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">NUM_COLORS</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L8"><span class="pln">    </span><span class="pun">{</span></li><li class="L9"><span class="pln">        color_histogram</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> classified_histogram</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></li><li class="L0"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">&lt;</span><span class="pln">BUFFER_SIZE</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">++)</span></li><li class="L1"><span class="pln">        </span><span class="pun">{</span></li><li class="L2"><span class="pln">            testBuffers</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L3"><span class="pln">        </span><span class="pun">}</span></li><li class="L4"><span class="pln">    </span><span class="pun">}</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">BUFFER_SIZE</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L7"><span class="pln">    </span><span class="pun">{</span></li><li class="L8"><span class="pln">        targetBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> nonTargetBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L9"><span class="pln">    </span><span class="pun">}</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">    p300setTrainingTarget</span><span class="pun">();</span></li><li class="L2"><span class="pln">    p300trainSVM</span><span class="pun">();</span></li><li class="L3"><span class="pun">}</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="kwd">void</span><span class="pln"> p300trainSVM</span><span class="pun">()</span></li><li class="L6"><span class="pun">{</span></li><li class="L7"><span class="pln">    printf</span><span class="pun">(</span><span class="str">"TODO: Training SVM!\n"</span><span class="pun">);</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">    </span><span class="com">// load binary data file, use it to train the SVM and get coefficients</span></li><li class="L0"><span class="pun">}</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="kwd">void</span><span class="pln"> p300addTrainingExample</span><span class="pun">()</span></li><li class="L3"><span class="pun">{</span></li><li class="L4"><span class="pln">    printf</span><span class="pun">(</span><span class="str">"Adding training example buffer!\n"</span><span class="pun">);</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">    </span><span class="com">// so we know trainingTarget, so iterate through all trials and add the buffers where training target is the color to targetBuffer and add the buffers where training target is NOT the color to non-target buffer, then divide targetBuffer by NUM_TRIALS (since each trial has exactly one target) and divide nonTargetBuffer by (NUM_TRIALS*(NUM_COLORS-1))</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">    </span><span class="com">// clear buffers first!</span></li><li class="L9"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">BUFFER_SIZE</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L0"><span class="pln">    </span><span class="pun">{</span></li><li class="L1"><span class="pln">        targetBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> nonTargetBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L2"><span class="pln">    </span><span class="pun">}</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">NUM_TRIALS</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L5"><span class="pln">    </span><span class="pun">{</span></li><li class="L6"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">&lt;</span><span class="pln">NUM_COLORS</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">++)</span></li><li class="L7"><span class="pln">        </span><span class="pun">{</span></li><li class="L8"><span class="pln">            </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> k</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> k</span><span class="pun">&lt;</span><span class="pln">BUFFER_SIZE</span><span class="pun">;</span><span class="pln"> k</span><span class="pun">++)</span></li><li class="L9"><span class="pln">            </span><span class="pun">{</span></li><li class="L0"><span class="pln">                </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">j </span><span class="pun">==</span><span class="pln"> trainingTarget</span><span class="pun">)</span></li><li class="L1"><span class="pln">                </span><span class="pun">{</span></li><li class="L2"><span class="pln">                    targetBuffer</span><span class="pun">[</span><span class="pln">k</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> trialBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="pln">j</span><span class="pun">][</span><span class="pln">k</span><span class="pun">];</span></li><li class="L3"><span class="pln">                </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></li><li class="L4"><span class="pln">                    nonTargetBuffer</span><span class="pun">[</span><span class="pln">k</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> trialBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="pln">j</span><span class="pun">][</span><span class="pln">k</span><span class="pun">];</span></li><li class="L5"><span class="pln">                </span><span class="pun">}</span></li><li class="L6"><span class="pln">            </span><span class="pun">}</span></li><li class="L7"><span class="pln">        </span><span class="pun">}</span></li><li class="L8"><span class="pln">    </span><span class="pun">}</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">BUFFER_SIZE</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L1"><span class="pln">    </span><span class="pun">{</span></li><li class="L2"><span class="pln">        targetBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">/=</span><span class="pln"> NUM_TRIALS</span><span class="pun">;</span></li><li class="L3"><span class="pln">        nonTargetBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">/=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">NUM_TRIALS</span><span class="pun">*(</span><span class="pln">NUM_COLORS</span><span class="pun">-</span><span class="lit">1</span><span class="pun">));</span></li><li class="L4"><span class="pln">    </span><span class="pun">}</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">    </span><span class="com">// then scale the data</span></li><li class="L7"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">BUFFER_SIZE</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="com">// goes from 0 to ADC_RESOLUTION initially so subtract ADC_RESOLUTION/2 then divide by ADC_RESOLUTION/2 to get it in [-1, +1] range</span></li><li class="L8"><span class="pln">    </span><span class="pun">{</span></li><li class="L9"><span class="pln">        targetBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">targetBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]-</span><span class="pln">ADC_RESOLUTION</span><span class="pun">/</span><span class="lit">2</span><span class="pun">)/(</span><span class="pln">ADC_RESOLUTION</span><span class="pun">/</span><span class="lit">2</span><span class="pun">);</span></li><li class="L0"><span class="pln">        nonTargetBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">nonTargetBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]-</span><span class="pln">ADC_RESOLUTION</span><span class="pun">/</span><span class="lit">2</span><span class="pun">)/(</span><span class="pln">ADC_RESOLUTION</span><span class="pun">/</span><span class="lit">2</span><span class="pun">);</span></li><li class="L1"><span class="pln">    </span><span class="pun">}</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">    </span><span class="com">// then append it to a training SVM text file</span></li><li class="L4"><span class="pln">    FILE </span><span class="pun">*</span><span class="pln">fp </span><span class="pun">=</span><span class="pln"> fopen</span><span class="pun">(</span><span class="pln">TRAINING_DATA_FILENAME</span><span class="pun">,</span><span class="pln"> </span><span class="str">"a"</span><span class="pun">);</span></li><li class="L5"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">fp </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></li><li class="L6"><span class="pln">    </span><span class="pun">{</span></li><li class="L7"><span class="pln">        printf</span><span class="pun">(</span><span class="str">"p300addTrainingExample(): Unable to open training data file %s!\n"</span><span class="pun">,</span><span class="pln"> TRAINING_DATA_FILENAME</span><span class="pun">);</span></li><li class="L8"><span class="pln">        </span><span class="kwd">return</span><span class="pun">;</span></li><li class="L9"><span class="pln">    </span><span class="pun">}</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">    </span><span class="com">// first do non-target buffer</span></li><li class="L2"><span class="pln">    fprintf</span><span class="pun">(</span><span class="pln">fp</span><span class="pun">,</span><span class="pln"> </span><span class="str">"-1 "</span><span class="pun">);</span></li><li class="L3"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">BUFFER_SIZE</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L4"><span class="pln">    </span><span class="pun">{</span></li><li class="L5"><span class="pln">        fprintf</span><span class="pun">(</span><span class="pln">fp</span><span class="pun">,</span><span class="pln"> </span><span class="str">"%d:%f "</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> nonTargetBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]);</span></li><li class="L6"><span class="pln">    </span><span class="pun">}</span></li><li class="L7"><span class="pln">    fprintf</span><span class="pun">(</span><span class="pln">fp</span><span class="pun">,</span><span class="pln"> </span><span class="str">"\n"</span><span class="pun">);</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">    </span><span class="com">// now do target buffer</span></li><li class="L0"><span class="pln">    fprintf</span><span class="pun">(</span><span class="pln">fp</span><span class="pun">,</span><span class="pln"> </span><span class="str">"+1 "</span><span class="pun">);</span></li><li class="L1"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">BUFFER_SIZE</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L2"><span class="pln">    </span><span class="pun">{</span></li><li class="L3"><span class="pln">        fprintf</span><span class="pun">(</span><span class="pln">fp</span><span class="pun">,</span><span class="pln"> </span><span class="str">"%d:%f "</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> targetBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]);</span></li><li class="L4"><span class="pln">    </span><span class="pun">}</span></li><li class="L5"><span class="pln">    fprintf</span><span class="pun">(</span><span class="pln">fp</span><span class="pun">,</span><span class="pln"> </span><span class="str">"\n"</span><span class="pun">);</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">    fclose</span><span class="pun">(</span><span class="pln">fp</span><span class="pun">);</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">    </span><span class="com">// average the trials, append the trial to a binary data file, also call p300trainSVM() ?</span></li><li class="L0"><span class="pln">    </span><span class="com">// TODO: update targetBuffer, nonTargetBuffer</span></li><li class="L1"><span class="pun">}</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="kwd">void</span><span class="pln"> p300testAndReport</span><span class="pun">()</span></li><li class="L4"><span class="pun">{</span></li><li class="L5"><span class="pln">    printf</span><span class="pun">(</span><span class="str">"Testing and reporting!\n"</span><span class="pun">);</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">    </span><span class="com">// so we have a bunch of colors with multiple trials each, so we need to go through each color and then each trial and add all the data for each color into the appropriate test buffer then scale all of the test buffers by NUM_TRIALS, then spit each one into the test data file (after scaling the data, of course)</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">    </span><span class="com">// clear buffers first!</span></li><li class="L0"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">NUM_COLORS</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L1"><span class="pln">    </span><span class="pun">{</span></li><li class="L2"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">&lt;</span><span class="pln">BUFFER_SIZE</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">++)</span></li><li class="L3"><span class="pln">        </span><span class="pun">{</span></li><li class="L4"><span class="pln">            testBuffers</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L5"><span class="pln">        </span><span class="pun">}</span></li><li class="L6"><span class="pln">    </span><span class="pun">}</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">NUM_TRIALS</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L9"><span class="pln">    </span><span class="pun">{</span></li><li class="L0"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">&lt;</span><span class="pln">NUM_COLORS</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">++)</span></li><li class="L1"><span class="pln">        </span><span class="pun">{</span></li><li class="L2"><span class="pln">            </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> k</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> k</span><span class="pun">&lt;</span><span class="pln">BUFFER_SIZE</span><span class="pun">;</span><span class="pln"> k</span><span class="pun">++)</span></li><li class="L3"><span class="pln">            </span><span class="pun">{</span></li><li class="L4"><span class="pln">                testBuffers</span><span class="pun">[</span><span class="pln">j</span><span class="pun">][</span><span class="pln">k</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> trialBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="pln">j</span><span class="pun">][</span><span class="pln">k</span><span class="pun">];</span></li><li class="L5"><span class="pln">            </span><span class="pun">}</span></li><li class="L6"><span class="pln">        </span><span class="pun">}</span></li><li class="L7"><span class="pln">    </span><span class="pun">}</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">NUM_COLORS</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L0"><span class="pln">    </span><span class="pun">{</span></li><li class="L1"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">&lt;</span><span class="pln">BUFFER_SIZE</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">++)</span></li><li class="L2"><span class="pln">        </span><span class="pun">{</span></li><li class="L3"><span class="pln">            testBuffers</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">/=</span><span class="pln"> NUM_TRIALS</span><span class="pun">;</span></li><li class="L4"><span class="pln">        </span><span class="pun">}</span></li><li class="L5"><span class="pln">    </span><span class="pun">}</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">    </span><span class="com">// then scale the data</span></li><li class="L8"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">NUM_COLORS</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L9"><span class="pln">    </span><span class="pun">{</span></li><li class="L0"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">&lt;</span><span class="pln">BUFFER_SIZE</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">++)</span></li><li class="L1"><span class="pln">        </span><span class="pun">{</span></li><li class="L2"><span class="pln">            testBuffers</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">testBuffers</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="pln">j</span><span class="pun">]-</span><span class="pln">ADC_RESOLUTION</span><span class="pun">/</span><span class="lit">2</span><span class="pun">)/(</span><span class="pln">ADC_RESOLUTION</span><span class="pun">/</span><span class="lit">2</span><span class="pun">);</span></li><li class="L3"><span class="pln">        </span><span class="pun">}</span></li><li class="L4"><span class="pln">    </span><span class="pun">}</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">    </span><span class="com">// then write it to a testing SVM text file</span></li><li class="L7"><span class="pln">    FILE </span><span class="pun">*</span><span class="pln">fp </span><span class="pun">=</span><span class="pln"> fopen</span><span class="pun">(</span><span class="pln">TESTING_DATA_FILENAME</span><span class="pun">,</span><span class="pln"> </span><span class="str">"w"</span><span class="pun">);</span></li><li class="L8"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">fp </span><span class="pun">==</span><span class="pln"> NULL</span><span class="pun">)</span></li><li class="L9"><span class="pln">    </span><span class="pun">{</span></li><li class="L0"><span class="pln">        printf</span><span class="pun">(</span><span class="str">"p300testAndReport(): Unable to open testing data file %s!\n"</span><span class="pun">,</span><span class="pln"> TESTING_DATA_FILENAME</span><span class="pun">);</span></li><li class="L1"><span class="pln">        </span><span class="kwd">return</span><span class="pun">;</span></li><li class="L2"><span class="pln">    </span><span class="pun">}</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">    </span><span class="com">// do all test buffers with 0 for classification label</span></li><li class="L5"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">NUM_COLORS</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L6"><span class="pln">    </span><span class="pun">{</span></li><li class="L7"><span class="pln">        fprintf</span><span class="pun">(</span><span class="pln">fp</span><span class="pun">,</span><span class="pln"> </span><span class="str">"0 "</span><span class="pun">);</span></li><li class="L8"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">&lt;</span><span class="pln">BUFFER_SIZE</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">++)</span></li><li class="L9"><span class="pln">        </span><span class="pun">{</span></li><li class="L0"><span class="pln">            fprintf</span><span class="pun">(</span><span class="pln">fp</span><span class="pun">,</span><span class="pln"> </span><span class="str">"%d:%f "</span><span class="pun">,</span><span class="pln"> j</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> testBuffers</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="pln">j</span><span class="pun">]);</span></li><li class="L1"><span class="pln">        </span><span class="pun">}</span></li><li class="L2"><span class="pln">        fprintf</span><span class="pun">(</span><span class="pln">fp</span><span class="pun">,</span><span class="pln"> </span><span class="str">"\n"</span><span class="pun">);</span></li><li class="L3"><span class="pln">    </span><span class="pun">}</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">    fclose</span><span class="pun">(</span><span class="pln">fp</span><span class="pun">);</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">    </span><span class="com">// so take the current trial and classify it using libSVM, then set the classification histogram</span></li><li class="L8"><span class="pln">    </span><span class="com">// TODO: update targetBuffer, nonTargetBuffer (???)</span></li><li class="L9"><span class="pun">}</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="kwd">void</span><span class="pln"> p300AddSample</span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> s</span><span class="pun">)</span></li><li class="L2"><span class="pun">{</span></li><li class="L3"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">p300_state </span><span class="pun">!=</span><span class="pln"> P300_READY</span><span class="pun">)</span></li><li class="L4"><span class="pln">    </span><span class="pun">{</span></li><li class="L5"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bufferPtr </span><span class="pun">&lt;</span><span class="pln"> BUFFER_SIZE</span><span class="pun">)</span><span class="pln"> </span><span class="com">// still room left in the buffer</span></li><li class="L6"><span class="pln">        </span><span class="pun">{</span></li><li class="L7"><span class="pln">            trialBuffer</span><span class="pun">[</span><span class="pln">current_trial</span><span class="pun">][</span><span class="pln">current_color</span><span class="pun">][</span><span class="pln">bufferPtr</span><span class="pun">++]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> s</span><span class="pun">;</span></li><li class="L8"><span class="pln">        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="com">// buffer filled up</span></li><li class="L9"><span class="pln">            </span><span class="com">// start a new trial unless we are finished then set p300_state to READY</span></li><li class="L0"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">p300StartTrial</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">))</span><span class="pln"> </span><span class="com">// finished</span></li><li class="L1"><span class="pln">            </span><span class="pun">{</span></li><li class="L2"><span class="pln">                </span><span class="com">// do SVM stuff here</span></li><li class="L3"><span class="pln">                </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">p300_state </span><span class="pun">==</span><span class="pln"> P300_TRAINING</span><span class="pun">)</span></li><li class="L4"><span class="pln">                </span><span class="pun">{</span></li><li class="L5"><span class="pln">                    p300addTrainingExample</span><span class="pun">();</span></li><li class="L6"><span class="pln">                    p300setTrainingTarget</span><span class="pun">();</span><span class="pln"> </span><span class="com">// done training, set a new target</span></li><li class="L7"><span class="pln">                </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">p300_state </span><span class="pun">==</span><span class="pln"> P300_TESTING</span><span class="pun">)</span></li><li class="L8"><span class="pln">                    p300testAndReport</span><span class="pun">();</span></li><li class="L9"><span class="pln">                </span><span class="kwd">else</span></li><li class="L0"><span class="pln">                    printf</span><span class="pun">(</span><span class="str">"p300AddSample(): Unknown state %d\n"</span><span class="pun">,</span><span class="pln"> p300_state</span><span class="pun">);</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">                </span><span class="com">// reset state</span></li><li class="L3"><span class="pln">                p300_state </span><span class="pun">=</span><span class="pln"> P300_READY</span><span class="pun">;</span></li><li class="L4"><span class="pln">                glClearColor</span><span class="pun">(</span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">);</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">                </span><span class="com">// might as well reset the state variables just to be safe</span></li><li class="L7"><span class="pln">                current_color </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><li class="L8"><span class="pln">                bufferPtr </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L9"><span class="pln">                current_trial </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L0"><span class="pln">            </span><span class="pun">}</span></li><li class="L1"><span class="pln">        </span><span class="pun">}</span></li><li class="L2"><span class="pln">    </span><span class="pun">}</span></li><li class="L3"><span class="pun">}</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="com">// returns true if all finished</span></li><li class="L6"><span class="kwd">bool</span><span class="pln"> p300StartTrial</span><span class="pun">(</span><span class="kwd">bool</span><span class="pln"> clear</span><span class="pun">)</span></li><li class="L7"><span class="pun">{</span></li><li class="L8"><span class="pln">    </span><span class="com">// reset buffer pointer</span></li><li class="L9"><span class="pln">    bufferPtr </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">clear</span><span class="pun">)</span></li><li class="L2"><span class="pln">    </span><span class="pun">{</span></li><li class="L3"><span class="pln">        </span><span class="com">// set trial to zero and clear histogram</span></li><li class="L4"><span class="pln">        current_trial </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L5"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">NUM_COLORS</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> color_histogram</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></li><li class="L6"><span class="pln">    </span><span class="pun">}</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">    </span><span class="com">// check if done with trial</span></li><li class="L9"><span class="pln">    </span><span class="kwd">bool</span><span class="pln"> increment_trial </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></li><li class="L0"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">NUM_COLORS</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L1"><span class="pln">    </span><span class="pun">{</span></li><li class="L2"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">color_histogram</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">)</span></li><li class="L3"><span class="pln">        </span><span class="pun">{</span></li><li class="L4"><span class="pln">            increment_trial </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></li><li class="L5"><span class="pln">            </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L6"><span class="pln">        </span><span class="pun">}</span></li><li class="L7"><span class="pln">    </span><span class="pun">}</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">    </span><span class="com">// done with trial</span></li><li class="L0"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">increment_trial</span><span class="pun">)</span></li><li class="L1"><span class="pln">    </span><span class="pun">{</span></li><li class="L2"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">current_trial </span><span class="pun">&lt;</span><span class="pln"> NUM_TRIALS </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="com">// check if finished all together</span></li><li class="L3"><span class="pln">            current_trial</span><span class="pun">++;</span></li><li class="L4"><span class="pln">        </span><span class="kwd">else</span></li><li class="L5"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">NUM_COLORS</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> color_histogram</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></li><li class="L8"><span class="pln">    </span><span class="pun">}</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">    </span><span class="com">// pick a random color, set it in the histograph</span></li><li class="L1"><span class="pln">    </span><span class="kwd">bool</span><span class="pln"> picked </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></li><li class="L2"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">picked</span><span class="pun">)</span></li><li class="L3"><span class="pln">    </span><span class="pun">{</span></li><li class="L4"><span class="pln">        </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> next_color </span><span class="pun">=</span><span class="pln"> rand</span><span class="pun">()</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> NUM_COLORS</span><span class="pun">;</span></li><li class="L5"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">color_histogram</span><span class="pun">[</span><span class="pln">next_color</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> next_color </span><span class="pun">!=</span><span class="pln"> current_color</span><span class="pun">)</span></li><li class="L6"><span class="pln">        </span><span class="pun">{</span></li><li class="L7"><span class="pln">            current_color </span><span class="pun">=</span><span class="pln"> next_color</span><span class="pun">;</span></li><li class="L8"><span class="pln">            color_histogram</span><span class="pun">[</span><span class="pln">current_color</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></li><li class="L9"><span class="pln">            picked </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></li><li class="L0"><span class="pln">        </span><span class="pun">}</span></li><li class="L1"><span class="pln">    </span><span class="pun">}</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">    glClearColor</span><span class="pun">(</span><span class="pln">color_choices</span><span class="pun">[</span><span class="pln">current_color</span><span class="pun">][</span><span class="lit">0</span><span class="pun">],</span><span class="pln"> color_choices</span><span class="pun">[</span><span class="pln">current_color</span><span class="pun">][</span><span class="lit">1</span><span class="pun">],</span><span class="pln"> color_choices</span><span class="pun">[</span><span class="pln">current_color</span><span class="pun">][</span><span class="lit">2</span><span class="pun">],</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">);</span></li><li class="L4"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></li><li class="L5"><span class="pun">}</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="kwd">void</span><span class="pln"> p300UpdateAndRender</span><span class="pun">()</span></li><li class="L8"><span class="pun">{</span></li><li class="L9"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">displayBuffers</span><span class="pun">)</span><span class="pln"> </span><span class="com">// TODO: test and fix!!!</span></li><li class="L0"><span class="pln">    </span><span class="pun">{</span></li><li class="L1"><span class="pln">        glBegin</span><span class="pun">(</span><span class="pln">GL_LINES</span><span class="pun">);</span></li><li class="L2"><span class="pln">            </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">BUFFER_SIZE</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L3"><span class="pln">            </span><span class="pun">{</span></li><li class="L4"><span class="pln">                glColor4f</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">);</span></li><li class="L5"><span class="pln">                glVertex2f</span><span class="pun">(</span><span class="pln">i</span><span class="pun">,</span><span class="pln"> targetBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]/</span><span class="lit">2.0f</span><span class="pun">*((</span><span class="kwd">float</span><span class="pun">)</span><span class="pln">SCREEN_HEIGHT</span><span class="pun">/</span><span class="pln">ADC_RESOLUTION</span><span class="pun">));</span></li><li class="L6"><span class="pln">                glVertex2f</span><span class="pun">(</span><span class="pln">i</span><span class="pun">,</span><span class="pln"> targetBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]/</span><span class="lit">2.0f</span><span class="pun">*((</span><span class="kwd">float</span><span class="pun">)</span><span class="pln">SCREEN_HEIGHT</span><span class="pun">/</span><span class="pln">ADC_RESOLUTION</span><span class="pun">));</span></li><li class="L7"><span class="pln">            </span><span class="pun">}</span></li><li class="L8"><span class="pln">        glEnd</span><span class="pun">();</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">        glBegin</span><span class="pun">(</span><span class="pln">GL_LINES</span><span class="pun">);</span></li><li class="L1"><span class="pln">            </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">BUFFER_SIZE</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L2"><span class="pln">            </span><span class="pun">{</span></li><li class="L3"><span class="pln">                glColor4f</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">);</span></li><li class="L4"><span class="pln">                glVertex2f</span><span class="pun">(</span><span class="pln">i</span><span class="pun">,</span><span class="pln"> nonTargetBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]/</span><span class="lit">2.0f</span><span class="pun">*((</span><span class="kwd">float</span><span class="pun">)</span><span class="pln">SCREEN_HEIGHT</span><span class="pun">/</span><span class="pln">ADC_RESOLUTION</span><span class="pun">)+</span><span class="pln">SCREEN_HEIGHT</span><span class="pun">/</span><span class="lit">2.0f</span><span class="pun">);</span></li><li class="L5"><span class="pln">                glVertex2f</span><span class="pun">(</span><span class="pln">i</span><span class="pun">,</span><span class="pln"> nonTargetBuffer</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]/</span><span class="lit">2.0f</span><span class="pun">*((</span><span class="kwd">float</span><span class="pun">)</span><span class="pln">SCREEN_HEIGHT</span><span class="pun">/</span><span class="pln">ADC_RESOLUTION</span><span class="pun">)+</span><span class="pln">SCREEN_HEIGHT</span><span class="pun">/</span><span class="lit">2.0f</span><span class="pun">);</span></li><li class="L6"><span class="pln">            </span><span class="pun">}</span></li><li class="L7"><span class="pln">        glEnd</span><span class="pun">();</span></li><li class="L8"><span class="pln">    </span><span class="pun">}</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">    </span><span class="com">// draw status text:</span></li><li class="L1"><span class="pln">    std</span><span class="pun">::</span><span class="kwd">string</span><span class="pln"> classified_str </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Classified: { "</span><span class="pun">;</span></li><li class="L2"><span class="pln">    </span><span class="com">// Classified: { Red Blue }</span></li><li class="L3"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">NUM_COLORS</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L4"><span class="pln">    </span><span class="pun">{</span></li><li class="L5"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">classified_histogram</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])</span></li><li class="L6"><span class="pln">        </span><span class="pun">{</span></li><li class="L7"><span class="pln">            classified_str </span><span class="pun">+=</span><span class="pln"> color_names</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">" "</span><span class="pun">;</span></li><li class="L8"><span class="pln">        </span><span class="pun">}</span></li><li class="L9"><span class="pln">    </span><span class="pun">}</span></li><li class="L0"><span class="pln">    classified_str </span><span class="pun">+=</span><span class="pln"> </span><span class="str">" }"</span><span class="pun">;</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">    </span><span class="com">// add mode string to status text</span></li><li class="L3"><span class="pln">    </span><span class="kwd">switch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">p300_state</span><span class="pun">)</span></li><li class="L4"><span class="pln">    </span><span class="pun">{</span></li><li class="L5"><span class="pln">    </span><span class="kwd">case</span><span class="pln"> P300_READY</span><span class="pun">:</span></li><li class="L6"><span class="pln">        classified_str </span><span class="pun">=</span><span class="pln"> </span><span class="str">"P300 Ready: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> classified_str</span><span class="pun">;</span></li><li class="L7"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L8"><span class="pln">    </span><span class="kwd">case</span><span class="pln"> P300_TRAINING</span><span class="pun">:</span></li><li class="L9"><span class="pln">        classified_str </span><span class="pun">=</span><span class="pln"> </span><span class="str">"P300 Training Mode: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> classified_str</span><span class="pun">;</span></li><li class="L0"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L1"><span class="pln">    </span><span class="kwd">case</span><span class="pln"> P300_TESTING</span><span class="pun">:</span></li><li class="L2"><span class="pln">        classified_str </span><span class="pun">=</span><span class="pln"> </span><span class="str">"P300 Testing Mode: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> classified_str</span><span class="pun">;</span></li><li class="L3"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L4"><span class="pln">    </span><span class="kwd">default</span><span class="pun">:</span></li><li class="L5"><span class="pln">        classified_str </span><span class="pun">=</span><span class="pln"> </span><span class="str">"P300 Unknown State! "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> classified_str</span><span class="pun">;</span></li><li class="L6"><span class="pln">    </span><span class="pun">}</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">    </span><span class="com">// display training target too</span></li><li class="L9"><span class="pln">    classified_str </span><span class="pun">+=</span><span class="pln"> </span><span class="str">" - Training Target: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> color_names</span><span class="pun">[</span><span class="pln">trainingTarget</span><span class="pun">];</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">    glPrint</span><span class="pun">(</span><span class="pln">classified_str</span><span class="pun">.</span><span class="pln">c_str</span><span class="pun">(),</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">50</span><span class="pun">,</span><span class="pln"> blue</span><span class="pun">);</span></li><li class="L2"><span class="pun">}</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="kwd">void</span><span class="pln"> p300HandleKeyDown</span><span class="pun">(</span><span class="pln">SDL_keysym </span><span class="pun">*</span><span class="pln">keysym</span><span class="pun">)</span></li><li class="L5"><span class="pun">{</span></li><li class="L6"><span class="pln">	</span><span class="kwd">switch</span><span class="pun">(</span><span class="pln">keysym</span><span class="pun">-&gt;</span><span class="pln">sym</span><span class="pun">)</span></li><li class="L7"><span class="pln">	</span><span class="pun">{</span></li><li class="L8"><span class="pln">    </span><span class="kwd">case</span><span class="pln"> SDLK_F2</span><span class="pun">:</span><span class="pln"> </span><span class="com">// switch to "training mode"</span></li><li class="L9"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">p300_state </span><span class="pun">==</span><span class="pln"> P300_READY</span><span class="pun">)</span></li><li class="L0"><span class="pln">        </span><span class="pun">{</span></li><li class="L1"><span class="pln">            p300_state </span><span class="pun">=</span><span class="pln"> P300_TRAINING</span><span class="pun">;</span></li><li class="L2"><span class="pln">            p300StartTrial</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span></li><li class="L3"><span class="pln">        </span><span class="pun">}</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L6"><span class="pln">    </span><span class="kwd">case</span><span class="pln"> SDLK_F3</span><span class="pun">:</span><span class="pln"> </span><span class="com">// switch to "testing mode"</span></li><li class="L7"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">p300_state </span><span class="pun">==</span><span class="pln"> P300_READY</span><span class="pun">)</span></li><li class="L8"><span class="pln">        </span><span class="pun">{</span></li><li class="L9"><span class="pln">            p300_state </span><span class="pun">=</span><span class="pln"> P300_TESTING</span><span class="pun">;</span></li><li class="L0"><span class="pln">            p300StartTrial</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span></li><li class="L1"><span class="pln">        </span><span class="pun">}</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L4"><span class="pln">    </span><span class="kwd">case</span><span class="pln"> SDLK_F5</span><span class="pun">:</span></li><li class="L5"><span class="pln">        displayBuffers </span><span class="pun">=</span><span class="pln"> </span><span class="pun">!</span><span class="pln">displayBuffers</span><span class="pun">;</span></li><li class="L6"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L7"><span class="pln">    </span><span class="kwd">default</span><span class="pun">:</span></li><li class="L8"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L9"><span class="pln">	</span><span class="pun">}</span></li><li class="L0"><span class="pun">}</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="kwd">void</span><span class="pln"> p300HandleKeyUp</span><span class="pun">(</span><span class="pln">SDL_keysym </span><span class="pun">*</span><span class="pln">keysym</span><span class="pun">)</span></li><li class="L3"><span class="pun">{</span></li><li class="L4"><span class="com">/*	switch(keysym-&gt;sym)</span></li><li class="L5"><span class="com">	{</span></li><li class="L6"><span class="com">	case SDLK_UP:</span></li><li class="L7"><span class="com">		paddle2yvel = 0;</span></li><li class="L8"><span class="com">		break;</span></li><li class="L9"><span class="com">	case SDLK_DOWN:</span></li><li class="L0"><span class="com">		paddle2yvel = 0;</span></li><li class="L1"><span class="com">		break;</span></li><li class="L2"><span class="com">	case SDLK_a:</span></li><li class="L3"><span class="com">		paddle1yvel = 0;</span></li><li class="L4"><span class="com">		break;</span></li><li class="L5"><span class="com">	case SDLK_z:</span></li><li class="L6"><span class="com">		paddle1yvel = 0;</span></li><li class="L7"><span class="com">		break;</span></li><li class="L8"><span class="com">	} */</span></li><li class="L9"><span class="pun">}</span></li><li class="L0"><span class="pln">                 </span></li></ol></pre>
                 <h5>p300.h</h5>
                 <pre class="prettyprint linenums" id="gl_plot_p300_h"><ol class="linenums"><li class="L0"><span class="com">#ifndef</span><span class="pln"> P300_H_</span></li><li class="L1"><span class="com">#define</span><span class="pln"> P300_H_</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="com">#include</span><span class="pln"> </span><span class="str">"SDL.h"</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="com">// state variables</span></li><li class="L6"><span class="kwd">extern</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> p300_state</span><span class="pun">;</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="com">// methods</span></li><li class="L9"><span class="kwd">void</span><span class="pln"> p300UpdateAndRender</span><span class="pun">();</span></li><li class="L0"><span class="kwd">void</span><span class="pln"> p300HandleKeyUp</span><span class="pun">(</span><span class="pln">SDL_keysym </span><span class="pun">*</span><span class="pln">keysym</span><span class="pun">);</span></li><li class="L1"><span class="kwd">void</span><span class="pln"> p300HandleKeyDown</span><span class="pun">(</span><span class="pln">SDL_keysym </span><span class="pun">*</span><span class="pln">keysym</span><span class="pun">);</span></li><li class="L2"><span class="kwd">void</span><span class="pln"> p300AddSample</span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> s</span><span class="pun">);</span></li><li class="L3"><span class="kwd">void</span><span class="pln"> p300init</span><span class="pun">();</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="com">#endif</span></li><li class="L6"><span class="pln">                 </span></li></ol></pre>
                 <h5>pong.cpp</h5>
                 <pre class="prettyprint linenums" id="gl_plot_pong_cpp"><ol class="linenums"><li class="L0"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;SDL/SDL.h&gt;</span></li><li class="L1"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;GL/gl.h&gt;</span></li><li class="L2"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;GL/glu.h&gt;</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdio.h&gt;</span></li><li class="L5"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;math.h&gt;</span></li><li class="L6"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdlib.h&gt;</span></li><li class="L7"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;ctime&gt;</span></li><li class="L8"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;malloc.h&gt;</span></li><li class="L9"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;string&gt;</span></li><li class="L0"><span class="com">#include</span><span class="pln"> </span><span class="str">"config.h"</span></li><li class="L1"><span class="com">#include</span><span class="pln"> </span><span class="str">"glyphs.h"</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="kwd">void</span><span class="pln"> drawsprite</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> r</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> g</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> b</span><span class="pun">);</span></li><li class="L4"><span class="kwd">void</span><span class="pln"> drawpaddlesprite</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> r</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> g</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> b</span><span class="pun">);</span></li><li class="L5"><span class="kwd">void</span><span class="pln"> updatepaddle1</span><span class="pun">();</span></li><li class="L6"><span class="kwd">void</span><span class="pln"> updatepaddle2</span><span class="pun">();</span></li><li class="L7"><span class="kwd">void</span><span class="pln"> drawglyph</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> num</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> r</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> g</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> b</span><span class="pun">);</span></li><li class="L8"><span class="kwd">void</span><span class="pln"> drawline</span><span class="pun">();</span></li><li class="L9"><span class="kwd">void</span><span class="pln"> drawscore</span><span class="pun">();</span></li><li class="L0"><span class="kwd">void</span><span class="pln"> </span><span class="typ">ResetVelocity</span><span class="pun">();</span></li><li class="L1"><span class="kwd">int</span><span class="pln"> randomNum</span><span class="pun">();</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="com">#define</span><span class="pln"> PADDLE_WIDTH </span><span class="lit">16</span></li><li class="L4"><span class="com">#define</span><span class="pln"> PADDLE_HEIGHT </span><span class="lit">128</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> score1</span><span class="pun">=</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> score2</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span></li><li class="L7"><span class="kwd">float</span><span class="pln"> posy</span><span class="pun">=</span><span class="pln">SCREEN_HEIGHT</span><span class="pun">/</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> paddle1yvel</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span></li><li class="L8"><span class="kwd">float</span><span class="pln"> pos2y</span><span class="pun">=</span><span class="pln">SCREEN_HEIGHT</span><span class="pun">/</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> paddle2yvel</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="kwd">float</span><span class="pln"> ballposx</span><span class="pun">=</span><span class="pln">SCREEN_WIDTH</span><span class="pun">/</span><span class="lit">2</span><span class="pun">-</span><span class="lit">8</span><span class="pun">,</span><span class="pln"> ballposy</span><span class="pun">=</span><span class="pln">SCREEN_HEIGHT</span><span class="pun">/</span><span class="lit">2</span><span class="pun">-</span><span class="lit">8</span><span class="pun">;</span></li><li class="L1"><span class="kwd">float</span><span class="pln"> ballvelx</span><span class="pun">=</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> ballvely</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> vel_threshold </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.1f</span><span class="pun">;</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> sprite</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span></li><li class="L6"><span class="pun">{</span></li><li class="L7"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L8"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L9"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L0"><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L1"><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L2"><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L3"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L4"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L5"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L6"><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span></li><li class="L7"><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L8"><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L9"><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L0"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L1"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span></li><li class="L2"><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span></li><li class="L3"><span class="pun">};</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="kwd">void</span><span class="pln"> updateball</span><span class="pun">()</span></li><li class="L6"><span class="pun">{</span></li><li class="L7"><span class="pln">	ballposx </span><span class="pun">+=</span><span class="pln"> ballvelx</span><span class="pun">;</span></li><li class="L8"><span class="pln">	ballposy </span><span class="pun">+=</span><span class="pln"> ballvely</span><span class="pun">;</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposy </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></li><li class="L1"><span class="pln">	</span><span class="pun">{</span></li><li class="L2"><span class="pln">		ballvely </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">ballvely</span><span class="pun">;</span></li><li class="L3"><span class="pln">		ballposy </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L4"><span class="pln">	</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposy </span><span class="pun">&gt;=</span><span class="pln"> SCREEN_HEIGHT </span><span class="pun">-</span><span class="pln"> </span><span class="lit">16</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L5"><span class="pln">		ballvely </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">ballvely</span><span class="pun">;</span></li><li class="L6"><span class="pln">		ballposy </span><span class="pun">=</span><span class="pln"> SCREEN_HEIGHT </span><span class="pun">-</span><span class="pln"> </span><span class="lit">16</span><span class="pun">;</span></li><li class="L7"><span class="pln">	</span><span class="pun">}</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposx </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></li><li class="L0"><span class="pln">	</span><span class="pun">{</span></li><li class="L1"><span class="pln">		ballvelx </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">ballvelx</span><span class="pun">;</span></li><li class="L2"><span class="pln">		ballposx </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L3"><span class="pln">	</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposx </span><span class="pun">&gt;=</span><span class="pln"> SCREEN_WIDTH </span><span class="pun">-</span><span class="pln"> </span><span class="lit">16</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L4"><span class="pln">		ballvelx </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">ballvelx</span><span class="pun">;</span></li><li class="L5"><span class="pln">		ballposx </span><span class="pun">=</span><span class="pln"> SCREEN_WIDTH </span><span class="pun">-</span><span class="pln"> </span><span class="lit">16</span><span class="pun">;</span></li><li class="L6"><span class="pln">	</span><span class="pun">}</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">	</span><span class="com">// COLLISION DETECTION</span></li><li class="L9"><span class="pln">	</span><span class="com">// front checking for both paddles</span></li><li class="L0"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">ballposx </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">75</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposx </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="lit">75</span><span class="pun">+</span><span class="pln">PADDLE_WIDTH</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposy </span><span class="pun">&gt;=</span><span class="pln"> posy</span><span class="pun">-(</span><span class="pln">PADDLE_HEIGHT</span><span class="pun">-</span><span class="lit">1</span><span class="pun">))</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposy </span><span class="pun">&lt;=</span><span class="pln"> posy</span><span class="pun">+</span><span class="pln">PADDLE_HEIGHT</span><span class="pun">-</span><span class="lit">1</span><span class="pun">))</span></li><li class="L1"><span class="pln">	</span><span class="pun">{</span></li><li class="L2"><span class="pln">		ballposx </span><span class="pun">=</span><span class="pln"> </span><span class="lit">75</span><span class="pun">+(</span><span class="pln">PADDLE_WIDTH</span><span class="pun">-</span><span class="lit">1</span><span class="pun">);</span></li><li class="L3"><span class="pln">		ballvelx </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">ballvelx</span><span class="pun">;</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">		</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballvelx </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></li><li class="L6"><span class="pln">			ballvelx </span><span class="pun">+=</span><span class="pln"> vel_threshold</span><span class="pun">;</span></li><li class="L7"><span class="pln">		</span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballvelx </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></li><li class="L8"><span class="pln">			ballvelx </span><span class="pun">-=</span><span class="pln"> vel_threshold</span><span class="pun">;</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">		</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballvely </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></li><li class="L1"><span class="pln">			ballvely </span><span class="pun">+=</span><span class="pln"> vel_threshold</span><span class="pun">;</span></li><li class="L2"><span class="pln">		</span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballvely </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></li><li class="L3"><span class="pln">			ballvely </span><span class="pun">-=</span><span class="pln"> vel_threshold</span><span class="pun">;</span></li><li class="L4"><span class="pln">	</span><span class="pun">}</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">ballposx </span><span class="pun">&lt;=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">SCREEN_WIDTH</span><span class="pun">-</span><span class="lit">91</span><span class="pun">))</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposx </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">SCREEN_WIDTH</span><span class="pun">-</span><span class="lit">91</span><span class="pun">)-</span><span class="pln">PADDLE_WIDTH</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposy </span><span class="pun">&gt;=</span><span class="pln"> pos2y</span><span class="pun">-(</span><span class="pln">PADDLE_WIDTH</span><span class="pun">-</span><span class="lit">1</span><span class="pun">))</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposy </span><span class="pun">&lt;=</span><span class="pln"> pos2y</span><span class="pun">+</span><span class="pln">PADDLE_HEIGHT</span><span class="pun">-</span><span class="lit">1</span><span class="pun">))</span></li><li class="L7"><span class="pln">	</span><span class="pun">{</span></li><li class="L8"><span class="pln">		ballposx </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">SCREEN_WIDTH</span><span class="pun">-</span><span class="lit">91</span><span class="pun">)-</span><span class="pln">PADDLE_WIDTH</span><span class="pun">;</span></li><li class="L9"><span class="pln">		ballvelx </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">ballvelx</span><span class="pun">;</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">		</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballvelx </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></li><li class="L2"><span class="pln">			ballvelx </span><span class="pun">+=</span><span class="pln"> vel_threshold</span><span class="pun">;</span></li><li class="L3"><span class="pln">		</span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballvelx </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></li><li class="L4"><span class="pln">			ballvelx </span><span class="pun">-=</span><span class="pln"> vel_threshold</span><span class="pun">;</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">		</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballvely </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></li><li class="L7"><span class="pln">			ballvely </span><span class="pun">+=</span><span class="pln"> vel_threshold</span><span class="pun">;</span></li><li class="L8"><span class="pln">		</span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballvely </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></li><li class="L9"><span class="pln">			ballvely </span><span class="pun">-=</span><span class="pln"> vel_threshold</span><span class="pun">;</span></li><li class="L0"><span class="pln">	</span><span class="pun">}</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">	</span><span class="com">// back checking for both paddles</span></li><li class="L3"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">ballposx </span><span class="pun">==</span><span class="pln"> </span><span class="lit">75</span><span class="pun">-</span><span class="pln">PADDLE_WIDTH</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposy </span><span class="pun">&gt;=</span><span class="pln"> posy</span><span class="pun">-(</span><span class="pln">PADDLE_WIDTH</span><span class="pun">-</span><span class="lit">1</span><span class="pun">))</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposy </span><span class="pun">&lt;=</span><span class="pln"> posy</span><span class="pun">+</span><span class="pln">PADDLE_HEIGHT</span><span class="pun">-</span><span class="lit">1</span><span class="pun">))</span></li><li class="L4"><span class="pln">		ballvelx </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">ballvelx</span><span class="pun">;</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">ballposx </span><span class="pun">==</span><span class="pln"> </span><span class="pun">(</span><span class="pln">SCREEN_WIDTH</span><span class="pun">-</span><span class="lit">91</span><span class="pun">)+</span><span class="pln">PADDLE_WIDTH</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposy </span><span class="pun">&gt;=</span><span class="pln"> pos2y</span><span class="pun">-(</span><span class="pln">PADDLE_WIDTH</span><span class="pun">-</span><span class="lit">1</span><span class="pun">))</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposy </span><span class="pun">&lt;=</span><span class="pln"> pos2y</span><span class="pun">+</span><span class="pln">PADDLE_HEIGHT</span><span class="pun">-</span><span class="lit">1</span><span class="pun">))</span></li><li class="L7"><span class="pln">		ballvelx </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">ballvelx</span><span class="pun">;</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">	</span><span class="com">// Top and bottom checking for paddle1</span></li><li class="L0"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">ballposy </span><span class="pun">==</span><span class="pln"> posy</span><span class="pun">-</span><span class="pln">PADDLE_WIDTH</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposx </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">75</span><span class="pun">-(</span><span class="pln">PADDLE_WIDTH</span><span class="pun">-</span><span class="lit">1</span><span class="pun">))</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposx </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">75</span><span class="pun">+(</span><span class="pln">PADDLE_WIDTH</span><span class="pun">-</span><span class="lit">1</span><span class="pun">)))</span></li><li class="L1"><span class="pln">		ballvely </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">ballvely</span><span class="pun">;</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">ballposy </span><span class="pun">==</span><span class="pln"> posy</span><span class="pun">+</span><span class="pln">PADDLE_HEIGHT</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposx </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">75</span><span class="pun">-(</span><span class="pln">PADDLE_WIDTH</span><span class="pun">-</span><span class="lit">1</span><span class="pun">))</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposx </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">75</span><span class="pun">+(</span><span class="pln">PADDLE_WIDTH</span><span class="pun">-</span><span class="lit">1</span><span class="pun">)))</span></li><li class="L4"><span class="pln">		ballvely </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">ballvely</span><span class="pun">;</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">	</span><span class="com">// Top and bottom checking for paddle 2</span></li><li class="L7"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">ballposy </span><span class="pun">==</span><span class="pln"> pos2y</span><span class="pun">-</span><span class="pln">PADDLE_WIDTH</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposx </span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">SCREEN_WIDTH</span><span class="pun">-</span><span class="lit">91</span><span class="pun">)-(</span><span class="pln">PADDLE_WIDTH</span><span class="pun">-</span><span class="lit">1</span><span class="pun">))</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposx </span><span class="pun">&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">SCREEN_WIDTH</span><span class="pun">-</span><span class="lit">91</span><span class="pun">)+(</span><span class="pln">PADDLE_WIDTH</span><span class="pun">-</span><span class="lit">1</span><span class="pun">)))</span></li><li class="L8"><span class="pln">		ballvely </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">ballvely</span><span class="pun">;</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">ballposy </span><span class="pun">==</span><span class="pln"> pos2y</span><span class="pun">+</span><span class="pln">PADDLE_HEIGHT</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposx </span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">SCREEN_WIDTH</span><span class="pun">-</span><span class="lit">91</span><span class="pun">)-(</span><span class="pln">PADDLE_WIDTH</span><span class="pun">-</span><span class="lit">1</span><span class="pun">))</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposx </span><span class="pun">&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">SCREEN_WIDTH</span><span class="pun">-</span><span class="lit">91</span><span class="pun">)+(</span><span class="pln">PADDLE_WIDTH</span><span class="pun">-</span><span class="lit">1</span><span class="pun">)))</span></li><li class="L1"><span class="pln">		ballvely </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">ballvely</span><span class="pun">;</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposx </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></li><li class="L4"><span class="pln">	</span><span class="pun">{</span></li><li class="L5"><span class="pln">		score1</span><span class="pun">++;</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">		</span><span class="typ">ResetVelocity</span><span class="pun">();</span></li><li class="L8"><span class="pln">	</span><span class="pun">}</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballposx </span><span class="pun">==</span><span class="pln"> SCREEN_WIDTH</span><span class="pun">-</span><span class="lit">16</span><span class="pun">)</span></li><li class="L1"><span class="pln">	</span><span class="pun">{</span></li><li class="L2"><span class="pln">		score2</span><span class="pun">++;</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">		</span><span class="typ">ResetVelocity</span><span class="pun">();</span></li><li class="L5"><span class="pln">	</span><span class="pun">}</span></li><li class="L6"><span class="pun">}</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="kwd">void</span><span class="pln"> </span><span class="typ">ResetVelocity</span><span class="pun">()</span></li><li class="L9"><span class="pun">{</span></li><li class="L0"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballvelx </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></li><li class="L1"><span class="pln">		ballvelx </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L2"><span class="pln">	</span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballvelx </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></li><li class="L3"><span class="pln">		ballvelx </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballvely </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></li><li class="L6"><span class="pln">		ballvely </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L7"><span class="pln">	</span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ballvely </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span></li><li class="L8"><span class="pln">		ballvely </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><li class="L9"><span class="pun">}</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="kwd">void</span><span class="pln"> pongUpdateAndRender</span><span class="pun">()</span></li><li class="L2"><span class="pun">{</span></li><li class="L3"><span class="pln">	</span><span class="kwd">int</span><span class="pln"> tick </span><span class="pun">=</span><span class="pln"> SDL_GetTicks</span><span class="pun">();</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">	updateball</span><span class="pun">();</span></li><li class="L6"><span class="pln">	updatepaddle1</span><span class="pun">();</span></li><li class="L7"><span class="pln">	updatepaddle2</span><span class="pun">();</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">	drawsprite</span><span class="pun">(</span><span class="pln">ballposx</span><span class="pun">,</span><span class="pln"> ballposy</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">	drawpaddlesprite</span><span class="pun">(</span><span class="lit">75</span><span class="pun">,</span><span class="pln"> posy</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></li><li class="L2"><span class="pln">	drawpaddlesprite</span><span class="pun">((</span><span class="pln">SCREEN_WIDTH</span><span class="pun">-</span><span class="lit">91</span><span class="pun">),</span><span class="pln"> pos2y</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">	drawscore</span><span class="pun">();</span></li><li class="L5"><span class="pln">	drawline</span><span class="pun">();</span></li><li class="L6"><span class="pun">}</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="kwd">void</span><span class="pln"> drawscore</span><span class="pun">()</span></li><li class="L9"><span class="pun">{</span></li><li class="L0"><span class="pln">	drawglyph</span><span class="pun">(</span><span class="pln">score1</span><span class="pun">,</span><span class="pln"> SCREEN_WIDTH</span><span class="pun">/</span><span class="lit">2</span><span class="pun">+</span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">25</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></li><li class="L1"><span class="pln">	drawglyph</span><span class="pun">(</span><span class="pln">score2</span><span class="pun">,</span><span class="pln"> SCREEN_WIDTH</span><span class="pun">/</span><span class="lit">2</span><span class="pun">-</span><span class="lit">12</span><span class="pun">-</span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">25</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></li><li class="L2"><span class="pun">}</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="kwd">void</span><span class="pln"> drawglyph</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> num</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> r</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> g</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> b</span><span class="pun">)</span></li><li class="L5"><span class="pun">{</span></li><li class="L6"><span class="pln">	</span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">glyph</span><span class="pun">;</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">	</span><span class="kwd">switch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">num</span><span class="pun">)</span></li><li class="L9"><span class="pln">	</span><span class="pun">{</span></li><li class="L0"><span class="pln">	</span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0</span><span class="pun">:</span></li><li class="L1"><span class="pln">		glyph </span><span class="pun">=</span><span class="pln"> num0</span><span class="pun">;</span></li><li class="L2"><span class="pln">		</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L3"><span class="pln">	</span><span class="kwd">case</span><span class="pln"> </span><span class="lit">1</span><span class="pun">:</span></li><li class="L4"><span class="pln">		glyph </span><span class="pun">=</span><span class="pln"> num1</span><span class="pun">;</span></li><li class="L5"><span class="pln">		</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L6"><span class="pln">	</span><span class="kwd">case</span><span class="pln"> </span><span class="lit">2</span><span class="pun">:</span></li><li class="L7"><span class="pln">		glyph </span><span class="pun">=</span><span class="pln"> num2</span><span class="pun">;</span></li><li class="L8"><span class="pln">		</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L9"><span class="pln">	</span><span class="kwd">case</span><span class="pln"> </span><span class="lit">3</span><span class="pun">:</span></li><li class="L0"><span class="pln">		glyph </span><span class="pun">=</span><span class="pln"> num3</span><span class="pun">;</span></li><li class="L1"><span class="pln">		</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L2"><span class="pln">	</span><span class="kwd">case</span><span class="pln"> </span><span class="lit">4</span><span class="pun">:</span></li><li class="L3"><span class="pln">		glyph </span><span class="pun">=</span><span class="pln"> num4</span><span class="pun">;</span></li><li class="L4"><span class="pln">		</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L5"><span class="pln">	</span><span class="kwd">case</span><span class="pln"> </span><span class="lit">5</span><span class="pun">:</span></li><li class="L6"><span class="pln">		glyph </span><span class="pun">=</span><span class="pln"> num5</span><span class="pun">;</span></li><li class="L7"><span class="pln">		</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L8"><span class="pln">	</span><span class="kwd">case</span><span class="pln"> </span><span class="lit">6</span><span class="pun">:</span></li><li class="L9"><span class="pln">		glyph </span><span class="pun">=</span><span class="pln"> num6</span><span class="pun">;</span></li><li class="L0"><span class="pln">		</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L1"><span class="pln">	</span><span class="kwd">case</span><span class="pln"> </span><span class="lit">7</span><span class="pun">:</span></li><li class="L2"><span class="pln">		glyph </span><span class="pun">=</span><span class="pln"> num7</span><span class="pun">;</span></li><li class="L3"><span class="pln">		</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L4"><span class="pln">	</span><span class="kwd">case</span><span class="pln"> </span><span class="lit">8</span><span class="pun">:</span></li><li class="L5"><span class="pln">		glyph </span><span class="pun">=</span><span class="pln"> num8</span><span class="pun">;</span></li><li class="L6"><span class="pln">		</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L7"><span class="pln">	</span><span class="kwd">case</span><span class="pln"> </span><span class="lit">9</span><span class="pun">:</span></li><li class="L8"><span class="pln">		glyph </span><span class="pun">=</span><span class="pln"> num9</span><span class="pun">;</span></li><li class="L9"><span class="pln">		</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L0"><span class="pln">	</span><span class="kwd">default</span><span class="pun">:</span></li><li class="L1"><span class="pln">		glyph </span><span class="pun">=</span><span class="pln"> num0</span><span class="pun">;</span></li><li class="L2"><span class="pln">		</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L3"><span class="pln">	</span><span class="pun">}</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">	glMatrixMode</span><span class="pun">(</span><span class="pln">GL_PROJECTION</span><span class="pun">);</span></li><li class="L6"><span class="pln">	glPushMatrix</span><span class="pun">();</span></li><li class="L7"><span class="pln">	glLoadIdentity</span><span class="pun">();</span></li><li class="L8"><span class="pln">	gluOrtho2D</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> SCREEN_WIDTH</span><span class="pun">,</span><span class="pln"> SCREEN_HEIGHT</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">	glColor4f</span><span class="pun">(</span><span class="pln">r</span><span class="pun">,</span><span class="pln">g</span><span class="pun">,</span><span class="pln">b</span><span class="pun">,</span><span class="lit">1.0f</span><span class="pun">);</span></li><li class="L1"><span class="pln">	glBegin</span><span class="pun">(</span><span class="pln">GL_POINTS</span><span class="pun">);</span></li><li class="L2"><span class="pln">		</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">20</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L3"><span class="pln">		</span><span class="pun">{</span></li><li class="L4"><span class="pln">			</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">12</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">++,</span><span class="pln"> c</span><span class="pun">++)</span></li><li class="L5"><span class="pln">			</span><span class="pun">{</span></li><li class="L6"><span class="pln">				</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">glyph</span><span class="pun">[</span><span class="pln">c</span><span class="pun">])</span></li><li class="L7"><span class="pln">				</span><span class="pun">{</span></li><li class="L8"><span class="pln">					glVertex2i</span><span class="pun">(</span><span class="pln">x</span><span class="pun">+</span><span class="pln">j</span><span class="pun">,</span><span class="pln">y</span><span class="pun">+</span><span class="pln">i</span><span class="pun">);</span></li><li class="L9"><span class="pln">				</span><span class="pun">}</span></li><li class="L0"><span class="pln">			</span><span class="pun">}</span></li><li class="L1"><span class="pln">		</span><span class="pun">}</span></li><li class="L2"><span class="pln">	glPopMatrix</span><span class="pun">();</span></li><li class="L3"><span class="pun">}</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="kwd">void</span><span class="pln"> drawsprite</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> r</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> g</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> b</span><span class="pun">)</span></li><li class="L6"><span class="pun">{</span></li><li class="L7"><span class="pln">	glBegin</span><span class="pun">(</span><span class="pln">GL_POINTS</span><span class="pun">);</span></li><li class="L8"><span class="pln">	glColor4f</span><span class="pun">(</span><span class="pln">r</span><span class="pun">,</span><span class="pln">g</span><span class="pun">,</span><span class="pln">b</span><span class="pun">,</span><span class="lit">1.0f</span><span class="pun">);</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">	</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">16</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L1"><span class="pln">	</span><span class="pun">{</span></li><li class="L2"><span class="pln">		</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">16</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">++,</span><span class="pln"> c</span><span class="pun">++)</span></li><li class="L3"><span class="pln">		</span><span class="pun">{</span></li><li class="L4"><span class="pln">			</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">sprite</span><span class="pun">[</span><span class="pln">c</span><span class="pun">])</span></li><li class="L5"><span class="pln">			</span><span class="pun">{</span></li><li class="L6"><span class="pln">				glVertex2i</span><span class="pun">(</span><span class="pln">x</span><span class="pun">+</span><span class="pln">j</span><span class="pun">,</span><span class="pln">y</span><span class="pun">+</span><span class="pln">i</span><span class="pun">);</span></li><li class="L7"><span class="pln">			</span><span class="pun">}</span></li><li class="L8"><span class="pln">		</span><span class="pun">}</span></li><li class="L9"><span class="pln">	</span><span class="pun">}</span></li><li class="L0"><span class="pln">	glEnd</span><span class="pun">();</span></li><li class="L1"><span class="pun">}</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="com">#define</span><span class="pln"> LINE_SPACING </span><span class="lit">5</span></li><li class="L4"><span class="kwd">void</span><span class="pln"> drawline</span><span class="pun">()</span></li><li class="L5"><span class="pun">{</span></li><li class="L6"><span class="pln">	glBegin</span><span class="pun">(</span><span class="pln">GL_LINES</span><span class="pun">);</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">	glColor4f</span><span class="pun">(</span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">);</span><span class="pln"> </span><span class="com">// white divider line in the middle</span></li><li class="L9"><span class="pln">	</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">SCREEN_HEIGHT</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">+=</span><span class="pln">LINE_SPACING</span><span class="pun">*</span><span class="lit">2</span><span class="pun">)</span></li><li class="L0"><span class="pln">	</span><span class="pun">{</span></li><li class="L1"><span class="pln">		glVertex2i</span><span class="pun">(</span><span class="pln">SCREEN_WIDTH</span><span class="pun">/</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">);</span></li><li class="L2"><span class="pln">		glVertex2i</span><span class="pun">(</span><span class="pln">SCREEN_WIDTH</span><span class="pun">/</span><span class="lit">2</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">+</span><span class="pln">LINE_SPACING</span><span class="pun">);</span></li><li class="L3"><span class="pln">	</span><span class="pun">}</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">	glEnd</span><span class="pun">();</span></li><li class="L6"><span class="pun">}</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="kwd">void</span><span class="pln"> pongInit</span><span class="pun">()</span></li><li class="L9"><span class="pun">{</span></li><li class="L0"><span class="pln">	printf</span><span class="pun">(</span><span class="str">"SCREEN_HEIGHT=%d\n"</span><span class="pun">,</span><span class="pln"> SCREEN_HEIGHT</span><span class="pun">);</span></li><li class="L1"><span class="pln">	</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> randomNum</span><span class="pun">();</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></li><li class="L4"><span class="pln">		ballvelx </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><li class="L5"><span class="pln">	</span><span class="kwd">else</span></li><li class="L6"><span class="pln">		ballvelx </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">	i </span><span class="pun">=</span><span class="pln"> randomNum</span><span class="pun">();</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></li><li class="L1"><span class="pln">		ballvely </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><li class="L2"><span class="pln">	</span><span class="kwd">else</span></li><li class="L3"><span class="pln">		ballvely </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L4"><span class="pun">}</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="kwd">void</span><span class="pln"> drawpaddlesprite</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> r</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> g</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> b</span><span class="pun">)</span></li><li class="L7"><span class="pun">{</span></li><li class="L8"><span class="pln">	glBegin</span><span class="pun">(</span><span class="pln">GL_POINTS</span><span class="pun">);</span></li><li class="L9"><span class="pln">	glColor4f</span><span class="pun">(</span><span class="pln">r</span><span class="pun">,</span><span class="pln">g</span><span class="pun">,</span><span class="pln">b</span><span class="pun">,</span><span class="lit">1.0f</span><span class="pun">);</span></li><li class="L0"><span class="pln">	</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> PADDLE_HEIGHT</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></li><li class="L1"><span class="pln">	</span><span class="pun">{</span></li><li class="L2"><span class="pln">		</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&lt;</span><span class="pln"> PADDLE_WIDTH</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">++,</span><span class="pln"> c</span><span class="pun">++)</span></li><li class="L3"><span class="pln">		</span><span class="pun">{</span></li><li class="L4"><span class="pln">			glVertex2i</span><span class="pun">(</span><span class="pln">x</span><span class="pun">+</span><span class="pln">j</span><span class="pun">,</span><span class="pln">y</span><span class="pun">+</span><span class="pln">i</span><span class="pun">);</span></li><li class="L5"><span class="pln">		</span><span class="pun">}</span></li><li class="L6"><span class="pln">	</span><span class="pun">}</span></li><li class="L7"><span class="pln">	glEnd</span><span class="pun">();</span></li><li class="L8"><span class="pun">}</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="kwd">void</span><span class="pln"> pongHandleKeyDown</span><span class="pun">(</span><span class="pln">SDL_keysym </span><span class="pun">*</span><span class="pln">keysym</span><span class="pun">)</span></li><li class="L1"><span class="pun">{</span></li><li class="L2"><span class="pln">	</span><span class="kwd">switch</span><span class="pun">(</span><span class="pln">keysym</span><span class="pun">-&gt;</span><span class="pln">sym</span><span class="pun">)</span></li><li class="L3"><span class="pln">	</span><span class="pun">{</span></li><li class="L4"><span class="pln">	</span><span class="kwd">case</span><span class="pln"> SDLK_UP</span><span class="pun">:</span></li><li class="L5"><span class="pln">		paddle2yvel </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><li class="L6"><span class="pln">		</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L7"><span class="pln">	</span><span class="kwd">case</span><span class="pln"> SDLK_DOWN</span><span class="pun">:</span></li><li class="L8"><span class="pln">		paddle2yvel </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L9"><span class="pln">		</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L0"><span class="pln">	</span><span class="com">/*case SDLK_a:</span></li><li class="L1"><span class="com">		paddle1yvel = -1;</span></li><li class="L2"><span class="com">		break;</span></li><li class="L3"><span class="com">	case SDLK_z:</span></li><li class="L4"><span class="com">		paddle1yvel = 1;</span></li><li class="L5"><span class="com">		break; */</span></li><li class="L6"><span class="pln">	</span><span class="kwd">default</span><span class="pun">:</span></li><li class="L7"><span class="pln">		</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L8"><span class="pln">	</span><span class="pun">}</span></li><li class="L9"><span class="pun">}</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="kwd">void</span><span class="pln"> pongHandleKeyUp</span><span class="pun">(</span><span class="pln">SDL_keysym </span><span class="pun">*</span><span class="pln">keysym</span><span class="pun">)</span></li><li class="L2"><span class="pun">{</span></li><li class="L3"><span class="pln">	</span><span class="kwd">switch</span><span class="pun">(</span><span class="pln">keysym</span><span class="pun">-&gt;</span><span class="pln">sym</span><span class="pun">)</span></li><li class="L4"><span class="pln">	</span><span class="pun">{</span></li><li class="L5"><span class="pln">	</span><span class="kwd">case</span><span class="pln"> SDLK_UP</span><span class="pun">:</span></li><li class="L6"><span class="pln">		paddle2yvel </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L7"><span class="pln">		</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L8"><span class="pln">	</span><span class="kwd">case</span><span class="pln"> SDLK_DOWN</span><span class="pun">:</span></li><li class="L9"><span class="pln">		paddle2yvel </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L0"><span class="pln">		</span><span class="kwd">break</span><span class="pun">;</span></li><li class="L1"><span class="com">/*	case SDLK_a:</span></li><li class="L2"><span class="com">		paddle1yvel = 0;</span></li><li class="L3"><span class="com">		break;</span></li><li class="L4"><span class="com">	case SDLK_z:</span></li><li class="L5"><span class="com">		paddle1yvel = 0;</span></li><li class="L6"><span class="com">		break; */</span></li><li class="L7"><span class="pln">    </span><span class="kwd">default</span><span class="pun">:</span></li><li class="L8"><span class="pln">        </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L9"><span class="pln">	</span><span class="pun">}</span></li><li class="L0"><span class="pun">}</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="kwd">void</span><span class="pln"> updatepaddle1</span><span class="pun">()</span></li><li class="L3"><span class="pun">{</span></li><li class="L4"><span class="pln">    </span><span class="com">//printf("updating...\n");</span></li><li class="L5"><span class="pln">	posy </span><span class="pun">+=</span><span class="pln"> paddle1yvel</span><span class="pun">;</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">posy </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></li><li class="L8"><span class="pln">		posy </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L9"><span class="pln">	</span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">posy </span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">SCREEN_HEIGHT </span><span class="pun">-</span><span class="pln"> </span><span class="lit">64</span><span class="pun">))</span></li><li class="L0"><span class="pln">		posy </span><span class="pun">=</span><span class="pln"> SCREEN_HEIGHT </span><span class="pun">-</span><span class="pln"> </span><span class="lit">64</span><span class="pun">;</span></li><li class="L1"><span class="pun">}</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="kwd">void</span><span class="pln"> updatepaddle2</span><span class="pun">()</span></li><li class="L4"><span class="pun">{</span></li><li class="L5"><span class="pln">	pos2y </span><span class="pun">+=</span><span class="pln"> paddle2yvel</span><span class="pun">;</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">	</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos2y </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></li><li class="L8"><span class="pln">		pos2y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L9"><span class="pln">	</span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pos2y </span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">SCREEN_HEIGHT </span><span class="pun">-</span><span class="pln"> </span><span class="lit">64</span><span class="pun">))</span></li><li class="L0"><span class="pln">		pos2y </span><span class="pun">=</span><span class="pln"> SCREEN_HEIGHT </span><span class="pun">-</span><span class="pln"> </span><span class="lit">64</span><span class="pun">;</span></li><li class="L1"><span class="pun">}</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="kwd">int</span><span class="pln"> randomNum</span><span class="pun">()</span><span class="pln"> </span><span class="com">// Obtain a random integer between defined range</span></li><li class="L4"><span class="pun">{</span></li><li class="L5"><span class="pln">	</span><span class="kwd">int</span><span class="pln"> range</span><span class="pun">=(</span><span class="lit">1</span><span class="pun">-</span><span class="lit">0</span><span class="pun">)+</span><span class="lit">1</span><span class="pun">;</span><span class="pln"> </span><span class="com">// Calculate range</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">	</span><span class="com">// Use rand()</span></li><li class="L8"><span class="pln">	</span><span class="kwd">int</span><span class="pln"> retval</span><span class="pun">=</span><span class="lit">0</span><span class="pun">+</span><span class="kwd">int</span><span class="pun">(</span><span class="pln">range</span><span class="pun">*</span><span class="pln">rand</span><span class="pun">()/(</span><span class="pln">RAND_MAX </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1.0</span><span class="pun">));</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">	</span><span class="kwd">return</span><span class="pln"> retval</span><span class="pun">;</span><span class="pln"> </span><span class="com">// Return the number</span></li><li class="L1"><span class="pun">}</span></li><li class="L2"><span class="pln">                 </span></li></ol></pre>
                 <h5>pong.h</h5>
                 <pre class="prettyprint linenums" id="gl_plot_pong_h"><ol class="linenums"><li class="L0"><span class="com">#ifndef</span><span class="pln"> PONG_H_</span></li><li class="L1"><span class="com">#define</span><span class="pln"> PONG_H_</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="kwd">void</span><span class="pln"> pongInit</span><span class="pun">();</span></li><li class="L4"><span class="kwd">void</span><span class="pln"> pongUpdateAndRender</span><span class="pun">();</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="kwd">void</span><span class="pln"> pongHandleKeyDown</span><span class="pun">(</span><span class="pln">SDL_keysym </span><span class="pun">*</span><span class="pln">keysym</span><span class="pun">);</span></li><li class="L7"><span class="kwd">void</span><span class="pln"> pongHandleKeyUp</span><span class="pun">(</span><span class="pln">SDL_keysym </span><span class="pun">*</span><span class="pln">keysym</span><span class="pun">);</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="kwd">extern</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> posy</span><span class="pun">,</span><span class="pln"> paddle1yvel</span><span class="pun">;</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="com">#endif</span></li><li class="L2"><span class="pln">                 </span></li></ol></pre>
                 <h5>serial.cpp</h5>
                 <pre class="prettyprint linenums" id="gl_plot_serial_cpp"><ol class="linenums"><li class="L0"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdio.h&gt;</span><span class="pln">   </span><span class="com">// Standard input/output definitions</span></li><li class="L1"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;stdlib.h&gt;</span></li><li class="L2"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;string.h&gt;</span><span class="pln">  </span><span class="com">// String function definitions</span></li><li class="L3"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;unistd.h&gt;</span><span class="pln">  </span><span class="com">// UNIX standard function definitions</span></li><li class="L4"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;fcntl.h&gt;</span><span class="pln">   </span><span class="com">// File control definitions</span></li><li class="L5"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;errno.h&gt;</span><span class="pln">   </span><span class="com">// Error number definitions</span></li><li class="L6"><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;termios.h&gt;</span><span class="pln"> </span><span class="com">// POSIX terminal control definitions</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="com">#include</span><span class="pln"> </span><span class="str">"serial.h"</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="com">#define</span><span class="pln"> BUFFER_SIZE </span><span class="lit">80</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="kwd">char</span><span class="pln"> lastError</span><span class="pun">[</span><span class="lit">1024</span><span class="pun">],</span><span class="pln"> serialBuffer</span><span class="pun">[</span><span class="pln">BUFFER_SIZE</span><span class="pun">];</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="kwd">int</span><span class="pln"> usbdev </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="com">#define</span><span class="pln"> PORT_NAME </span><span class="str">"/dev/ttyUSB0"</span></li><li class="L7"><span class="com">#define</span><span class="pln"> BAUD_RATE B57600</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="com">//#define NULL_SERIAL</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="kwd">bool</span><span class="pln"> openSerial</span><span class="pun">()</span></li><li class="L2"><span class="pun">{</span></li><li class="L3"><span class="com">#ifndef</span><span class="pln"> NULL_SERIAL</span></li><li class="L4"><span class="pln">    system</span><span class="pun">(</span><span class="str">"stty -F /dev/ttyUSB0 57600 cs8 -cstopb -parity -icanon min 1 time 1"</span><span class="pun">);</span></li><li class="L5"><span class="pln">    usbdev </span><span class="pun">=</span><span class="pln"> open</span><span class="pun">(</span><span class="str">"/dev/ttyUSB0"</span><span class="pun">,</span><span class="pln"> O_RDWR</span><span class="pun">);</span></li><li class="L6"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">usbdev </span><span class="pun">!=</span><span class="pln"> NULL</span><span class="pun">);</span></li><li class="L7"><span class="com">#else</span></li><li class="L8"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></li><li class="L9"><span class="com">#endif</span></li><li class="L0"><span class="pun">}</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="kwd">char</span><span class="pun">*</span><span class="pln"> readByte</span><span class="pun">()</span></li><li class="L3"><span class="pun">{</span></li><li class="L4"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> NULL</span><span class="pun">;</span></li><li class="L5"><span class="pun">}</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> readSerialValue</span><span class="pun">()</span></li><li class="L8"><span class="pun">{</span></li><li class="L9"><span class="com">#ifndef</span><span class="pln"> NULL_SERIAL</span></li><li class="L0"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> ptr</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span></li><li class="L1"><span class="pln">    </span><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> last_read </span><span class="pun">=</span><span class="pln"> NULL</span><span class="pun">;</span></li><li class="L2"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ptr </span><span class="pun">&lt;</span><span class="pln"> BUFFER_SIZE </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> last_read </span><span class="pun">!=</span><span class="pln"> </span><span class="str">'\n'</span><span class="pun">)</span></li><li class="L3"><span class="pln">    </span><span class="pun">{</span></li><li class="L4"><span class="pln">        read</span><span class="pun">(</span><span class="pln">usbdev</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">serialBuffer</span><span class="pun">[</span><span class="pln">ptr</span><span class="pun">],</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></li><li class="L5"><span class="pln">        last_read </span><span class="pun">=</span><span class="pln"> serialBuffer</span><span class="pun">[</span><span class="pln">ptr</span><span class="pun">];</span></li><li class="L6"><span class="pln">        ptr</span><span class="pun">++;</span></li><li class="L7"><span class="pln">    </span><span class="pun">}</span></li><li class="L8"><span class="pln">&nbsp;</span></li><li class="L9"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> val </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L0"><span class="pln">    sscanf</span><span class="pun">(</span><span class="pln">serialBuffer</span><span class="pun">,</span><span class="pln"> </span><span class="str">"%d\n"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">val</span><span class="pun">);</span></li><li class="L1"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> val</span><span class="pun">;</span></li><li class="L2"><span class="com">#else</span></li><li class="L3"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L4"><span class="com">#endif</span></li><li class="L5"><span class="pun">}</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="kwd">void</span><span class="pln"> closeSerial</span><span class="pun">()</span></li><li class="L8"><span class="pun">{</span></li><li class="L9"><span class="com">#ifndef</span><span class="pln"> NULL_SERIAL</span></li><li class="L0"><span class="pln">    close</span><span class="pun">(</span><span class="pln">usbdev</span><span class="pun">);</span></li><li class="L1"><span class="com">#endif</span></li><li class="L2"><span class="pun">}</span></li><li class="L3"><span class="pln">                 </span></li></ol></pre>
                 <h5>serial.h</h5>
                 <pre class="prettyprint linenums" id="gl_plot_serial_h"><ol class="linenums"><li class="L0"><span class="com">#ifndef</span><span class="pln"> SERIAL_H_INCLUDED</span></li><li class="L1"><span class="com">#define</span><span class="pln"> SERIAL_H_INCLUDED</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="kwd">bool</span><span class="pln"> openSerial</span><span class="pun">();</span></li><li class="L4"><span class="kwd">void</span><span class="pln"> closeSerial</span><span class="pun">();</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="kwd">unsigned</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> readSerialValue</span><span class="pun">();</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="com">#endif</span><span class="pln"> </span><span class="com">// SERIAL_H_INCLUDED</span></li><li class="L9"><span class="pln">                 </span></li></ol></pre>
              
              <h4>MATLAB Plotting Source Code</h4><br>
                 <h5>plot_samples.m</h5>
                 <pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pun">%</span><span class="pln"> settings</span></li><li class="L1"><span class="typ">SerialPort</span><span class="pun">=</span><span class="str">'com3'</span><span class="pun">;</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> serial port</span></li><li class="L2"><span class="pln">N</span><span class="pun">=</span><span class="lit">200</span><span class="pun">;</span></li><li class="L3"><span class="typ">Fs</span><span class="pun">=</span><span class="lit">200</span><span class="pun">;</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">m</span><span class="pun">=</span><span class="pln">zeros</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln">N</span><span class="pun">);</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">s </span><span class="pun">=</span><span class="pln"> serial</span><span class="pun">(</span><span class="typ">SerialPort</span><span class="pun">);</span></li><li class="L8"><span class="kwd">set</span><span class="pun">(</span><span class="pln">s</span><span class="pun">,</span><span class="str">'BaudRate'</span><span class="pun">,</span><span class="lit">57600</span><span class="pun">);</span></li><li class="L9"><span class="pln">fopen</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="kwd">for</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">:</span><span class="pln">N</span></li><li class="L2"><span class="pln">    datum </span><span class="pun">=</span><span class="pln"> fscanf</span><span class="pun">(</span><span class="pln">s</span><span class="pun">,</span><span class="pln"> </span><span class="str">'%s'</span><span class="pun">);</span></li><li class="L3"><span class="pln">    fprintf</span><span class="pun">(</span><span class="str">'%s\n'</span><span class="pun">,</span><span class="pln"> datum</span><span class="pun">);</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">length</span><span class="pun">(</span><span class="pln">datum</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></li><li class="L6"><span class="pln">        m</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> str2num</span><span class="pun">(</span><span class="pln">datum</span><span class="pun">);</span></li><li class="L7"><span class="pln">    </span><span class="kwd">else</span></li><li class="L8"><span class="pln">        m</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L9"><span class="pln">    </span><span class="kwd">end</span></li><li class="L0"><span class="kwd">end</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pun">%</span><span class="pln"> </span><span class="typ">Clean</span><span class="pln"> up the serial port</span></li><li class="L3"><span class="pln">fclose</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span></li><li class="L4"><span class="kwd">delete</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span></li><li class="L5"><span class="pln">clear s</span><span class="pun">;</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pun">%</span><span class="pln"> </span><span class="typ">Filter</span><span class="pln"> m </span><span class="kwd">with</span><span class="pln"> </span><span class="lit">60</span><span class="pln"> </span><span class="typ">Hz</span><span class="pln"> notch</span></li><li class="L8"><span class="typ">Wo</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">60</span><span class="pun">/(</span><span class="typ">Fs</span><span class="pun">/</span><span class="lit">2</span><span class="pun">);</span><span class="pln">  BW </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Wo</span><span class="pun">/</span><span class="lit">35</span><span class="pun">;</span></li><li class="L9"><span class="pun">[</span><span class="pln">b</span><span class="pun">,</span><span class="pln">a</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> iirnotch</span><span class="pun">(</span><span class="typ">Wo</span><span class="pun">,</span><span class="pln">BW</span><span class="pun">);</span></li><li class="L0"><span class="pln">m </span><span class="pun">=</span><span class="pln"> filter</span><span class="pun">(</span><span class="pln">b</span><span class="pun">,</span><span class="pln">a</span><span class="pun">,</span><span class="pln">m</span><span class="pun">);</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pun">%</span><span class="pln"> </span><span class="typ">Remove</span><span class="pln"> DC offset</span></li><li class="L3"><span class="pln">mu </span><span class="pun">=</span><span class="pln"> mean</span><span class="pun">(</span><span class="pln">m</span><span class="pun">);</span></li><li class="L4"><span class="pln">m </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">-</span><span class="pln"> mu </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1024</span><span class="pun">/</span><span class="lit">2</span><span class="pun">;</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">figure</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></li><li class="L7"><span class="pln">hLine </span><span class="pun">=</span><span class="pln"> plot</span><span class="pun">(</span><span class="pln">m</span><span class="pun">);</span></li><li class="L8"><span class="pln">ylim</span><span class="pun">([</span><span class="lit">0</span><span class="pln"> </span><span class="lit">1024</span><span class="pun">]);</span></li><li class="L9"><span class="kwd">set</span><span class="pun">(</span><span class="pln">hLine</span><span class="pun">,</span><span class="str">'YData'</span><span class="pun">,</span><span class="pln">m</span><span class="pun">);</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">figure</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></li><li class="L2"><span class="pln">L</span><span class="pun">=</span><span class="pln">length</span><span class="pun">(</span><span class="pln">m</span><span class="pun">);</span></li><li class="L3"><span class="pln">NFFT </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">^</span><span class="pln">nextpow2</span><span class="pun">(</span><span class="pln">L</span><span class="pun">);</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="typ">Next</span><span class="pln"> power of </span><span class="lit">2</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> length of y</span></li><li class="L4"><span class="pln">Y </span><span class="pun">=</span><span class="pln"> fft</span><span class="pun">(</span><span class="pln">m</span><span class="pun">,</span><span class="pln">NFFT</span><span class="pun">)/</span><span class="pln">L</span><span class="pun">;</span></li><li class="L5"><span class="pln">f </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Fs</span><span class="pun">/</span><span class="lit">2</span><span class="pun">*</span><span class="pln">linspace</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="pln">NFFT</span><span class="pun">/</span><span class="lit">2</span><span class="pun">+</span><span class="lit">1</span><span class="pun">);</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pun">%</span><span class="pln"> </span><span class="typ">Plot</span><span class="pln"> single</span><span class="pun">-</span><span class="pln">sided amplitude spectrum</span><span class="pun">.</span></li><li class="L8"><span class="pln">plot</span><span class="pun">(</span><span class="pln">f</span><span class="pun">,</span><span class="lit">2</span><span class="pun">*</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">Y</span><span class="pun">(</span><span class="lit">1</span><span class="pun">:</span><span class="pln">NFFT</span><span class="pun">/</span><span class="lit">2</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)))</span><span class="pln"> </span></li><li class="L9"><span class="pln">title</span><span class="pun">(</span><span class="str">'Single-Sided Amplitude Spectrum of y(t)'</span><span class="pun">)</span></li><li class="L0"><span class="pln">xlabel</span><span class="pun">(</span><span class="str">'Frequency (Hz)'</span><span class="pun">)</span></li><li class="L1"><span class="pln">ylabel</span><span class="pun">(</span><span class="str">'|Y(f)|'</span><span class="pun">)</span></li><li class="L2"><span class="pln">                 </span></li></ol></pre>
                 <h5>plot_samples_rt.m</h5>
                 <pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="pun">%</span><span class="pln"> settings</span></li><li class="L1"><span class="typ">SerialPort</span><span class="pun">=</span><span class="str">'com3'</span><span class="pun">;</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> serial port</span></li><li class="L2"><span class="pln">N</span><span class="pun">=</span><span class="lit">200</span><span class="pun">;</span></li><li class="L3"><span class="typ">Fs</span><span class="pun">=</span><span class="lit">200</span><span class="pun">;</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">m</span><span class="pun">=</span><span class="pln">zeros</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln">N</span><span class="pun">);</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">s </span><span class="pun">=</span><span class="pln"> serial</span><span class="pun">(</span><span class="typ">SerialPort</span><span class="pun">);</span></li><li class="L8"><span class="kwd">set</span><span class="pun">(</span><span class="pln">s</span><span class="pun">,</span><span class="str">'BaudRate'</span><span class="pun">,</span><span class="lit">57600</span><span class="pun">);</span></li><li class="L9"><span class="pln">fopen</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="kwd">for</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">:</span><span class="pln">N</span></li><li class="L2"><span class="pln">    datum </span><span class="pun">=</span><span class="pln"> fscanf</span><span class="pun">(</span><span class="pln">s</span><span class="pun">,</span><span class="pln"> </span><span class="str">'%s'</span><span class="pun">);</span></li><li class="L3"><span class="pln">    fprintf</span><span class="pun">(</span><span class="str">'%s\n'</span><span class="pun">,</span><span class="pln"> datum</span><span class="pun">);</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">length</span><span class="pun">(</span><span class="pln">datum</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></li><li class="L6"><span class="pln">        m</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> str2num</span><span class="pun">(</span><span class="pln">datum</span><span class="pun">);</span></li><li class="L7"><span class="pln">    </span><span class="kwd">else</span></li><li class="L8"><span class="pln">        m</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L9"><span class="pln">    </span><span class="kwd">end</span></li><li class="L0"><span class="kwd">end</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pun">%</span><span class="pln"> </span><span class="typ">Clean</span><span class="pln"> up the serial port</span></li><li class="L3"><span class="pln">fclose</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span></li><li class="L4"><span class="kwd">delete</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span></li><li class="L5"><span class="pln">clear s</span><span class="pun">;</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pun">%</span><span class="pln"> </span><span class="typ">Filter</span><span class="pln"> m </span><span class="kwd">with</span><span class="pln"> </span><span class="lit">60</span><span class="pln"> </span><span class="typ">Hz</span><span class="pln"> notch</span></li><li class="L8"><span class="typ">Wo</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">60</span><span class="pun">/(</span><span class="typ">Fs</span><span class="pun">/</span><span class="lit">2</span><span class="pun">);</span><span class="pln">  BW </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Wo</span><span class="pun">/</span><span class="lit">35</span><span class="pun">;</span></li><li class="L9"><span class="pun">[</span><span class="pln">b</span><span class="pun">,</span><span class="pln">a</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> iirnotch</span><span class="pun">(</span><span class="typ">Wo</span><span class="pun">,</span><span class="pln">BW</span><span class="pun">);</span></li><li class="L0"><span class="pln">m </span><span class="pun">=</span><span class="pln"> filter</span><span class="pun">(</span><span class="pln">b</span><span class="pun">,</span><span class="pln">a</span><span class="pun">,</span><span class="pln">m</span><span class="pun">);</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pun">%</span><span class="pln"> </span><span class="typ">Remove</span><span class="pln"> DC offset</span></li><li class="L3"><span class="pln">mu </span><span class="pun">=</span><span class="pln"> mean</span><span class="pun">(</span><span class="pln">m</span><span class="pun">);</span></li><li class="L4"><span class="pln">m </span><span class="pun">=</span><span class="pln"> m </span><span class="pun">-</span><span class="pln"> mu </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1024</span><span class="pun">/</span><span class="lit">2</span><span class="pun">;</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">figure</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></li><li class="L7"><span class="pln">hLine </span><span class="pun">=</span><span class="pln"> plot</span><span class="pun">(</span><span class="pln">m</span><span class="pun">);</span></li><li class="L8"><span class="pln">ylim</span><span class="pun">([</span><span class="lit">0</span><span class="pln"> </span><span class="lit">1024</span><span class="pun">]);</span></li><li class="L9"><span class="kwd">set</span><span class="pun">(</span><span class="pln">hLine</span><span class="pun">,</span><span class="str">'YData'</span><span class="pun">,</span><span class="pln">m</span><span class="pun">);</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pln">figure</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></li><li class="L2"><span class="pln">L</span><span class="pun">=</span><span class="pln">length</span><span class="pun">(</span><span class="pln">m</span><span class="pun">);</span></li><li class="L3"><span class="pln">NFFT </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">^</span><span class="pln">nextpow2</span><span class="pun">(</span><span class="pln">L</span><span class="pun">);</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="typ">Next</span><span class="pln"> power of </span><span class="lit">2</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> length of y</span></li><li class="L4"><span class="pln">Y </span><span class="pun">=</span><span class="pln"> fft</span><span class="pun">(</span><span class="pln">m</span><span class="pun">,</span><span class="pln">NFFT</span><span class="pun">)/</span><span class="pln">L</span><span class="pun">;</span></li><li class="L5"><span class="pln">f </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Fs</span><span class="pun">/</span><span class="lit">2</span><span class="pun">*</span><span class="pln">linspace</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="pln">NFFT</span><span class="pun">/</span><span class="lit">2</span><span class="pun">+</span><span class="lit">1</span><span class="pun">);</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pun">%</span><span class="pln"> </span><span class="typ">Plot</span><span class="pln"> single</span><span class="pun">-</span><span class="pln">sided amplitude spectrum</span><span class="pun">.</span></li><li class="L8"><span class="pln">plot</span><span class="pun">(</span><span class="pln">f</span><span class="pun">,</span><span class="lit">2</span><span class="pun">*</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">Y</span><span class="pun">(</span><span class="lit">1</span><span class="pun">:</span><span class="pln">NFFT</span><span class="pun">/</span><span class="lit">2</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)))</span><span class="pln"> </span></li><li class="L9"><span class="pln">title</span><span class="pun">(</span><span class="str">'Single-Sided Amplitude Spectrum of y(t)'</span><span class="pun">)</span></li><li class="L0"><span class="pln">xlabel</span><span class="pun">(</span><span class="str">'Frequency (Hz)'</span><span class="pun">)</span></li><li class="L1"><span class="pln">ylabel</span><span class="pun">(</span><span class="str">'|Y(f)|'</span><span class="pun">)</span><span class="pln"> </span></li><li class="L2"><span class="pln">                 </span></li></ol></pre>
                 <h5>serial_test.m</h5>
                 <pre class="prettyprint linenums"><ol class="linenums"><li class="L0"><span class="typ">SerialPort</span><span class="pun">=</span><span class="str">'com8'</span><span class="pun">;</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> serial port</span></li><li class="L1"><span class="pln">N</span><span class="pun">=</span><span class="lit">1000</span><span class="pun">;</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">m</span><span class="pun">=</span><span class="pln">zeros</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1000</span><span class="pun">);</span></li><li class="L4"><span class="pln">figure</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></li><li class="L5"><span class="pln">hLine </span><span class="pun">=</span><span class="pln"> plot</span><span class="pun">(</span><span class="pln">m</span><span class="pun">);</span></li><li class="L6"><span class="pln">ylim</span><span class="pun">([</span><span class="lit">0</span><span class="pln"> </span><span class="lit">1024</span><span class="pun">]);</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="typ">KeepRunning</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L9"><span class="kwd">while</span><span class="pln"> </span><span class="typ">KeepRunning</span></li><li class="L0"><span class="pln">    s </span><span class="pun">=</span><span class="pln"> serial</span><span class="pun">(</span><span class="typ">SerialPort</span><span class="pun">);</span></li><li class="L1"><span class="pln">    </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">s</span><span class="pun">,</span><span class="str">'BaudRate'</span><span class="pun">,</span><span class="lit">57600</span><span class="pun">);</span></li><li class="L2"><span class="pln">    fopen</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span></li><li class="L3"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">:</span><span class="pln">N</span></li><li class="L4"><span class="pln">        datum </span><span class="pun">=</span><span class="pln"> fscanf</span><span class="pun">(</span><span class="pln">s</span><span class="pun">,</span><span class="pln"> </span><span class="str">'%s'</span><span class="pun">);</span></li><li class="L5"><span class="pln">        </span><span class="pun">%</span><span class="pln">fprintf</span><span class="pun">(</span><span class="str">'%s\n'</span><span class="pun">,</span><span class="pln"> datum</span><span class="pun">);</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">length</span><span class="pun">(</span><span class="pln">datum</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span></li><li class="L8"><span class="pln">            m</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> str2num</span><span class="pun">(</span><span class="pln">datum</span><span class="pun">);</span></li><li class="L9"><span class="pln">        </span><span class="kwd">else</span></li><li class="L0"><span class="pln">            m</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L1"><span class="pln">        </span><span class="kwd">end</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ishandle</span><span class="pun">(</span><span class="lit">1</span><span class="pun">))</span></li><li class="L4"><span class="pln">            </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">hLine</span><span class="pun">,</span><span class="str">'YData'</span><span class="pun">,</span><span class="pln">m</span><span class="pun">);</span></li><li class="L5"><span class="pln">        </span><span class="kwd">else</span></li><li class="L6"><span class="pln">            </span><span class="typ">KeepRunning</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L7"><span class="pln">            </span><span class="kwd">break</span><span class="pun">;</span></li><li class="L8"><span class="pln">        </span><span class="kwd">end</span></li><li class="L9"><span class="pln">        drawnow</span></li><li class="L0"><span class="pln">    </span><span class="kwd">end</span></li><li class="L1"><span class="pln">    </span></li><li class="L2"><span class="pln">    </span><span class="pun">%</span><span class="pln"> </span><span class="typ">Clean</span><span class="pln"> up the serial port</span></li><li class="L3"><span class="pln">    fclose</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span></li><li class="L4"><span class="pln">    </span><span class="kwd">delete</span><span class="pun">(</span><span class="pln">s</span><span class="pun">);</span></li><li class="L5"><span class="pln">    clear s</span><span class="pun">;</span></li><li class="L6"><span class="kwd">end</span></li><li class="L7"><span class="pln">                 </span></li></ol></pre>
                 
            <h3>Schematics</h3>
            <p align="center"><img src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/whole.png"><br><br><strong>Figure: Project Schematics</strong></p>
            <br>
            <h3>Cost Details and Parts</h3><br>
<h5>Power Supply Circuit</h5><br>
<table class="table table-striped table-bordered table-condensed">
<thead><tr><td><b>Quantity</b></td><td><b>Part Number</b></td><td><b>Part Name</b></td><td><b>Cost</b></td></tr></thead>
<tbody>
<tr><td>1</td><td>SparkFun: COM-00102</td><td>SPDT Mini Power Switch</td><td>$1.50</td></tr>
<tr><td>1</td><td>LAB</td><td>Green LED</td><td>LAB</td></tr>
<tr><td>2</td><td>LAB</td><td>1 MΩ Resistor</td><td>LAB</td></tr>
<tr><td>3</td><td>LAB</td><td>1 kΩ Resistor</td><td>LAB</td></tr>
<tr><td>1</td><td>Pre-Owned</td><td>100 Ω Resistor</td><td>Pre-Owned (Resistor Kit)</td></tr>
<tr><td>2</td><td>LAB</td><td>Jumper Wire</td><td>2*1.00=$2.00</td></tr>
<tr><td>1</td><td>Digi-Key: BC4AAW-ND</td><td>Battery Holder 4-AA Cells</td><td>$1.33</td></tr>
<tr><td>4</td><td>Panasonic Akaline Plus</td><td>AA Battery</td><td>Pre-Owned</td></tr>
</tbody></table>

<h5>UART Opto-Isolation</h5><br>
<table class="table table-striped table-bordered table-condensed">
<thead><tr><td><b>Quantity</b></td><td><b>Part Number</b></td><td><b>Part Name</b></td><td><b>Cost</b></td></tr></thead>
<tbody>
<tr><td>1</td><td>Digi-Key: 160-1791-ND</td><td>Fairchild Semiconductor 6N137 Opto-Isolator</td><td>$1.00</td></tr>
<tr><td>1</td><td>LAB</td><td>0.01 μF Capacitor</td><td>LAB</td></tr>
<tr><td>1</td><td>Pre-Owned</td><td>220 Ω Resistor</td><td>Pre-Owned (Resistor Kit)</td></tr>
<tr><td>1</td><td>Pre-Owned</td><td>1.1 kΩ Resistor</td><td>Pre-Owned (Resistor Kit)</td></tr>
<tr><td>1</td><td>LAB</td><td>Jumper Wire</td><td>$1.00</td></tr>
<tr><td>1</td><td>LAB</td><td>DIP Socket</td><td>$0.50</td></tr>
</tbody></table>

<h5>Amplifier Board</h5><br>
<table class="table table-striped table-bordered table-condensed">
<thead><tr><td><b>Quantity</b></td><td><b>Part Number</b></td><td><b>Part Name</b></td><td><b>Cost</b></td></tr></thead>
<tbody>
<tr><td>1</td><td>Digi-Key: AD620ANZ-ND</td><td>IC AMP INST LP LN 18MA 8DIP AD620 Instrumentation Amplifier</td><td>$8.27</td></tr>
<tr><td>2</td><td>Digi-Key: CA3140EZ-ND</td><td>IC OP AMP 4.5MHZ BIMOS 8-DIP 3140 Operational Amplifier</td><td>2*1.89=$3.78</td></tr>
<tr><td>1</td><td>Digi-Key: 3386F-105LF-ND</td><td>1 MΩ Trim Potentiometer</td><td>$1.12</td></tr>
<tr><td>2</td><td>LAB</td><td>0.01 μF Capacitor</td><td>LAB</td></tr>
<tr><td>1</td><td>Digi-Key: 490-5362-ND</td><td>0.0068 μF Capacitor</td><td>$0.28</td></tr>
<tr><td>1</td><td>Digi-Key: 445-2851-ND</td><td>1 μF Capacitor</td><td>$0.38</td></tr>
<tr><td>2</td><td>Pre-Owned</td><td>.22 μF Capacitor</td><td>Pre-Owned (Capacitor Kit)</td></tr>

<tr><td>2</td><td>Pre-Owned</td><td>2.2 kΩ Resistor</td><td>Pre-Owned (Resistor Kit)</td></tr>
<tr><td>3</td><td>LAB</td><td>1 MΩ Resistor</td><td>LAB</td></tr>
<tr><td>1</td><td>LAB</td><td>10 kΩ Resistor</td><td>LAB</td></tr>
<tr><td>2</td><td>Pre-Owned</td><td>15 kΩ Resistor</td><td>Pre-Owned (Resistor Kit)</td></tr>
</tbody></table>

<h5>Misc/Other</h5><br>
<table class="table table-striped table-bordered table-condensed">
<thead><tr><td><b>Quantity</b></td><td><b>Part Number</b></td><td><b>Part Name</b></td><td><b>Cost</b></td></tr></thead>
<tbody>
<tr><td>1</td><td>LAB</td><td>Mega644</td><td>$6.00</td></tr>
<tr><td>1</td><td>LAB</td><td>FTDI USB Comms Board</td><td>$4.00</td></tr>
<tr><td>1</td><td>LAB</td><td>Target Board</td><td>$4.00</td></tr>
<tr><td>1</td><td>LAB</td><td>Target Board Socket</td><td>LAB</td></tr>
<tr><td>7</td><td>LAB</td><td>Female Wire Headers</td><td>7*0.05=$0.35</td></tr>
<tr><td>7</td><td>LAB</td><td>Female Wire Sockets</td><td>7*0.05=$0.35</td></tr>
<tr><td>1</td><td>LAB</td><td>White Board</td><td>$6.00</td></tr>
<tr><td>1</td><td>LAB</td><td>Solder Board (6 inch)</td><td>$2.50</td></tr>
<tr><td>1</td><td>Contec Medical Systems: eBay</td><td>Ten Pcs Silver Plating Electrodes</td><td>$20.00</td></tr>
<tr><td>1</td><td>Pre-Owned</td><td>Baseball Cap</td><td>Pre-Owned</td></tr>
</tbody></table>

<p>The total cost of the project was $64.36 which is rather costly (owing to the medical-grade electrodes that we used) but still well under our budget.</p><br>

            <h3>Tasks and Workload Division</h3><br>
            <p>The tasks were divided among ourselves as follows:</p>
  <dl class="dl-horizontal">
    <dt>Charles</dt>
    <dd>Software development</dd>
    <dd>Wrote the MATLAB code, AVR firmware, OpenGL C code</dd>
    <dd>BCI research, project idea</dd>
  </dl>
  
  <dl class="dl-horizontal">
    <dt>Mengxiang</dt>
    <dd>Hardware design, construction, circuit debugging</dd>
    <dd>Part selection for hardware (Digi-Key ordering)</dd>
    <dd>Testing the amplifier board</dd>
  </dl>
  
  <p>Overall, we felt this was a fair, equal division of labor.</p>
        </div>
      </div>
      <br>

      <a name="references"></a>
      <div class="row">
        <div class="span12">
          <h2>References</h2><br>
           <h4>Background sites</h4><br>
           <p>Electroencephalography (EEG) article, Wikipedia.<br><a href="http://en.wikipedia.org/wiki/Electroencephalography">http://en.wikipedia.org/wiki/Electroencephalography</a></p>
           <p>LibSVM -- A Library for Support Vector Machines<br><a href="http://www.csie.ntu.edu.tw/~cjlin/libsvm/">http://www.csie.ntu.edu.tw/~cjlin/libsvm/</a></p>
           <p>Simple Direct Media Layer (SDL)<br><a href="http://www.libsdl.org/">http://www.libsdl.org/</a></p>
           <p>FFTW<br><a href="http://www.fftw.org/">http://www.fftw.org/</a></p>
           <p>MATLAB Documentation<br><a href="http://www.mathworks.com/help/techdoc/">http://www.mathworks.com/help/techdoc/</a></p>
           <p>OpenEEG Project<br><a href="http://openeeg.sourceforge.net/">http://openeeg.sourceforge.net/</a></p>
           <br>
           
           <h4>Papers</h4><br>
           <p>Matsuoka, G. and Sugi, T. and Kawana, F. and Nakamura, M. <strong>Automatic detection of apnea and EEG arousals for sleep apnea syndrome.</strong><br>In <em>ICCAS-SICE, 2009</em>, pages 4651-4654.</p>
           <p>F. Lotte. <strong>A review of classification algorithms for EEG-based brain computer interfaces.</strong><br>In <em>Journal of Neural Engineering</em>, 2007.</p>
           <p>Hazrati MKh and Efranian A. <strong>An online EEG-based brain-computer interface for controlling hand grasp using an adaptive probabilisitc neural network.</strong><br>In <em>PubMed</em>, 2010.</p>
           <p>Jorge Baztarrica Ochoa. <strong>EEG Signal Classification for Brain Computer Interface Applications.</strong><br>Thesis, <em>École Polytechnique Federale de Lausanne</em>, 2002.</p>
           <p>Kouhyar Tavakolian, Faratash Vasefi, Kaveh Naziripour, and Siamak Reazei. <strong>Mental task classification for brain computer interface applications.</strong><br>In <em>First Canadian Student Conference on Biomedical Programming</em>.</p>
           <p>Yuanqing Li, Chuanchu Wang, Haihong Zhang, and Cuntai Guan. <strong>An EEG-based BCI System for 2D Cursor Control.</strong></p>
           <p>Ali S. AlMejrad. <strong>Human Emotions Detection using Brain Wave Signals.</strong><br>In <em>European Journal of Scientific Research</em>, 2010, pages 640-659.</p>
           <p>Akinari Onishi, Yu Zhang, Qibin Zhao, Andrzej Cichocki. <strong>Fast and Reliable P300-Based BCI with Facial Images.</strong></p>
           <p>Christoph Guger, et al. <strong>Rapid Prototyping of an EEG-based Brain-Computer Interface (BCI).</strong><br>University of Technology Graz, Austria.</p>
           <p>Schoresch Presentation Slides: <strong>Neurofeedback - applied neuroscience</strong><br>Kompetenzzentrum für Neurofeedback.</p>
           <p>Hideaki Touyama. <strong>EEG-Based Personal Identification</strong><br>Toyama Perfectural University, Japan.</p>
           <p>Chih-Wei Hsu, Chih-Chung Chang, and Chih-Jen Lin. <strong>A Practical Guide to Support Vector Classification</strong><br>Department of Computer Science, National Taiwan University, Taiwan.</p>
           <p>Muhammad Bilal Khalid, et al. <strong>Think. Done! A Brain Computer Interface (BCI)</strong><br>Thesis, National University of Sciences and Technology, Rawalpindi.</p>
           <p>Kana Omori, Tomonari Yamaguchi, and Katsuhiro Inoue. <strong>Feature Extraction from EEG Signals in P300 Spelling System</strong><br>ICROS-SICE International Joint Conferent 2009, Fukuoka International Congress Center, Japan.</p>
           <p>Dandan Huang, et al. <strong>Decoding human motor activity from EEG single trials for a discrete two-dimensional cursor control.</strong><br>IOP Publishing, Journal of Neural Engineering, 2009.</p>
           <p>Ulrich Hoffmann, et al. <strong>An efficient P300-based brain-computer interface for disabled subjects.</strong><br>Elsevier, Journal of Neuroscience Methods 2008, pages 115-125.</p>
           <br>
           
           <h4>Code/designs borrowed from others</h4><br>
           <p>Cornell ECE 4760 Lab 2 ADC Sleep Example<br><a href="http://people.ece.cornell.edu/land/courses/ece4760/labs/s2012/lab2.html">http://people.ece.cornell.edu/land/courses/ece4760/labs/s2012/lab2.html</a></p>
           <p>chipstein: Homebrew DIY EEG, EKG, and EMG<br><a href="https://sites.google.com/site/chipstein/home-page/eeg-with-an-arduino">https://sites.google.com/site/chipstein/home-page/eeg-with-an-arduino</a></p>
           <p>Joerg Wunsch's UART AVR C Code<br><a href="https://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2012/cwm55/cwm55_mj294/www.nongnu.org/avr-libc/examples/stdiodemo/uart.c">www.nongnu.org/avr-libc/examples/stdiodemo/uart.c</a></p>
           <p>MATLAB Notch Filter Implementation Example<br><a href="http://www.mathworks.com/matlabcentral/newsreader/view_thread/292960">http://www.mathworks.com/matlabcentral/newsreader/view_thread/292960</a></p>
           <p>NeHe Productions: OpenGL Tutorials (Template code for OpenGL font rendering and "OpenGL with SDL" example)<br><a href="http://nehe.gamedev.net/">http://nehe.gamedev.net/</a></p>
           <p>flipcode - Safe sprintf Example<br><a href="http://www.flipcode.com/archives/Safe_sprintf.shtml">http://www.flipcode.com/archives/Safe_sprintf.shtml</a></p>
           <br>

           <h4>Data sheets</h4><br>
           <p>Analog Devices AD 620 Low Cost Low Power Instrumentation Amplifier<br><a href="http://www.analog.com/static/imported-files/data_sheets/AD620.pdf">http://www.analog.com/static/imported-files/data_sheets/AD620.pdf</a></p>
           <p>Fairchild Semiconductor Single-Channel: 6N137 High Speed 10MBit/s Logic Gate Optocoupler<br><a href="http://www.fairchildsemi.com/ds/6N/6N137.pdf">http://www.fairchildsemi.com/ds/6N/6N137.pdf</a></p>
           <p>Intersil CA3140, CA3140A: 4.5MHz, BiMOS Operational Amplifier with 
MOSFET Input/Bipolar Output<br><a href="http://www.intersil.com/data/fn/fn957.pdf">http://www.intersil.com/data/fn/fn957.pdf</a></p>
           <p>Atmel ATmega644/V: 8-bit Atmel Microcontroller with 64K Bytes In-System Programmable Flash<br><a href="http://www.atmel.com/Images/doc2593.pdf">http://www.atmel.com/Images/doc2593.pdf</a></p>
           <br>
           
           <h4>Vendor sites</h4><br>
           <p>Contec Medical Systems Co., LTD<br><a href="http://www.contecmed.com/main/Default.asp">http://www.contecmed.com/main/Default.asp</a></p>
           <p>Analog Devices<br><a href="http://www.analog.com/en/index.html">http://www.analog.com/en/index.html</a></p>
           <p>Digi-Key<br><a href="http://www.digikey.com/">http://www.digikey.com/</a></p>
           <p>SparkFun Electronics<br><a href="http://www.sparkfun.com/">http://www.sparkfun.com/</a></p>
           <p>Atmel<br><a href="http://www.atmel.com/">http://www.atmel.com/</a></p>
           <p>Texas Instruments<br><a href="http://www.ti.com/">http://www.ti.com/</a></p>
           <p>Fairchild Semiconductor<br><a href="http://www.fairchildsemi.com/">http://www.fairchildsemi.com/</a></p>
           <p>Maxim IC<br><a href="http://www.maxim-ic.com/">http://www.maxim-ic.com/</a></p>
           <p>Intersil<br><a href="http://www.intersil.com/cda/home/">http://www.intersil.com/cda/home/</a></p>
           <br>
        </div>
      </div>
      <br>

      <a name="contact"></a>
      <div class="row">
        <div class="span12">
          <h2>Contact Us</h2>
           <p>You may reach <a href="http://www.charlesmoyes.com/">Charles Moyes</a> via e-mail at <a href="mailto:cwm55@cornell.edu">cwm55@cornell.edu</a> and Mengxiang Jiang via <a href="mailto:mj294@cornell.edu">mj294@cornell.edu</a></p>
        </div>
      </div>
      <br>
      
      <hr>

      <footer>
        <p>Copyright 2012 © Charles Moyes and Mengxiang Jiang</p>
      </footer>

    </div> <!-- /container -->

    <!-- javascript -->
    <script src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/jquery-1.7.2.min.js.download"></script>
    <script src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/bootstrap-transition.js.download"></script>
    <script src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/bootstrap-alert.js.download"></script>
    <script src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/bootstrap-modal.js.download"></script>
    <script src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/bootstrap-dropdown.js.download"></script>
    <script src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/bootstrap-scrollspy.js.download"></script>
    <script src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/bootstrap-tab.js.download"></script>
    <script src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/bootstrap-tooltip.js.download"></script>
    <script src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/bootstrap-popover.js.download"></script>
    <script src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/bootstrap-button.js.download"></script>
    <script src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/bootstrap-collapse.js.download"></script>
    <script src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/bootstrap-carousel.js.download"></script>
    <script src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/bootstrap-typeahead.js.download"></script>

    <script src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/prettify.js.download"></script>
    
    <script type="text/x-mathjax-config;executed=true">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" src="./Brain-Computer Interface Using Single-Channel Electroencephalography_files/MathJax.js.download"></script>
  


<div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: MathJax_Caligraphic, sans-serif;"></div></body></html>